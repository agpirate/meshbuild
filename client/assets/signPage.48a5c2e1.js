import{h as y,q as de,O as pe,P as ge,R as me,r as S,w as H,o as fe,S as ve,u as e,l as c,m as v,n as o,U,V as ye,W as u,f as l,X as p,Q as P,Y as M,Z as q,p as h,_ as T,$ as I,a0 as B,a1 as x,a2 as N,a3 as E,a4 as V}from"./index.a33c9604.js";import{d as he,Q as C}from"./dialogOne.c85c9c5d.js";import{Q as K}from"./QPage.6a09d91b.js";import{Q as J}from"./QSelect.abe7341a.js";import{u as we,a as be,s as Ce}from"./debugMixin.db1f0e67.js";import{_ as _e,g as xe,a as ke,b as Se,c as W}from"./geolocMixin.5597b116.js";import{a as Pe}from"./authenticatingStore.4876d44f.js";import{p as Le}from"./profileStore.08e88bed.js";import{u as Me}from"./use-quasar.369640b6.js";import{_ as R}from"./storeService.3eb6e8a7.js";import{u as qe}from"./profileschemaValidator.88dcf2b3.js";import"./axios.05cf8750.js";const Ae=[y("g",{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)","stroke-width":"2"},[y("circle",{cx:"22",cy:"22",r:"6"},[y("animate",{attributeName:"r",begin:"1.5s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),y("animate",{attributeName:"stroke-opacity",begin:"1.5s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),y("animate",{attributeName:"stroke-width",begin:"1.5s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),y("circle",{cx:"22",cy:"22",r:"6"},[y("animate",{attributeName:"r",begin:"3s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),y("animate",{attributeName:"stroke-opacity",begin:"3s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),y("animate",{attributeName:"stroke-width",begin:"3s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),y("circle",{cx:"22",cy:"22",r:"8"},[y("animate",{attributeName:"r",begin:"0s",dur:"1.5s",values:"6;1;2;3;4;5;6",calcMode:"linear",repeatCount:"indefinite"})])])];var Ne=de({name:"QSpinnerRings",props:pe,setup(F){const{cSize:O,classes:D}=ge(F);return()=>y("svg",{class:D.value,stroke:"currentColor",width:O.value,height:O.value,viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"},Ae)}});const De={class:"boxastyle text-orange bg-orange"},Te=u("p",{class:"text-white"},"Allow Location Access.",-1),Ie=u("div",{class:"text-orange boxcstyle",style:{"max-width":"80vw"}},[p(" Would you like to "),u("ul",null,[u("li",null,"Get product before any one"),u("li",null,"Get product near you")]),p(" then, we need locations acccess to provide you with best exprience. ")],-1),Oe={class:"justify-end row"},$e={key:1},je=u("p",{class:"text-grey q-pa-sm",style:{position:"fixed",bottom:"5px",left:"5px"}}," Provided by mesh ",-1),Qe={class:"col flex flex-center column q-gutter-md"},Be={class:"row justify-evenly items-center"},Ee={key:0,class:"warnMessage"},Ve={key:1},Ge={class:"column justify-evenly items-center"},Ue={key:0,class:"warnMessage"},Ke={key:1},Re={class:"column justify-evenly items-center"},Fe={key:0,class:"warnMessage"},Ze={key:1},ze={class:"col-auto q-pa-none row q-gutter-xs fontastyle text-grey justify-end"},He=u("p",{class:"text-grey q-pa-sm"},"Provided by mesh",-1),yt={__name:"signPage",setup(F){const{askForGPS:O,_thislocation:D,gpsStatus:_,allowGPS:Z,_initGeo:X,getCurrentPosition:Je}=_e(),{_debugObj:w,_validateThis:A}=qe(),{Loadingpage:z,Loadingevent:$,Loading:We,DoneMessage:Xe,KnowthisMessage:Ye,WarnthisMessage:et,timerLoadevent:g,timerDone:tt,timerInformthis:nt,timerError:ot}=we(),Y=Pe(),ee=Le();be({title:"itService signing",titleTemplate:a=>`${a} - LoginPage`,script:{printJs:{type:"application/ld+json",innerHTML:"{  }"},ldJson:{type:"application/ld+json",innerHTML:"{ }"}}}),Me();const te=me();var n=S({});async function ne(){n.value={};try{n.value.phone=null,n.value.phoneCode=["",""],n.value.geolocation={},n.value.geolocation={lat:"",long:""},n.value.location={},n.value.location={country:"",city:"",street:""}}catch{}return!0}let b=S({login:"init",create:!1}),oe=S("Continue"),ae="phone";const le=ee,se={createData:async function(){let a={};return n.value[ae]==null?!1:await le.createData(n.value,a).then(t=>{var m;return(m=t.status)!=null&&m?t.data:!1}).catch(()=>!1)}};async function j(){return Object.values(w.value).every(t=>t==null)&&ie(),!0}S(0);var ie=async function(){return console.log(`

Function - _manageStoreLogin --STORE Authentication Initializing [Phone,Stored_ID]---- 
`),await Y.useLogin(n.value).then(async a=>{var m,f,s,r,d,i,L;var t=(m=a.data)!=null?m:!1;return console.log(`
 LoginStatus = ${a.status} 
`),console.log(a.data,(f=$.continueform)!=null?f:!1),!((s=a.status)!=null&&s)||!t?!((r=n.value.phone)!=null&&r)||b.value.login=="init"?(await g({loginform:0},0,"Create New Account"),!0):(console.log(n.value,"ceating new"),b.value.login="create",await g({loginform:0},0,"Creating New Account !"),se.createData().then(async Q=>Q&&Object.keys(Q).length?(b.value.login="init",console.log(`

</Function - _manageStoreLogin -- New Profile Created -- 
`),oe.value="Log to Continue",g({loginform:0},0,"Account Created ! Login to continue.")):(n.value.phone=null,await g({loginform:0},0,"Phone Number Error !"))).catch(Q=>g({main:0},0,"Try Refreshing, please ?"+Q))):(d=t.enrollKey)!=null&&d&&t.enrollKey!=((i=n.value.enrollKey)!=null?i:!1)?(await g({main:5e3},0,"Use Correct key!"),b.value.login="keyrequired",!0):(n.value=Object.assign({},t),console.log(`
 User Acctype = ${n.value.acctype} 
`),(L=n.value.acctype)!=null&&L?(await g({main:0},0,"...."),await ce("Home","Home","saleit"),g({loginform:0},0,"Routing Error. Check Connection Please ;")):(await g({main:5e3},0,"Access Error, Retrying.."),!1))}).catch(async a=>(console.log(`

</Function - _manageStoreLogin - 
`+a),await g({main:0},0,"Error Connecting.."+a)))};S(!1),S(null);let G=S([]),k=S(null);H(_,(a,t)=>((a=="finish"||a==null)&&re(),!0)),H(D,(a,t)=>{var m,f;return a&&(n.value.geolocation=a,_updateStorage("lat",U((m=a.lat)!=null?m:null)),_updateStorage("long",U((f=a.long)!=null?f:null))),!0});async function re(){var a,t,m,f,s,r,d,i;if(console.log("Setting Locations =<> GPS = ",Object.values((a=n.value.geolocation)!=null?a:{})," && timeZone = ",k.value),!k.value)return!1;if((t=D.value.lat)!=null&&t)n.value.geolocation=D.value;else{let L=((m=k.value.loc)!=null?m:"").split(",");console.error(L,"GPS ACESS IS BLOCKED, timeZone API OPtions ...."),L[1]&&(n.value.geolocation={lat:L[0],long:L[1]})}return n.value.phoneCode=G.value,n.value.location.country=(f=k.value.country)!=null?f:"",n.value.location.city=(s=k.value.city)!=null?s:"",n.value.location.street=(r=k.value.city)!=null?r:"",n.value.location.provinance=(d=k.value.region)!=null?d:"",n.value.currency=(i=G.value[2])!=null?i:R._get("currency","ETB"),console.log("Final =<> GPS = ",n.value.geolocation," && Locations = ",n.value.location),_.value==null||(_.value=null),!0}async function ue(){return console.log("Initiating the API or TimeZone Locations System"),_.value="Checking.... Connection.",G.value=await xe(),k.value=await ke(),_.value=await Se(),new Promise(a=>{setTimeout(()=>{console.log("Terminating the API or TimeZone Locations System, && INIT GeoData Mining using GPS or TimeZone GeoData !!! !"),X(),a(!0)},2e3)})}g({main:0},0,"..."),fe(async()=>(console.log(`

<0 ---------Mining Client DATA ---- 
`),await g({main:0},0,"mesh "),await ue().then(async a=>(console.log(`

<0 ---------Automatic Authentications Initiated---- 
`),await j(),console.log(`

</0---------Automatic Authentications Terminated--- 
`),!0)).catch(async a=>await g({main:0},0,"Error Connecting.. "+a)))),ve(async()=>{console.log(`

<---------Defaulting Profile <--this--> ---- 
`),console.log(`

---------Mining User Device Informations [Phones, GeoLocations]---- 
`)}),ne();let ce=async(a=null,t=null,m=!0)=>{var f,s,r;if(!a||!((f=n.value.acctype)!=null&&f))return!1;if(ye[a]._auth&&!((s=n.value.enrolled)!=null&&s))return _thisOps.value="createPermission",!1;await g({main:0},0,"Loading "+a);try{let d=Object.assign({acctype:(r=n.value.acctype[m])!=null?r:""},R._reroute(a,t,Ce.value=="Small"));return R._set("path",U(t)),await te.push(d),g({main:1},1,"Ok, Loading "+a),!0}catch(d){return console.log(`

</Routing Functions of pathName = ${a}  == >> ${d} == >>  
`),g({main:3e3},3e3,d),!1}};return(a,t)=>{var m,f;return((m=e($).main)!=null?m:!1)||e(_)?(c(),v(K,{key:0,class:"column flex flex-center bg-orange rounded-borders q-py-sm"},{default:o(()=>{var s;return[e(_)=="permiting_gpsservice"?(c(),v(he,{key:0,isOpen:e(O),onEmitClick0:t[1]||(t[1]=r=>e(Z)(r))},{default:o(()=>[u("div",De,[Te,Ie,u("div",Oe,[l(P,{flat:"",color:"green",onClick:t[0]||(t[0]=r=>e(Z)(!0))},{default:o(()=>[p(" Allow ")]),_:1})])])]),_:1},8,["isOpen"])):(c(),M("p",$e,q(e(_)=="timezone"?"Connection Error":e(_)),1)),u("div",null,[l(Ne,{style:{color:"lightyellow"},size:"10em"})]),(s=e($).main)!=null&&s?(c(),v(C,{key:2,style:{color:"lightyellow"},class:"fontdstyle"},{default:o(()=>{var r;return[p(q((r=e(z).content)!=null?r:"..."),1)]}),_:1})):h("",!0),je]}),_:1})):(f=e($).continueform)!=null&&f?(c(),v(K,{key:1,class:"flex flex-center"},{default:o(()=>[l(B,{class:"col-auto boxbstyle"},{default:o(()=>[l(T,{class:"text-dark"},{default:o(()=>{var s;return[p(q((s=e(z).content)!=null?s:"..."),1)]}),_:1}),l(T,{class:"text-dark"},{default:o(()=>[l(P,{flat:"",color:"red",label:"Cancel",onClick:t[2]||(t[2]=I(s=>e(n).phone=null,["prevent"]))}),l(P,{flat:"",label:"Continue...",onClick:t[3]||(t[3]=I(s=>e(g)({loginform:0},0,""),["prevent"]))})]),_:1})]),_:1})]),_:1})):(c(),v(K,{key:2,persistent:"",class:"bg-white rounded-borders column"},{default:o(()=>[u("div",Qe,[e(b).login=="init"?(c(),v(B,{key:0,style:{"min-width":"20%","max-width":"80vw"},flat:""},{default:o(()=>{var s,r,d;return[l(x,{class:"q-pa-sm q-gutter-sm"},{default:o(()=>[l(C,{class:"text-weight-bold text-orange text-h5"},{default:o(()=>[p("Continue to mesh")]),_:1}),l(C,{caption:""},{default:o(()=>[p("For Trader & Buyer")]),_:1})]),_:1}),(r=(s=e(n).phoneCode)==null?void 0:s.length)!=null&&r?(c(),v(x,{key:0,class:"q-pa-md row q-gutter-sm column"},{default:o(()=>[l(J,{round:"",outline:"",color:"orange","bottom-slots":"",filled:"",modelValue:e(n).phoneCode,"onUpdate:modelValue":t[4]||(t[4]=i=>e(n).phoneCode=i),options:Object.values(e(W)),input:e(A)("phoneCode",e(n).phoneCode),label:"Country",dense:!0,class:"col"},{prepend:o(()=>[l(N,{name:"place"})]),_:1},8,["modelValue","options","input"]),u("div",Be,[l(N,{name:"phone"}),p("+"+q(e(n).phoneCode[1])+" ",1),E(u("input",{class:"boxcstyle",type:"Number","onUpdate:modelValue":t[5]||(t[5]=i=>e(n).phone=i),label:"Phone Number",onInput:t[6]||(t[6]=i=>e(A)("phone",e(n).phone))},null,544),[[V,e(n).phone]])]),e(w).phone?(c(),M("div",Ee,q(e(w).phone),1)):h("",!0)]),_:1})):h("",!0),(d=e(w).phone)!=null&&d?(c(),M("div",Ve)):h("",!0),l(x,{class:"q-py-xs"},{default:o(()=>[l(C,{caption:""},{default:o(()=>[p("Sale & Buy ")]),_:1})]),_:1}),l(T,{class:"text-dark bg-orange",onClick:t[7]||(t[7]=I(i=>j(),["prevent"]))},{default:o(()=>[l(P,{class:"fontastyle",flat:"",label:"Continue"})]),_:1})]}),_:1})):e(b).login=="create"?(c(),v(B,{key:1,style:{"min-width":"20%","max-width":"80vw"},flat:""},{default:o(()=>{var s,r,d;return[l(x,{class:"q-pa-sm q-gutter-sm"},{default:o(()=>[l(C,{class:"text-weight-bold text-orange text-h5"},{default:o(()=>[p("Joining mesh")]),_:1}),l(C,{caption:""},{default:o(()=>[p("For Trader & Buyer")]),_:1})]),_:1}),(r=(s=e(n).phoneCode)==null?void 0:s.length)!=null&&r?(c(),v(x,{key:0,class:"q-pa-md row q-gutter-sm column"},{default:o(()=>[l(J,{round:"",outline:"",color:"orange","bottom-slots":"",filled:"",modelValue:e(n).phoneCode,"onUpdate:modelValue":t[8]||(t[8]=i=>e(n).phoneCode=i),options:Object.values(e(W)),input:e(A)("phoneCode",e(n).phoneCode),label:"Country",dense:!0,class:"col"},{prepend:o(()=>[l(N,{name:"place"})]),_:1},8,["modelValue","options","input"]),u("div",Ge,[u("div",null,[l(N,{name:"phone"}),E(u("input",{class:"boxcstyle",type:"Number","onUpdate:modelValue":t[9]||(t[9]=i=>e(n).phone=i),label:"Phone Number",onInput:t[10]||(t[10]=i=>e(A)("phone",e(n).phone))},null,544),[[V,e(n).phone]])]),u("div",null,[l(N,{name:"password"}),p(" password "),E(u("input",{class:"boxcstyle",type:"password","onUpdate:modelValue":t[11]||(t[11]=i=>e(n).password=i),label:"Phone Number",onInput:t[12]||(t[12]=i=>e(A)("password",e(n).password))},null,544),[[V,e(n).password]])])]),e(w).phone?(c(),M("div",Ue,q(e(w).phone),1)):h("",!0)]),_:1})):h("",!0),(d=e(w).phone)!=null&&d?(c(),M("div",Ke)):h("",!0),l(x,{class:"q-py-xs"},{default:o(()=>[l(C,{caption:""},{default:o(()=>[p("Sale & Buy ")]),_:1})]),_:1}),l(T,{class:"text-dark bg-orange",onClick:t[13]||(t[13]=I(i=>j(),["prevent"]))},{default:o(()=>[l(P,{class:"fontastyle",flat:"",label:"Join"})]),_:1})]}),_:1})):e(b).login=="keyrequired"?(c(),v(B,{key:2,style:{"min-width":"20%","max-width":"80vw"},flat:""},{default:o(()=>{var s,r,d;return[l(x,{class:"q-pa-sm q-gutter-sm"},{default:o(()=>[l(C,{class:"text-weight-bold text-orange text-h5"},{default:o(()=>[p("Joining mesh")]),_:1}),l(C,{caption:""},{default:o(()=>[p("For Traders Only")]),_:1})]),_:1}),(r=(s=e(n).phoneCode)==null?void 0:s.length)!=null&&r?(c(),v(x,{key:0,class:"q-pa-md row q-gutter-sm column"},{default:o(()=>[u("div",Re,[u("div",null,[l(N,{name:"password"}),p(" Log key "),E(u("input",{class:"boxcstyle",type:"password","onUpdate:modelValue":t[14]||(t[14]=i=>e(n).enrollKey=i),label:"Phone Number",onInput:t[15]||(t[15]=i=>e(A)("enrollKey",e(n).enrollKey))},null,544),[[V,e(n).enrollKey]])])]),e(w).phone?(c(),M("div",Fe,q(e(w).phone),1)):h("",!0)]),_:1})):h("",!0),(d=e(w).phone)!=null&&d?(c(),M("div",Ze)):h("",!0),l(x,{class:"q-py-xs"},{default:o(()=>[l(C,{caption:""},{default:o(()=>[p("Contact us: +251 091232344 ")]),_:1})]),_:1}),l(T,{class:"text-dark bg-orange",onClick:t[16]||(t[16]=I(i=>j(),["prevent"]))},{default:o(()=>[l(P,{class:"fontastyle",flat:"",label:"Login"})]),_:1})]}),_:1})):h("",!0),u("div",ze,[e(b).login=="init"?(c(),v(P,{key:0,flat:"",dense:!0,onClick:t[17]||(t[17]=s=>e(b).login="create")},{default:o(()=>[p(" Create ")]),_:1})):(c(),v(P,{key:1,flat:"",dense:!0,onClick:t[18]||(t[18]=s=>e(b).login="init")},{default:o(()=>[p(" Already Have Account ? ")]),_:1}))])]),He]),_:1}))}}};export{yt as default};
