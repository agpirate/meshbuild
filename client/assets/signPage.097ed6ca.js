import{Q as U}from"./QItemLabel.2e09bb08.js";import{Q as Z}from"./QPage.9f9ba406.js";import{r as p,O as pe,w as oe,o as _e,P as be,k as xe,u as n,l as d,m as A,n as g,R as q,S as Se,U as t,V as b,W as E,X as M,p as k,f as v,Y as ne,Q as se,Z as D,_ as ae,$ as N,a0 as O,a1 as H,a2 as we,a3 as ke,F as Ce}from"./index.2ee290ae.js";import{s as Pe}from"./utils.5467200b.js";import{_ as Le,a as Ae,p as Me,g as $e,b as je,c as Te,d as De}from"./geolocMixin.da31eb10.js";import{u as Ne}from"./use-quasar.f5f33ae7.js";import{d as Ie,u as qe,a as Ee,_ as $,b as Oe}from"./debugMixin.cc0f2933.js";import"./axios.05cf8750.js";const Ve=()=>{var z=p("profileSchemas"),V=p("profileSchema");let j=p({}),_=p({}),P=p(null);Ie("profileSchemas","profileSchema").then(a=>{a&&(P.value=a)});async function R(a,l=null){var F,G,i;if(console.log("ssssssssssss",a,l),!P.value||!l)return!1;let B=(F=P.value[a].rules)!=null?F:null,W=(i=(G=j.value[a])!=null?G:null)!=null?i:l;if(!B)return!0;_.value[a]=null;for(let K of B)if(!await m(K,W)){_.value[a]=J(K),console.log("No Validated  for = "+a);break}return console.log(_.value," Validatiotion Obj."),!0}function J(a){switch(a.type){case"required":return"Field is required";case"minValue":return"Minimum Value Error";case"maxValue":return"Maximam Value Error";case"minLength":return`Minimum length is ${a.value}`;case"maxLength":return`Maximum length is ${a.value}`;case"pattern":return"Invalid format";default:return"Invalid input"}}const m=async(a,l)=>{switch(console.log(typeof a,typeof l,"validation is thisrule210"),a.type){case"required":return l!=null&&l!="";case"minValue":return l>=a.value;case"maxValue":return l<=a.value;case"minLength":return l.length>=a.value;case"maxLength":return l.length<=a.value;case"pattern":return new RegExp(a.value).test(l);case"type":return L(a.value,l);default:return!0}},L=(a,l)=>{switch(a){case"number":return!isNaN(l);case"string":return typeof l=="string";case"array":return Array.isArray(l);case"object":return typeof l=="object"&&!Array.isArray(l);default:return!1}};return{thisSchemaPath:z,thisSchemaFile:V,_debugObj:_,_validateThis:R}},Re={class:"bgc-light boxStyle-sm radiusxxs fontStyle-base font-system sh-xxs-system-secondaryOUT onedlayout ccolumn cgap-4"},Be=t("h4",null," Location Access Required ",-1),Fe=t("div",{class:"onedlayout crow cj-center"},[t("p",{class:"box-size-flexp75auto"}," Mesh requires location access to provide you with the best experience ")],-1),Ge={class:"onedlayout crow cj-end"},Ke=t("h4",{class:""}," Close ",-1),Qe=[Ke],Ue=t("h4",{class:""}," Allow ",-1),Ze=[Ue],He={key:1},ze=t("div",null,null,-1),Je=t("div",{class:"font-grey",style:{position:"fixed",bottom:"5px",left:"5px"}},[t("p",null," Provided by mesh ")],-1),We={class:"col flex flex-center column q-pa-sm"},Xe={class:"boxStyle-xl radius-sm bgc-dl15"},Ye={key:0,style:{"min-width":"40%","max-width":"80vw"},class:"bgc-dl30 radiusxxs boxStyle-sm p-xl fontStyle-base onedlayout ccolumn c-gap-3"},et=t("h4",{class:"txtsmokey"}," Log In",-1),tt=t("h6",{class:"txtsmokey font-system"}," Mesh",-1),ot={class:"boxStyle onedlayout cgap-4 ccolumn ia-center"},nt={class:"onedlayout ccolumn cgap-2"},st={class:"boxStyle-xxs radius-md bgc-darkgrey onedlayout crow cj-evenly ia-center"},at={class:"ri-phone-fill"},lt={key:0,class:"txtnegative"},it={key:1},rt={class:"boxStyle-dense bgc-system onedlayout crow cj-between ia-center font-smoke"},ut=t("h4",{class:""}," Login",-1),ct=t("h5",null," Create New",-1),dt=t("h4",{class:"font-warning"}," Creating Account",-1),gt=t("h6",null,"mesh",-1),mt={class:"fontStyle-dense font-lightsmoke boxStyle-xxs radius-md bgc-darkgrey onedlayout crow"},yt={class:"onedlayout ccolumn fontStyle-base font-grey"},ht={class:"boxStyle-xxs radius-md bgc-darkgrey onedlayout crow cj-evenly ia-center"},ft=t("h1",null,[t("i",{class:"ri-phone-fill"})],-1),vt={class:"boxStyle-xxs radius-md bgc-darkgrey onedlayout crow cj-evenly ia-center"},pt=t("h1",null,[t("i",{class:"ri-key-fill"})],-1),_t={key:0,class:"warnMessage"},bt={key:1},xt={class:"bgwarning onedlayout crow cj-between ia-center fontStyle-dense"},St=t("h4",null," Create",-1),wt=t("h4",{class:"txtprimary"}," Already Registered ? ",-1),kt={key:2,class:"boxStyle-xs radius-md onedlayout ccolumn cgap-3"},Ct=t("h3",null,"Continue with login key ",-1),Pt=t("hr",null,null,-1),Lt={key:0,class:"onedlayout ccolumn"},At={class:"boxStyle-xxs radius-md bgc-darkgrey onedlayout crow cj-evenly ia-center"},Mt=t("h1",null,[t("i",{class:"ri-key-fill"})],-1),$t={key:0,class:"warnMessage"},jt={key:1},Tt={class:"bgc-dl15 boxStyle-sm p-lrsm onedlayout crow cj-between fontStyle-dense pointer"},Dt=t("h3",null," Continue",-1),Nt=[Dt],It=t("h3",null," Create",-1),qt=[It],Et={class:"col-auto column q-my-sm q-gutter-xs text-grey"},Ot=t("br",null,null,-1),Vt=t("p",{class:"text-grey q-pa-sm"},"Provided by mesh",-1),Jt={__name:"signPage",setup(z){const{askForGPS:V,_thislocation:j,gpsStatus:_,allowGPS:P,_initGeo:R,getCurrentPosition:J}=Le(),{_debugObj:m,_validateThis:L}=Ve(),{Loadingpage:a,Loadingevent:l,Loading:B,DoneMessage:W,KnowthisMessage:F,WarnthisMessage:G,timerLoadevent:i,timerDone:K,timerInformthis:le,timerError:Rt}=qe(),ie=Ae(),re=Me();Ee({title:"mesh",titleTemplate:s=>`${s} - LoginPage`,script:{printJs:{type:"application/ld+json",innerHTML:"{  }"},ldJson:{type:"application/ld+json",innerHTML:"{ }"}}}),Ne();const ue=pe();var o=p({});async function ce(){o.value={};try{o.value.phone=null,o.value.phoneCode=["",""],o.value.geolocation={},o.value.geolocation={lat:"",long:""},o.value.location={},o.value.location={country:"",city:"",street:""}}catch{}return!0}let S=p({login:"init",create:!1}),de=p("Continue"),ge="phone";const me=re,ye={createData:async function(){let s={};return o.value[ge]==null?!1:await me.createData(o.value,s).then(e=>{var r;return(r=e.status)!=null&&r?e.data:!1}).catch(()=>!1)}};async function I(){var s;return console.log(m!=null?m:!1,"debugggggg"),(s=m.value)!=null&&s?Object.values(m.value).every(r=>r==null)&&X():(m.value=null,X()),!0}p(0);var X=async function(){return console.log(`

Function - _manageStoreLogin --STORE Authentication Initializing [Phone,Stored_ID]---- 
`),await ie.useLogin(o.value).then(async s=>{var r,h,x,c,u,w,T;var e=(r=s.data)!=null?r:!1;return console.log(`
 LoginStatus = ${s.status} 
`),console.log(s.data,(h=l.continueform)!=null?h:!1),!((x=s.status)!=null&&x)||!e?!((c=o.value.phone)!=null&&c)||S.value.login=="init"?(await i({loginform:0},0,"Create New Account"),!0):(console.log(o.value,"ceating new"),S.value.login="create",await i({loginform:0},0,"Creating New Account !"),ye.createData().then(async y=>y&&Object.keys(y).length?(S.value.login="init",console.log(`

</Function - _manageStoreLogin -- New Profile Created -- 
`),de.value="Log to Continue",i({loginform:0},0,"Account Created ! Login to continue.")):(o.value.phone=null,await i({loginform:0},0,"Phone Number Error !"))).catch(y=>i({main:0},0,"Try Refreshing, please ?"+y))):(u=e.enrollKey)!=null&&u&&e.enrollKey!=((w=o.value.enrollKey)!=null?w:!1)?(await i({main:5e3},0,"Continue with key"),S.value.login="keyrequired",!0):(o.value=Object.assign({},e),console.log(`
 User Acctype = ${o.value.acctype} 
`),(T=o.value.acctype)!=null&&T?(await i({main:0},0,"...."),await ve("Home","Home","saleit"),i({loginform:0},0,"Routing Error. Check Connection Please ;")):(await i({main:5e3},0,"Access Error, Retrying.."),!1))}).catch(async s=>(console.log(`

</Function - _manageStoreLogin - 
`+s),await i({main:0},0,"Error Connecting.."+s)))};p(!1),p(null);let Q=p([]),C=p(null);oe(_,(s,e)=>((s=="finish"||s==null)&&he(),!0)),oe(j,(s,e)=>{var r,h;return s&&(o.value.geolocation=s,Y("lat",q((r=s.lat)!=null?r:null)),Y("long",q((h=s.long)!=null?h:null))),!0});async function he(){var s,e,r,h,x,c,u;if(console.log("Setting Locations =<> GPS = ",Object.values((s=o.value.geolocation)!=null?s:{})," && timeZone = ",C.value),!C.value)return!1;if(j.value)o.value.geolocation=j.value;else{let w=((e=C.value.loc)!=null?e:"").split(",");console.error(w,"GPS ACESS IS BLOCKED, timeZone API OPtions ...."),w[1]&&(o.value.geolocation={lat:w[0],long:w[1]})}return $._set("lat",o.value.geolocation.lat),$._set("long",o.value.geolocation.long),o.value.phoneCode=Q.value,o.value.location.country=(r=C.value.country)!=null?r:"",o.value.location.city=(h=C.value.city)!=null?h:"",o.value.location.street=(x=C.value.city)!=null?x:"",o.value.location.provinance=(c=C.value.region)!=null?c:"",o.value.currency=(u=Q.value[2])!=null?u:$._get("currency","ETB"),console.log("Final =<> GPS = ",o.value.geolocation," && Locations = ",o.value.location),_.value==null||(_.value=null),!0}async function fe(){return console.log("Initiating the API or TimeZone Locations System"),_.value="Checking.... Connection.",Q.value=await $e(),C.value=await je(),_.value=await Te(),new Promise(s=>{setTimeout(()=>{console.log("Terminating the API or TimeZone Locations System, && INIT GeoData Mining using GPS or TimeZone GeoData !!! !"),R(),s(!0)},2e3)})}i({main:0},0,"..."),_e(async()=>(console.log(`

<0 ---------Mining Client DATA ---- 
`),await i({main:0},0,"mesh "),await fe().then(async s=>(console.log(`

<0 ---------Automatic Authentications Initiated---- 
`),await I(),console.log(`

</0---------Automatic Authentications Terminated--- 
`),!0)).catch(async s=>await i({main:0},0,"Error Connecting.. "+s)))),be(async()=>{console.log(`

<---------Defaulting Profile <--this--> ---- 
`),console.log(`

---------Mining User Device Informations [Phones, GeoLocations]---- 
`)}),ce();let ve=async(s=null,e=null,r=!0)=>{var h,x,c;if(!s||!((h=o.value.acctype)!=null&&h))return!1;if(Se[s]._auth&&!((x=o.value.enrolled)!=null&&x))return _thisOps.value="createPermission",!1;await i({main:0},0,"");try{let u=Object.assign({acctype:(c=o.value.acctype[r])!=null?c:""},$._reroute(s,e,Pe.value=="Small"));return $._set("path",q("mesh")),await ue.push(u),i({main:1},1," "),!0}catch(u){return console.log(`

</Routing Functions of pathName = ${s}  == >> ${u} == >>  
`),i({main:3e3},3e3,u),!1}};async function Y(s,e){return e&&$._set(s,q(e)),!0}return(s,e)=>{var h,x;const r=xe("buttton");return((h=n(l).main)!=null?h:!1)||n(_)?(d(),A(Z,{key:0,class:"column flex flex-center bgc-system rounded-borders q-py-sm"},{default:g(()=>{var c;return[n(_)=="permiting_gpsservice"?(d(),A(Oe,{key:0,isOpen:n(V),onEmitClick0:e[2]||(e[2]=u=>n(P)(u))},{default:g(()=>[t("div",Re,[Be,Fe,t("div",Ge,[t("button",{class:"boxStyle-md radius-xs bgc-lightsmoke-hovered font-negative",onClick:e[0]||(e[0]=u=>n(P)(!1))},Qe),t("button",{class:"boxStyle-md radius-xs bgc-lightsmoke-hovered font-posetive",onClick:e[1]||(e[1]=u=>n(P)(!0))},Ze)])])]),_:1},8,["isOpen"])):(d(),b("p",He)),ze,(c=n(l).main)!=null&&c?(d(),A(U,{key:2,style:{color:"lightyellow"},class:"fontdstyle"},{default:g(()=>{var u;return[E(M((u=n(a).content)!=null?u:"..."),1)]}),_:1})):k("",!0),Je]}),_:1})):(x=n(l).continueform)!=null&&x?(d(),A(Z,{key:1,class:"flex flex-center"},{default:g(()=>[v(ae,{class:"col-auto boxbstyle"},{default:g(()=>[v(ne,{class:"text-dark"},{default:g(()=>{var c;return[E(M((c=n(a).content)!=null?c:"..."),1)]}),_:1}),v(ne,{class:"text-dark"},{default:g(()=>[v(se,{flat:"",color:"red",label:"Cancel",onClick:e[3]||(e[3]=D(c=>n(o).phone=null,["prevent"]))}),v(se,{flat:"",label:"Continue...",onClick:e[4]||(e[4]=D(c=>n(i)({loginform:0},0,""),["prevent"]))})]),_:1})]),_:1})]),_:1})):(d(),A(Z,{key:2,persistent:"",class:"bg-white rounded-borders column"},{default:g(()=>{var c,u,w,T;return[t("div",We,[t("div",Xe,[n(S).login=="init"?(d(),b("div",Ye,[et,tt,t("div",ot,[t("div",nt,[t("div",st,[t("h1",null,[t("i",at,M(n(o).phoneCode[1]),1)]),N(t("input",{class:"bgc-dl15 ccol-grow boxStyle-md radius-sm",type:"Number","onUpdate:modelValue":e[5]||(e[5]=y=>n(o).phone=y),label:"Phone Number",onChange:e[6]||(e[6]=y=>n(L)("phone",n(o).phone))},null,544),[[O,n(o).phone]])])]),n(m).phone?(d(),b("p",lt,M(n(m).phone),1)):k("",!0),(c=n(m).phone)!=null&&c?(d(),b("div",it)):k("",!0)]),t("div",rt,[v(r,{class:"boxStyle-sm radius-sm bgc-darkgrey-hovered pointer",onClick:e[7]||(e[7]=D(y=>I(),["prevent"]))},{default:g(()=>[ut]),_:1}),v(r,{class:"font-unset boxStyle-sm radius-xs bgc-darkishgrey-hovered pointer font-greysmoke",onClick:e[8]||(e[8]=y=>n(S).login="create")},{default:g(()=>[ct]),_:1})])])):n(S).login=="create"?(d(),A(ae,{key:1,class:"bggreysmokey radiusxxs fontStyle-dense"},{default:g(()=>{var y,ee,te;return[dt,gt,(ee=(y=n(o).phoneCode)==null?void 0:y.length)!=null&&ee?(d(),A(H,{key:0,class:"q-pa-md row q-gutter-sm column"},{default:g(()=>[t("div",mt,[N(t("select",{class:"boxStyle-md ccol-grow","onUpdate:modelValue":e[9]||(e[9]=f=>n(o).phoneCode=f),onChange:e[10]||(e[10]=f=>n(L)("phoneCode",n(o).phoneCode))},[(d(!0),b(Ce,null,ke(Object.values(n(De)),f=>(d(),b("option",{key:f},M(f),1))),128))],544),[[we,n(o).phoneCode]])]),t("div",yt,[t("div",ht,[ft,N(t("input",{class:"bgc-dl15 ccol-grow boxStyle-md radius-sm",type:"Number","onUpdate:modelValue":e[11]||(e[11]=f=>n(o).phone=f),label:"Phone Number",onChange:e[12]||(e[12]=f=>n(L)("phone",n(o).phone))},null,544),[[O,n(o).phone]])]),t("div",vt,[pt,N(t("input",{class:"bgc-dl15 ccol-grow boxStyle-md radius-sm",type:"password","onUpdate:modelValue":e[13]||(e[13]=f=>n(o).password=f),label:"Phone Number",onChange:e[14]||(e[14]=f=>n(L)("password",n(o).password))},null,544),[[O,n(o).password]])])]),n(m).phone?(d(),b("div",_t,M(n(m).phone),1)):k("",!0)]),_:1})):k("",!0),(te=n(m).phone)!=null&&te?(d(),b("div",bt)):k("",!0),v(H,{class:"q-py-xs"},{default:g(()=>[v(U,{caption:""},{default:g(()=>[E("Sale & Buy ")]),_:1})]),_:1}),t("div",xt,[v(r,{class:"boxStyle-md pointer radius-sm bgc-darkgrey font-smoke",onClick:e[15]||(e[15]=D(f=>I(),["prevent"]))},{default:g(()=>[St]),_:1}),v(r,{class:"boxStyle-sm pointer txtprimary",onClick:e[16]||(e[16]=f=>n(S).login="init")},{default:g(()=>[wt]),_:1})])]}),_:1})):n(S).login=="keyrequired"?(d(),b("div",kt,[Ct,Pt,(w=(u=n(o).phoneCode)==null?void 0:u.length)!=null&&w?(d(),b("div",Lt,[t("div",At,[Mt,N(t("input",{class:"bgc-dl15 ccol-grow boxStyle-md radius-sm font-smoke",type:"password","onUpdate:modelValue":e[17]||(e[17]=y=>n(o).enrollKey=y),label:"Phone Number",onChange:e[18]||(e[18]=y=>n(L)("enrollKey",n(o).enrollKey))},null,544),[[O,n(o).enrollKey]])]),n(m).phone?(d(),b("div",$t,M(n(m).phone),1)):k("",!0)])):k("",!0),(T=n(m).phone)!=null&&T?(d(),b("div",jt)):k("",!0),t("div",Tt,[t("button",{onClick:e[19]||(e[19]=D(y=>I(),["prevent"])),class:"boxStyle-sm bgc-dl45 radius-xs pointer"},Nt),t("button",{onClick:e[20]||(e[20]=y=>n(S).login="create"),class:"BBoxStyle-flat"},qt)])])):k("",!0)]),t("div",Et,[Ot,v(H,{class:"q-py-xs text-grey"},{default:g(()=>[v(U,{class:"text-grey",caption:""},{default:g(()=>[E("Contact us: +251 914424140 ")]),_:1})]),_:1})])]),Vt]}),_:1}))}}};export{Jt as default};
