import{d as fe,u as ke,Q as Se}from"./saleitModel.67bff41a.js";import{r as z,c as $,w as R,l as i,V as n,f as m,n as I,u as e,U as l,p as S,F as C,a2 as N,W as re,m as P,Q as de,X as u,b as B,bn as Ce,Z as we,ae as g,aO as x,aP as Ie,$ as w,a0 as F,a1 as ue,bz as Ne,aH as A,aG as ce}from"./index.21eddcd6.js";import{k as qe,l as Ve,m as $e}from"./crudThisModel.91aa02a2.js";import{Q as Fe}from"./QItemLabel.d96c0f54.js";import{d as Oe}from"./debugMixin.c3829f04.js";const Re={key:0},Be={key:1},Ue={class:"txtsmokey ps-relative cameraBox-size"},Qe={class:"onedlayout ccolumn"},je={key:0,class:"ps-absolute parent-fit onedlayout ccolumn cj-between"},De={key:0},ze={key:1,class:"ccol-grow onedlayout ccolumn cj-between"},Pe={class:"row",style:{"border-radius":"15px",height:"100px",overflow:"scroll"}},Ae={class:"fontStyle-dense onedlayout crow"},Me={key:0,class:"onedlayout crow ia-center"},Te=l("h4",{class:"txtlight"}," close",-1),Ee=[Te],Le=l("h4",{class:"txtlight"}," Save",-1),Ge=[Le],He=l("h4",null," Capure",-1),We=[He],Xe={size:"col-auto row"},Ze={key:1},Je={class:"txtsmokey"},Ke={key:2},Ye={class:"bgsmokey"},et=l("i",{class:"ri-upload-2-fill onedlayout crow ia-center txtlight"},null,-1),tt={class:"txtlight"},st={class:"ccol-grow boxStyle-dense ps-relative onedlayout crow ia-center cj-center"},lt=["src"],ot={key:1,class:"",style:{"min-height":"20vh"}},it={class:"boxStyle-dense p-sidesm ps-absolute parent-fit"},nt={class:"crow cj-end"},at={key:0,class:"",style:{}},rt={class:"column",style:{width:"100%",height:"100%","background-color":"transparent"}},dt=["onClick"],ut=l("div",{class:"col text-dark"},null,-1),ct={class:"onedlayout ccolumn cgap-1",style:{}},yt={class:"onedlayout ccolumn cgap-0 ia-center bgc-smoke"},mt=l("i",{class:"ri-folder-fill"},null,-1),gt=[mt],vt=l("h3",{class:"txtdark"},[l("i",{class:"ri-camera-fill"})],-1),pt=[vt],_t=l("i",{class:"ri-delete-bin-line"},null,-1),ht=[_t],xt={key:0,class:"boxStyle p-sidesm"},bt={class:"onedlayout crow cgap-3 cj-evenly"},ft={class:"onedlayout ccolumn cgap-2"},kt={class:"onedlayout ccolumn cgap-2"},St={class:"onedlayout ccolumn cgap-2"},Ct={class:"onedlayout ccolumn cgap-2"},wt={key:0},It={key:0,class:"text-red"},Nt={key:1},qt={key:1,class:"column text-dark bg-white fontbstyle"},Vt={class:"col fontastyle q-gutter-xs column",style:{"border-radius":"5px",border:"0px solid white"}},$t={class:"justify-end row"},Ft={class:"txtprimary"},Ot={key:0},Rt={class:"onedlayout crow cgap-3 cj-evenly"},Bt={class:"onedlayout ccolumn cgap-2"},Ut={class:"onedlayout ccolumn cgap-2"},Qt={class:"onedlayout ccolumn cgap-2"},jt={key:1},Dt={class:"column q-gutter-sm"},zt={key:0,class:"text-red"},Pt={key:1},At={key:0,class:"text-red"},Mt={key:1},Jt={__name:"thisCard",props:{_this:{type:Object,default:()=>({})},_pageSettings:{type:Object,default:()=>({})},__thisOps:{type:String,required:!0},__thisOpsStatus:{type:String},active_fileName:{type:String},thisSchemaFile_Rec:{type:String},thisSchemaPath_Rec:{type:String}},emits:["Create_this","Update_this","close"],setup(a,{emit:U}){var J,K,Y,ee;var{thisSchemaPath:Q,thisSchemaFile:v,_debugObj:c,_validateThis:d}=fe(),{_thisMedia:Tt,_fileAttributeName:j,hasCameraPermission:D,_cameraBox:p,_fileSourceFoCam:M,_fileAsSRC:b,_fileAsString:ye,_fileAsRaw:T,_liveFeedSRC:me,_fileAsSRCIndex:E,_cameraDevice:ge,_listCameraSource:L,_selectedCameraById:G,_selectedCameraByface:H,_liveFeedRawStreaming:W,_liveFeedRawStreamingStatus:X,_fileSourceFolder:ve,_fileAsSRCOps:_,_fileAsSRCOpsCall:pe,_resetFileSource:Et,get_liveFeedRaw:Lt}=ke();const y=a,Z=U;let q=z(null);Oe(y.thisSchemaPath_Rec,y.thisSchemaFile_Rec).then(r=>{r&&(q.value=r)});let f=z(!0);var o=$(()=>y._this);$(()=>y._this),ye=$(()=>(y._this[y.active_fileName],alert(y.active_fileName),""));var k=new ge;R(p,(r,t)=>!0);let _e=z(null);R(W,(r,t)=>(console.log("liveStream :  __  "+r),_e.value=r,!0)),R(D,(r,t)=>(console.log("cameraPermission"+r),!0)),Q=$(()=>y.thisSchemaPath_Rec),v=$(()=>y.thisSchemaFile_Rec),R(j,(r,t)=>(r&&(o.value[r]=T.value,typeof T.value=="object"?o.value.file_={files:r}:o.value.file_={file:r}),!0));let he=["Home & Living","Fashion & Apparel","Electronics & Gadgets"];y.__thisOps=="Create_this"&&(d("catagory",(J=o.value.catagory)!=null?J:""),d("price",(K=o.value.price)!=null?K:1),d("quantity",(Y=o.value.quantity)!=null?Y:1),d("currency",(ee=o.value.currency)!=null?ee:"ETB"));function xe(r){let t=Object.values(c.value).every(O=>O==null),V=j.value?b.value.length:o.value[y.active_fileName].length;if(console.log(V,t),!(t&&V))return!1;Z(r)}function be(){Z("close",!1)}return(r,t)=>{var V,O,te,se,le,oe,ie,ne,ae;return i(),n(C,null,[m(Ce,{modelValue:e(p),"onUpdate:modelValue":t[4]||(t[4]=s=>B(p)?p.value=s:p=s),class:"overlay-Glass rounded-borders z-top bg-black onedlayout crow",onClick:t[5]||(t[5]=s=>B(p)?p.value=!1:p=!1),style:{}},{default:I(()=>[e(M)=="folder"?(i(),n("div",Re)):e(M)=="camera"?(i(),n("div",Be,[l("div",Ue,[l("div",Qe,[l("video",{clas:"",id:"feedRaw",ref_key:"_liveFeedRawStreaming",ref:W,autoplay:"",playsinline:"",style:{"max-width":"100%"}},null,512),l("canvas",{id:"_liveFeedSRC",ref_key:"_liveFeedSRC",ref:me,style:{display:"none"}},null,512)]),e(D)==!0?(i(),n("div",je,[e(X)=="init"?(i(),n("div",De," Waiting .... ")):S("",!0),e(X)=="ok"?(i(),n("div",ze,[l("div",Pe,[(i(!0),n(C,null,N(e(b),s=>(i(),n("div",{key:s,style:{margin:"5px"}},[m(Se,{src:s,style:{width:"50px"}},null,8,["src"])]))),128))]),l("div",Ae,[e(b).length?(i(),n("div",Me,[l("button",{class:"boxStyle-xxs radiussm bgnegative",onClick:t[0]||(t[0]=s=>e(k)._stopCamera())},Ee),l("button",{class:"boxStyle-xxs radiussm bgposetive",onClick:t[1]||(t[1]=s=>e(k)._saveScreenShoots())},Ge),re(" | ")])):S("",!0),l("button",{class:"boxStyle-xxs radiussm bgsmokey",onClick:t[2]||(t[2]=s=>e(k)._screenShoot())},We),l("div",Xe,[e(L).length?(i(),P(Ve,{key:0,"switch-toggle-side":"","expand-separator":"",icon:"camera",size:"xs"},{default:I(()=>[(i(!0),n(C,null,N(e(L),s=>(i(),P(qe,{key:s,class:"row q-gutter-sm"},{default:I(()=>[m(de,{style:{height:"100%"},"no-caps":"",size:"sm",dense:!0,color:e(G)==s.deviceId?"blue":"black",label:s.label?s.label.split("_")[1]:"cam",onClick:h=>e(k)._setCameraParam(s.deviceId,!1)},null,8,["color","label","onClick"]),m(de,{style:{height:"100%"},"no-caps":"",size:"sm",dense:!0,color:e(G)==s.deviceId?"orange":"black",label:e(H)?"Front Cam":"Back Cam",onClick:h=>e(k)._setCameraParam(s.deviceId,!e(H))},null,8,["color","label","onClick"])]),_:2},1024))),128))]),_:1})):S("",!0)])])])):S("",!0)])):(i(),n("div",Ze,[l("h4",Je,u(e(D)),1),l("button",{onClick:t[3]||(t[3]=s=>e(k)._openCamera())}," Try Again.")]))])])):(i(),n("div",Ke," Error Accessing System, please allow on settting for Location and Media Devices "))]),_:1},8,["modelValue"]),l("div",{class:"fixed-topleft layer7 ts-box-fit bgdrop-deep ts-bg-backdrop-dense onedlayout crow cj-center ia-center",style:{display:"flex","flex-flow":"row wrap"},onClick:t[34]||(t[34]=s=>be())},[Object.keys(e(o)).length&&e(q)?(i(),n("div",{key:0,class:"box-size-flexv50auto bgsmokey ccolumn boxStyle-dense radiusxxs",onClick:t[33]||(t[33]=we(()=>{},["stop"]))},[l("div",Ye,[l("button",{class:g(["boxStyle-xxs fontStyle-dense",a.__thisOps=="Create_this"?"bgsystem":"bggrey"]),onClick:t[6]||(t[6]=s=>xe(a.__thisOps))},[et,l("h4",tt,u(e(x)[a.__thisOps+"_label"][Number((V=a._pageSettings.language)!=null?V:1)]),1)],2)]),m($e,{value:.8,color:"orange"}),l("div",st,[(O=e(o)[a.active_fileName])!=null&&O?(i(),n("img",{key:0,class:"",src:e(j)?e(b)[e(E)]:e(o)[a.active_fileName][e(E)],style:{"aspect-ratio":"2/1"}},null,8,lt)):(i(),n("div",ot," Image Required ")),l("div",it,[l("div",nt,[e(b)&&e(b).length>1?(i(),n("div",at,[l("div",rt,[(i(!0),n(C,null,N(e(b).length,s=>(i(),n("button",{style:{"border-radius":"0px","box-shadow":"none","background-color":"transparent",border:"0px"},onClick:h=>e(pe)(s-1),key:s},[l("input",{style:Ie(e(_)?"color:red":""),type:"radio"},null,4)],8,dt))),128))])])):S("",!0),ut,l("div",ct,[l("input",{type:"file",multiple:"",ref:"openFolder",style:{display:"none"},onChange:t[7]||(t[7]=s=>e(ve)(s,a.active_fileName))},null,544),l("div",yt,[l("button",{class:"boxStyle-xxs bgnull fontStyle-base font-darkgrey",style:{"min-width":"2vw"},onClick:t[8]||(t[8]=s=>r.$refs.openFolder.click())},gt),l("button",{class:"boxStyle-xxs bgnull",style:{"min-width":"2vw"},onClick:t[9]||(t[9]=s=>e(k)._openCamera("saleitgr"))},pt),l("button",{style:{"background-color":"transparent",border:"0px"},icon:"folder",onClick:t[10]||(t[10]=s=>B(_)?_.value=!e(_):_=!e(_)),class:g(e(_)?"txtnegative":"")},[l("h3",{class:g(["txtdark",e(_)?"txtnegative":""])},ht,2)],2)])])])])]),a.__thisOps=="Create_this"?(i(),n("div",xt,[l("div",bt,[l("div",ft,[l("h5",{class:g(e(c).quantity?"txtnegative":"txtprimary")},u(e(x).quantity[Number((te=a._pageSettings.language)!=null?te:1)]),3),w(l("input",{type:"Number",class:"iBoxStyle-dense radiusxxs","onUpdate:modelValue":t[11]||(t[11]=s=>e(o).quantity=s),onInput:t[12]||(t[12]=s=>e(d)("quantity",e(o).quantity))},null,544),[[F,e(o).quantity]])]),l("div",kt,[l("h5",{class:g(e(c).price?"txtnegative":"txtprimary")},u(e(x).price[Number((se=a._pageSettings.language)!=null?se:1)]),3),w(l("input",{type:"Number",class:"iBoxStyle-dense radiusxxs","onUpdate:modelValue":t[13]||(t[13]=s=>e(o).price=s),onInput:t[14]||(t[14]=s=>e(d)("price",e(o).price))},null,544),[[F,e(o).price]])]),l("div",St,[l("h5",{class:g(e(c).currency?"txtnegative":"txtprimary")},u(e(x).currency[Number((le=a._pageSettings.language)!=null?le:1)]),3),w(l("select",{class:"iBoxStyle-dense radiusxxs","onUpdate:modelValue":t[15]||(t[15]=s=>e(o).currency=s),onInput:t[16]||(t[16]=s=>e(d)("currency",e(o).currency))},[(i(!0),n(C,null,N(e(q).currency.enum,s=>(i(),n("option",{key:s},u(s),1))),128))],544),[[ue,e(o).currency]])])]),l("div",null,[l("div",Ct,[l("h5",{class:g(e(c).catagory?"txtnegative":"txtprimary")},u(e(x).catagory[Number((oe=a._pageSettings.language)!=null?oe:1)]),3),w(l("select",{type:"Number",class:"iBoxStyle-dense radiusxxs","onUpdate:modelValue":t[17]||(t[17]=s=>e(o).catagory=s),onInput:t[18]||(t[18]=s=>{var h;return e(d)("catagory",(h=e(o).catagory)!=null?h:"Others")})},[(i(!0),n(C,null,N(e(q).catagory.enum,s=>(i(),n("option",{key:s},u(s),1))),128))],544),[[ue,e(o).catagory]])])]),e(he).includes(e(o).catagory)?(i(),n("div",wt,[(i(!0),n(C,null,N(e(q).usage.enum,s=>(i(),P(Ne,{"keep-color":"","left-label":"",size:"md",modelValue:e(o).usage,"onUpdate:modelValue":t[19]||(t[19]=h=>e(o).usage=h),val:s,label:s,color:"black",key:s,onChange:t[20]||(t[20]=h=>e(d)("usage",e(o).usage))},null,8,["modelValue","val","label"]))),128)),e(c).usage?(i(),n("u",It," Used or New ? ")):(i(),n("u",Nt," Used or New ? "))])):S("",!0)])):(i(),n("div",qt,[l("fieldset",Vt,[l("div",$t,[l("button",{onClick:t[21]||(t[21]=s=>B(f)?f.value=!e(f):f=!e(f)),class:"boxStyle-xxs"},[l("h5",Ft,u(e(f)?"Next":"Back"),1)])]),m(A,{inset:""}),e(f)?(i(),n("div",Ot,[l("div",Rt,[l("div",Bt,[l("h5",{class:g(e(c).quantity?"txtnegative":"txtprimary")},u(e(x).quantity[Number((ie=a._pageSettings.language)!=null?ie:1)]),3),w(l("input",{type:"Number",class:"iBoxStyle-dense radiusxxs","onUpdate:modelValue":t[22]||(t[22]=s=>e(o).quantity=s),onInput:t[23]||(t[23]=s=>e(d)("quantity",e(o).quantity))},null,544),[[F,e(o).quantity]])]),l("div",Ut,[l("h5",{class:g(e(c).price?"txtnegative":"txtprimary")},u(e(x).price[Number((ne=a._pageSettings.language)!=null?ne:1)]),3),w(l("input",{type:"Number",class:"iBoxStyle-dense radiusxxs","onUpdate:modelValue":t[24]||(t[24]=s=>e(o).price=s),onInput:t[25]||(t[25]=s=>e(d)("price",e(o).price))},null,544),[[F,e(o).price]])]),l("div",Qt,[l("h5",{class:g(e(c).discount?"txtnegative":"txtprimary")},u(e(x).discount[Number((ae=a._pageSettings.language)!=null?ae:1)]),3),w(l("input",{type:"Number",class:"iBoxStyle-dense radiusxxs","onUpdate:modelValue":t[26]||(t[26]=s=>e(o).discount=s),onInput:t[27]||(t[27]=s=>e(d)("discount",e(o).discount)),onChange:t[28]||(t[28]=s=>e(d)("discount",e(o).discount)),style:{"max-width":"95%"}},null,544),[[F,e(o).discount]])])])])):(i(),n("div",jt,[l("div",Dt,[m(ce,{class:"col-md col-xs q-pa-sm",style:{},outlined:"",modelValue:e(o).header,"onUpdate:modelValue":t[29]||(t[29]=s=>e(o).header=s),label:"Header",onChange:t[30]||(t[30]=s=>e(d)("header",e(o).header))},{default:I(()=>[e(c).header?(i(),n("u",zt," Title ")):(i(),n("u",Pt," Title "))]),_:1},8,["modelValue"]),m(ce,{outlined:"",modelValue:e(o).content,"onUpdate:modelValue":t[31]||(t[31]=s=>e(o).content=s),onChange:t[32]||(t[32]=s=>e(d)("content",e(o).content)),label:"Content",style:{},filled:"",autogrow:""},{default:I(()=>[e(c).content?(i(),n("u",At," Description ")):(i(),n("u",Mt," Description "))]),_:1},8,["modelValue"])]),m(A,{inset:""}),m(Fe,{caption:""},{default:I(()=>[re(" Notes to be displayed !")]),_:1})])),m(A,{inset:""})])]))])):S("",!0)])],64)}}},Kt=()=>{let a={},U={activeItemID:null,activeUserID:null,userItemOwnership:!1,queryOperator:"or",otherQueries:{}};async function Q(v=U){return v.userItemOwnership||(a.userID=v.activeUserID),a.saleitID=v.activeItemID,a=Object.assign(a,v.otherQueries),a.queryOperator="-"+v.queryOperator,a=Object.assign(a,v.otherQueries),a}return{queryBuilder_foreign:Q}};export{Jt as _,Kt as u};
