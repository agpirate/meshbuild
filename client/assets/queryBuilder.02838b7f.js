import{r as oe,c as q,w as ie,l as i,X as n,f as u,n as C,W as s,u as e,Q as U,F as x,bd as w,m as j,p as O,b as D,aP as he,$ as fe,bi as g,Y as m,bm as f,bo as be,a1 as S,a2 as V,bk as ne,bC as xe,bf as z,be as ae,Z as Se}from"./index.479a4e77.js";import{a as ke,u as Ce,Q as we}from"./saleitModel.e0c41a15.js";import{d as Be,Q as Ie}from"./QSelect.342be206.js";import{k as Ne,l as qe}from"./crudThisModel.1d95f7c1.js";import{d as Ve}from"./debugMixin.5367f11c.js";const $e={class:"column"},Oe={key:0},Re={key:1},Fe={key:0},Qe={class:"col row fit"},Ue={class:"row",style:{"border-radius":"15px",height:"100px",overflow:"scroll"}},je={class:"fontStyle-dense onedlayout crow"},De={class:"onedlayout crow ia-center"},ze=s("h4",null," close",-1),Ae=[ze],Pe=s("h4",null," Save",-1),Me=[Pe],Te=s("h4",null," Capure",-1),Ee=[Te],Le={size:"col-auto row"},Ge={key:1,class:"col column fit"},He={key:2},We={class:"bgsmokey"},Xe=s("i",{class:"ri-upload-2-fill onedlayout crow ia-center txtlight"},null,-1),Ye={class:"txtlight"},Ze={class:"boxStyle-dense ps-relative onedlayout crow ia-center cj-center",style:{width:"(15vw,35vw)","min-height":"15vh"}},Je=["src"],Ke={key:1,class:""},et={class:"boxStyle-dense p-sidesm ps-absolute parent-fit"},tt={class:"row justify-end q-my-sm",style:{"min-width":"100%"}},st={key:0,class:"justify-left col-auto",style:{}},lt={class:"column",style:{width:"100%",height:"100%","background-color":"transparent"}},ot=["onClick"],it=s("div",{class:"col text-dark"},null,-1),nt={class:"onedlayout ccolumn cgap-3",style:{}},at={class:"onedlayout ccolumn ia-center"},rt=s("h3",{class:"txtgrey"},[s("i",{class:"ri-folder-fill"})],-1),dt=[rt],ut=s("h3",{class:"txtdark"},[s("i",{class:"ri-camera-fill"})],-1),ct=[ut],yt=s("i",{class:"ri-delete-bin-line"},null,-1),mt=[yt],gt=s("div",{class:"col row justify-between q-py-sm"},null,-1),pt={key:0,class:"boxStyle p-sidesm"},vt={class:"onedlayout crow cgap-3 cj-evenly"},_t={class:"onedlayout ccolumn cgap-2"},ht={class:"onedlayout ccolumn cgap-2"},ft={class:"onedlayout ccolumn cgap-2"},bt={class:"onedlayout ccolumn cgap-2"},xt={key:0},St={key:0,class:"text-red"},kt={key:1},Ct={key:1,class:"column text-dark bg-white fontbstyle"},wt={class:"col fontastyle q-gutter-xs column",style:{"border-radius":"5px",border:"0px solid white"}},Bt={class:"justify-end row"},It={class:"txtprimary"},Nt={key:0},qt={class:"onedlayout crow cgap-3 cj-evenly"},Vt={class:"onedlayout ccolumn cgap-2"},$t={class:"onedlayout ccolumn cgap-2"},Ot={class:"onedlayout ccolumn cgap-2"},Rt={key:1},Ft={class:"column q-gutter-sm"},Qt={key:0,class:"text-red"},Ut={key:1},jt={key:0,class:"text-red"},Dt={key:1},Gt={__name:"thisCard",props:{_this:{type:Object,default:()=>({})},_pageSettings:{type:Object,default:()=>({})},__thisOps:{type:String,required:!0},__thisOpsStatus:{type:String},active_fileName:{type:String},thisSchemaFile_Rec:{type:String},thisSchemaPath_Rec:{type:String}},emits:["Create_this","Update_this","close"],setup(a,{emit:R}){var H,W,X,Y;var{thisSchemaPath:F,thisSchemaFile:p,_debugObj:c,_validateThis:r}=ke(),{_thisMedia:zt,_fileAttributeName:Q,_cameraBox:B,_fileSourceFoCam:A,_fileAsSRC:k,_fileAsString:re,_fileAsRaw:P,_liveFeedSRC:de,_fileAsSRCIndex:M,_cameraDevice:ue,_listCameraSource:T,_selectedCameraById:E,_selectedCameraByface:L,_liveFeedRawStreaming:ce,_fileSourceFolder:ye,_fileAsSRCOps:v,_fileAsSRCOpsCall:me,_resetFileSource:At,get_liveFeedRaw:ge}=Ce();const y=a,G=R;let I=oe(null);Ve(y.thisSchemaPath_Rec,y.thisSchemaFile_Rec).then(d=>{d&&(I.value=d)});let b=oe(!0);var o=q(()=>y._this);q(()=>y._this),re=q(()=>(y._this[y.active_fileName],alert(y.active_fileName),""));var _=new ue;ie(B,(d,t)=>(d!=null&&d||_._saveScreenShoots(),!0)),F=q(()=>y.thisSchemaPath_Rec),p=q(()=>y.thisSchemaFile_Rec),ie(Q,(d,t)=>(d&&(o.value[d]=P.value,typeof P.value=="object"?o.value.file_={files:d}:o.value.file_={file:d}),!0));let pe=["Home & Living","Fashion & Apparel","Electronics & Gadgets"];y.__thisOps=="Create_this"&&(r("catagory",(H=o.value.catagory)!=null?H:""),r("price",(W=o.value.price)!=null?W:1),r("quantity",(X=o.value.quantity)!=null?X:1),r("currency",(Y=o.value.currency)!=null?Y:"ETB"));function ve(d){let t=Object.values(c.value).every($=>$==null),N=Q.value?k.value.length:o.value[y.active_fileName].length;if(console.log(N,t),!(t&&N))return!1;G(d)}function _e(){G("close",!1)}return(d,t)=>{var N,$,Z,J,K,ee,te,se,le;return i(),n(x,null,[u(he,{modelValue:e(B),"onUpdate:modelValue":t[4]||(t[4]=l=>D(B)?B.value=l:B=l),class:"column overlay-Glass rounded-borders z-top bg-black",style:{}},{default:C(()=>[s("div",$e,[e(A)=="folder"?(i(),n("div",Oe)):e(A)=="camera"?(i(),n("div",Re,[e(ge)?(i(),n("div",Fe,[s("div",Qe,[u(U,{rounded:"",color:"primary",size:"sm",label:"capture",icon:"camera",onClick:t[0]||(t[0]=l=>e(_)._screenShoot()),style:{position:"relative",bottom:"-10px",left:"40%"}}),s("video",{clas:"col-2",ref_key:"_liveFeedRawStreaming",ref:ce,autoplay:"",playsinline:"",style:{width:"100%"}},null,512),s("canvas",{id:"_liveFeedSRC",ref_key:"_liveFeedSRC",ref:de,style:{display:"none"}},null,512),s("div",Ue,[(i(!0),n(x,null,w(e(k),l=>(i(),n("div",{key:l,style:{margin:"5px"}},[u(we,{src:l,style:{width:"80px",height:"80px"}},null,8,["src"])]))),128))])]),s("div",je,[s("div",De,[s("button",{class:"BBoxStyle-dense radiussm bgnegative",onClick:t[1]||(t[1]=l=>e(_)._stopCamera())},Ae),s("button",{class:"BBoxStyle-dense radiussm bgposetive",onClick:t[2]||(t[2]=l=>e(_)._saveScreenShoots())},Me),s("button",{class:"BBoxStyle-dense radiussm bgsmokey",onClick:t[3]||(t[3]=l=>e(_)._screenShoot())},Ee)]),s("div",Le,[e(T).length?(i(),j(Ne,{key:0,"switch-toggle-side":"","expand-separator":"",icon:"camera",size:"xs"},{default:C(()=>[(i(!0),n(x,null,w(e(T),l=>(i(),j(Be,{key:l,class:"row q-gutter-sm"},{default:C(()=>[u(U,{style:{height:"100%"},"no-caps":"",size:"sm",dense:!0,color:e(E)==l.deviceId?"blue":"black",label:l.label?l.label.split("_")[1]:"cam",onClick:h=>e(_)._setCameraParam(l.deviceId,!1)},null,8,["color","label","onClick"]),u(U,{style:{height:"100%"},"no-caps":"",size:"sm",dense:!0,color:e(E)==l.deviceId?"orange":"black",label:e(L)?"Front Cam":"Back Cam",onClick:h=>e(_)._setCameraParam(l.deviceId,!e(L))},null,8,["color","label","onClick"])]),_:2},1024))),128))]),_:1})):O("",!0)])])])):(i(),n("div",Ge," Check Camera Access & Retry "))])):(i(),n("div",He," Error Accessing System, please allow on settting for Location and Media Devices "))])]),_:1},8,["modelValue"]),s("div",{class:"fixed-topleft layer7 ts-box-fit bg-red ts-bg-backdrop-dense onedlayout crow cj-center ia-center",style:{display:"flex","flex-flow":"row wrap"},onClick:t[33]||(t[33]=l=>_e())},[Object.keys(e(o)).length&&e(I)?(i(),n("div",{key:0,class:"thisCard-size bgsmokey onedlayout ccolumn boxStyle-dense radiusxxs",onClick:t[32]||(t[32]=fe(()=>{},["stop"]))},[s("div",We,[s("button",{class:g(["BBoxStyle-dense fontStyle-dense",a.__thisOps=="Create_this"?"bgsystem":"bggrey"]),onClick:t[5]||(t[5]=l=>ve(a.__thisOps))},[Xe,s("h4",Ye,m(e(f)[a.__thisOps+"_label"][Number((N=a._pageSettings.language)!=null?N:1)]),1)],2)]),u(qe,{value:.8,color:"orange"}),s("div",Ze,[($=e(o)[a.active_fileName])!=null&&$?(i(),n("img",{key:0,class:"",src:e(Q)?e(k)[e(M)]:e(o)[a.active_fileName][e(M)],style:{"aspect-ratio":"2/1","max-width":"100%"}},null,8,Je)):(i(),n("div",Ke," Image Required ")),s("div",et,[s("div",tt,[e(k)&&e(k).length>1?(i(),n("div",st,[s("div",lt,[(i(!0),n(x,null,w(e(k).length,l=>(i(),n("button",{style:{"border-radius":"0px","box-shadow":"none","background-color":"transparent",border:"0px"},onClick:h=>e(me)(l-1),key:l},[s("input",{style:be(e(v)?"color:red":""),type:"radio"},null,4)],8,ot))),128))])])):O("",!0),it,s("div",nt,[s("input",{type:"file",multiple:"",ref:"openFolder",style:{display:"none"},onChange:t[6]||(t[6]=l=>e(ye)(l,a.active_fileName))},null,544),s("div",at,[s("button",{class:"BBoxStyle-dense bgnull fontStyle",style:{"min-width":"2vw"},onClick:t[7]||(t[7]=l=>d.$refs.openFolder.click())},dt),s("button",{class:"BBoxStyle-dense bgnull fontStyle",style:{"min-width":"2vw"},onClick:t[8]||(t[8]=l=>e(_)._openCamera("saleitgr"))},ct),s("button",{style:{"background-color":"transparent",border:"0px"},icon:"folder",onClick:t[9]||(t[9]=l=>D(v)?v.value=!e(v):v=!e(v)),class:g(e(v)?"txtnegative":"")},[s("h3",{class:g(["txtdark",e(v)?"txtnegative":""])},mt,2)],2)])])]),gt])]),a.__thisOps=="Create_this"?(i(),n("div",pt,[s("div",vt,[s("div",_t,[s("h5",{class:g(e(c).quantity?"txtnegative":"txtprimary")},m(e(f).quantity[Number((Z=a._pageSettings.language)!=null?Z:1)]),3),S(s("input",{type:"Number",class:"iBoxStyle-dense radiusxxs","onUpdate:modelValue":t[10]||(t[10]=l=>e(o).quantity=l),onInput:t[11]||(t[11]=l=>e(r)("quantity",e(o).quantity))},null,544),[[V,e(o).quantity]])]),s("div",ht,[s("h5",{class:g(e(c).price?"txtnegative":"txtprimary")},m(e(f).price[Number((J=a._pageSettings.language)!=null?J:1)]),3),S(s("input",{type:"Number",class:"iBoxStyle-dense radiusxxs","onUpdate:modelValue":t[12]||(t[12]=l=>e(o).price=l),onInput:t[13]||(t[13]=l=>e(r)("price",e(o).price))},null,544),[[V,e(o).price]])]),s("div",ft,[s("h5",{class:g(e(c).currency?"txtnegative":"txtprimary")},m(e(f).currency[Number((K=a._pageSettings.language)!=null?K:1)]),3),S(s("select",{class:"iBoxStyle-dense radiusxxs","onUpdate:modelValue":t[14]||(t[14]=l=>e(o).currency=l),onInput:t[15]||(t[15]=l=>e(r)("currency",e(o).currency))},[(i(!0),n(x,null,w(e(I).currency.enum,l=>(i(),n("option",{key:l},m(l),1))),128))],544),[[ne,e(o).currency]])])]),s("div",null,[s("div",bt,[s("h5",{class:g(e(c).catagory?"txtnegative":"txtprimary")},m(e(f).catagory[Number((ee=a._pageSettings.language)!=null?ee:1)]),3),S(s("select",{type:"Number",class:"iBoxStyle-dense radiusxxs","onUpdate:modelValue":t[16]||(t[16]=l=>e(o).catagory=l),onInput:t[17]||(t[17]=l=>{var h;return e(r)("catagory",(h=e(o).catagory)!=null?h:"Others")})},[(i(!0),n(x,null,w(e(I).catagory.enum,l=>(i(),n("option",{key:l},m(l),1))),128))],544),[[ne,e(o).catagory]])])]),e(pe).includes(e(o).catagory)?(i(),n("div",xt,[(i(!0),n(x,null,w(e(I).usage.enum,l=>(i(),j(xe,{"keep-color":"","left-label":"",size:"md",modelValue:e(o).usage,"onUpdate:modelValue":t[18]||(t[18]=h=>e(o).usage=h),val:l,label:l,color:"black",key:l,onChange:t[19]||(t[19]=h=>e(r)("usage",e(o).usage))},null,8,["modelValue","val","label"]))),128)),e(c).usage?(i(),n("u",St," Used or New ? ")):(i(),n("u",kt," Used or New ? "))])):O("",!0)])):(i(),n("div",Ct,[s("fieldset",wt,[s("div",Bt,[s("button",{onClick:t[20]||(t[20]=l=>D(b)?b.value=!e(b):b=!e(b)),class:"BBoxStyle-dense"},[s("h5",It,m(e(b)?"Next":"Back"),1)])]),u(z,{inset:""}),e(b)?(i(),n("div",Nt,[s("div",qt,[s("div",Vt,[s("h5",{class:g(e(c).quantity?"txtnegative":"txtprimary")},m(e(f).quantity[Number((te=a._pageSettings.language)!=null?te:1)]),3),S(s("input",{type:"Number",class:"iBoxStyle-dense radiusxxs","onUpdate:modelValue":t[21]||(t[21]=l=>e(o).quantity=l),onInput:t[22]||(t[22]=l=>e(r)("quantity",e(o).quantity))},null,544),[[V,e(o).quantity]])]),s("div",$t,[s("h5",{class:g(e(c).price?"txtnegative":"txtprimary")},m(e(f).price[Number((se=a._pageSettings.language)!=null?se:1)]),3),S(s("input",{type:"Number",class:"iBoxStyle-dense radiusxxs","onUpdate:modelValue":t[23]||(t[23]=l=>e(o).price=l),onInput:t[24]||(t[24]=l=>e(r)("price",e(o).price))},null,544),[[V,e(o).price]])]),s("div",Ot,[s("h5",{class:g(e(c).discount?"txtnegative":"txtprimary")},m(e(f).discount[Number((le=a._pageSettings.language)!=null?le:1)]),3),S(s("input",{type:"Number",class:"iBoxStyle-dense radiusxxs","onUpdate:modelValue":t[25]||(t[25]=l=>e(o).discount=l),onInput:t[26]||(t[26]=l=>e(r)("discount",e(o).discount)),onChange:t[27]||(t[27]=l=>e(r)("discount",e(o).discount)),style:{"max-width":"95%"}},null,544),[[V,e(o).discount]])])])])):(i(),n("div",Rt,[s("div",Ft,[u(ae,{class:"col-md col-xs q-pa-sm",style:{},outlined:"",modelValue:e(o).header,"onUpdate:modelValue":t[28]||(t[28]=l=>e(o).header=l),label:"Header",onChange:t[29]||(t[29]=l=>e(r)("header",e(o).header))},{default:C(()=>[e(c).header?(i(),n("u",Qt," Title ")):(i(),n("u",Ut," Title "))]),_:1},8,["modelValue"]),u(ae,{outlined:"",modelValue:e(o).content,"onUpdate:modelValue":t[30]||(t[30]=l=>e(o).content=l),onChange:t[31]||(t[31]=l=>e(r)("content",e(o).content)),label:"Content",style:{},filled:"",autogrow:""},{default:C(()=>[e(c).content?(i(),n("u",jt," Description ")):(i(),n("u",Dt," Description "))]),_:1},8,["modelValue"])]),u(z,{inset:""}),u(Ie,{caption:""},{default:C(()=>[Se(" Notes to be displayed !")]),_:1})])),u(z,{inset:""})])]))])):O("",!0)])],64)}}},Ht=()=>{let a={},R={activeItemID:null,activeUserID:null,userItemOwnership:!1,queryOperator:"or",otherQueries:{}};async function F(p=R){return p.userItemOwnership||(a.userID=p.activeUserID),a.saleitID=p.activeItemID,a=Object.assign(a,p.otherQueries),a.queryOperator="-"+p.queryOperator,a=Object.assign(a,p.otherQueries),a}return{queryBuilder_foreign:F}};export{Gt as _,Ht as u};
