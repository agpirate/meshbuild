import{h as y,q as pe,O as ge,P as me,R as fe,r as L,w as J,o as ve,S as ye,u as t,l as c,m as v,n as a,U as B,V as he,W as s,f as l,X as d,Q as M,Y as A,Z as q,p as w,_ as I,$ as O,a0 as E,a1 as k,a2 as D,a3 as V,a4 as G}from"./index.bf8cd5e7.js";import{d as we,Q as _}from"./moduleLoader.eb95d7fa.js";import{Q as R}from"./QPage.a269c6fc.js";import{Q as W}from"./QSelect.d5caaae3.js";import{u as be,a as Ce,s as _e}from"./debugMixin.7255e004.js";import{_ as xe,g as ke,a as Se,b as Pe,c as X}from"./geolocMixin.db8818ff.js";import{a as Le}from"./authenticatingStore.628a13b7.js";import{p as Me}from"./profileStore.00152be4.js";import{u as qe}from"./use-quasar.a333e99e.js";import{_ as U}from"./storeService.3eb6e8a7.js";import{u as Ae}from"./profileschemaValidator.ee5ec1e8.js";import"./axios.05cf8750.js";const Ne=[y("g",{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)","stroke-width":"2"},[y("circle",{cx:"22",cy:"22",r:"6"},[y("animate",{attributeName:"r",begin:"1.5s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),y("animate",{attributeName:"stroke-opacity",begin:"1.5s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),y("animate",{attributeName:"stroke-width",begin:"1.5s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),y("circle",{cx:"22",cy:"22",r:"6"},[y("animate",{attributeName:"r",begin:"3s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),y("animate",{attributeName:"stroke-opacity",begin:"3s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),y("animate",{attributeName:"stroke-width",begin:"3s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),y("circle",{cx:"22",cy:"22",r:"8"},[y("animate",{attributeName:"r",begin:"0s",dur:"1.5s",values:"6;1;2;3;4;5;6",calcMode:"linear",repeatCount:"indefinite"})])])];var De=pe({name:"QSpinnerRings",props:ge,setup(F){const{cSize:$,classes:T}=me(F);return()=>y("svg",{class:T.value,stroke:"currentColor",width:$.value,height:$.value,viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"},Ne)}});const Te={class:"boxastyle text-orange bg-orange"},Ie=s("p",{class:"text-white"},"Allow Location Access.",-1),Oe=s("hr",null,null,-1),$e=s("div",{class:"text-orange boxcstyle",style:{margin:"5px",padding:"15px","max-width":"80vw"}},[s("p",null,"Would you like to :"),s("br"),s("br"),s("ul",null,[s("li",null,"Get product before any one"),s("li",null,"Get product near you")]),s("p",{class:"fontastyle"}," then, we need locations acccess to provide you with best exprience. ")],-1),je={class:"justify-end row"},Qe={key:1},Be=s("p",{class:"text-grey q-pa-sm",style:{position:"fixed",bottom:"5px",left:"5px"}}," Provided by mesh ",-1),Ee={class:"col flex flex-center column q-gutter-md"},Ve={class:"row justify-evenly items-center"},Ge={key:0,class:"warnMessage"},Ue={key:1},Ke={class:"column justify-evenly items-center fontastyle"},Re={key:0,class:"warnMessage"},Fe={key:1},Ze={class:"column justify-evenly items-center"},ze={key:0,class:"warnMessage"},He={key:1},Je={class:"col-auto q-pa-none row q-gutter-xs fontastyle text-grey justify-end"},We=s("p",{class:"text-grey q-pa-sm"},"Provided by mesh",-1),wt={__name:"signPage",setup(F){const{askForGPS:$,_thislocation:T,gpsStatus:S,allowGPS:Z,_initGeo:Y,getCurrentPosition:Xe}=xe(),{_debugObj:b,_validateThis:N}=Ae(),{Loadingpage:z,Loadingevent:j,Loading:Ye,DoneMessage:et,KnowthisMessage:tt,WarnthisMessage:nt,timerLoadevent:p,timerDone:ot,timerInformthis:at,timerError:lt}=be(),ee=Le(),te=Me();Ce({title:"itService signing",titleTemplate:o=>`${o} - LoginPage`,script:{printJs:{type:"application/ld+json",innerHTML:"{  }"},ldJson:{type:"application/ld+json",innerHTML:"{ }"}}}),qe();const ne=fe();var n=L({});async function oe(){n.value={};try{n.value.phone=null,n.value.phoneCode=["",""],n.value.geolocation={},n.value.geolocation={lat:"",long:""},n.value.location={},n.value.location={country:"",city:"",street:""}}catch{}return!0}let C=L({login:"init",create:!1}),ae=L("Continue"),le="phone";const se=te,ie={createData:async function(){let o={};return n.value[le]==null?!1:await se.createData(n.value,o).then(e=>{var g;return(g=e.status)!=null&&g?e.data:!1}).catch(()=>!1)}};async function Q(){return Object.values(b.value).every(e=>e==null)&&re(),!0}L(0);var re=async function(){return console.log(`

Function - _manageStoreLogin --STORE Authentication Initializing [Phone,Stored_ID]---- 
`),await ee.useLogin(n.value).then(async o=>{var g,m,h,i,r,f,u;var e=(g=o.data)!=null?g:!1;return console.log(`
 LoginStatus = ${o.status} 
`),console.log(o.data,(m=j.continueform)!=null?m:!1),!((h=o.status)!=null&&h)||!e?!((i=n.value.phone)!=null&&i)||C.value.login=="init"?(await p({loginform:0},0,"Create New Account"),!0):(console.log(n.value,"ceating new"),C.value.login="create",await p({loginform:0},0,"Creating New Account !"),ie.createData().then(async x=>x&&Object.keys(x).length?(C.value.login="init",console.log(`

</Function - _manageStoreLogin -- New Profile Created -- 
`),ae.value="Log to Continue",p({loginform:0},0,"Account Created ! Login to continue.")):(n.value.phone=null,await p({loginform:0},0,"Phone Number Error !"))).catch(x=>p({main:0},0,"Try Refreshing, please ?"+x))):(r=e.enrollKey)!=null&&r&&e.enrollKey!=((f=n.value.enrollKey)!=null?f:!1)?(await p({main:5e3},0,"Use Correct key!"),C.value.login="keyrequired",!0):(n.value=Object.assign({},e),console.log(`
 User Acctype = ${n.value.acctype} 
`),(u=n.value.acctype)!=null&&u?(await p({main:0},0,"...."),await de("Home","Home","saleit"),p({loginform:0},0,"Routing Error. Check Connection Please ;")):(await p({main:5e3},0,"Access Error, Retrying.."),!1))}).catch(async o=>(console.log(`

</Function - _manageStoreLogin - 
`+o),await p({main:0},0,"Error Connecting.."+o)))};L(!1),L(null);let K=L([]),P=L(null);J(S,(o,e)=>((o=="finish"||o==null)&&ue(),!0)),J(T,(o,e)=>{var g,m;return o&&(n.value.geolocation=o,H("lat",B((g=o.lat)!=null?g:null)),H("long",B((m=o.long)!=null?m:null))),!0});async function ue(){var o,e,g,m,h,i,r,f,u;if(console.log("Setting Locations =<> GPS = ",Object.values((o=n.value.geolocation)!=null?o:{})," && timeZone = ",P.value),!P.value)return!1;if((g=(e=T.value)==null?void 0:e.lat)!=null&&g)n.value.geolocation=T.value;else{let x=((m=P.value.loc)!=null?m:"").split(",");console.error(x,"GPS ACESS IS BLOCKED, timeZone API OPtions ...."),x[1]&&(n.value.geolocation={lat:x[0],long:x[1]})}return n.value.phoneCode=K.value,n.value.location.country=(h=P.value.country)!=null?h:"",n.value.location.city=(i=P.value.city)!=null?i:"",n.value.location.street=(r=P.value.city)!=null?r:"",n.value.location.provinance=(f=P.value.region)!=null?f:"",n.value.currency=(u=K.value[2])!=null?u:U._get("currency","ETB"),console.log("Final =<> GPS = ",n.value.geolocation," && Locations = ",n.value.location),S.value==null||(S.value=null),!0}async function ce(){return console.log("Initiating the API or TimeZone Locations System"),S.value="Checking.... Connection.",K.value=await ke(),P.value=await Se(),S.value=await Pe(),new Promise(o=>{setTimeout(()=>{console.log("Terminating the API or TimeZone Locations System, && INIT GeoData Mining using GPS or TimeZone GeoData !!! !"),Y(),o(!0)},2e3)})}async function H(o,e){return e&&U._set(o,B(e)),!0}p({main:0},0,"..."),ve(async()=>(console.log(`

<0 ---------Mining Client DATA ---- 
`),await p({main:0},0,"mesh "),await ce().then(async o=>(console.log(`

<0 ---------Automatic Authentications Initiated---- 
`),await Q(),console.log(`

</0---------Automatic Authentications Terminated--- 
`),!0)).catch(async o=>await p({main:0},0,"Error Connecting.. "+o)))),ye(async()=>{console.log(`

<---------Defaulting Profile <--this--> ---- 
`),console.log(`

---------Mining User Device Informations [Phones, GeoLocations]---- 
`)}),oe();let de=async(o=null,e=null,g=!0)=>{var m,h,i;if(!o||!((m=n.value.acctype)!=null&&m))return!1;if(he[o]._auth&&!((h=n.value.enrolled)!=null&&h))return _thisOps.value="createPermission",!1;await p({main:0},0,"Loading "+o);try{let r=Object.assign({acctype:(i=n.value.acctype[g])!=null?i:""},U._reroute(o,e,_e.value=="Small"));return U._set("path",B(e)),await ne.push(r),p({main:1},1,"Ok, Loading "+o),!0}catch(r){return console.log(`

</Routing Functions of pathName = ${o}  == >> ${r} == >>  
`),p({main:3e3},3e3,r),!1}};return(o,e)=>{var g,m,h;return((g=t(j).main)!=null?g:!1)||t(S)?(c(),v(R,{key:0,class:"column flex flex-center bg-orange rounded-borders q-py-sm"},{default:a(()=>{var i;return[t(S)=="permiting_gpsservice"?(c(),v(we,{key:0,isOpen:t($),onEmitClick0:e[1]||(e[1]=r=>t(Z)(r))},{default:a(()=>[s("div",Te,[Ie,Oe,$e,s("div",je,[l(M,{flat:"",color:"green",onClick:e[0]||(e[0]=r=>t(Z)(!0))},{default:a(()=>[d(" Allow ")]),_:1})])])]),_:1},8,["isOpen"])):(c(),A("div",Qe,q(t(S)=="timezone"?"Connection Error":"loading ..."),1)),s("div",null,[l(De,{style:{color:"lightyellow"},size:"10em"})]),(i=t(j).main)!=null&&i?(c(),v(_,{key:2,style:{color:"lightyellow"},class:"fontdstyle"},{default:a(()=>{var r;return[d(q((r=t(z).content)!=null?r:"..."),1)]}),_:1})):w("",!0),Be]}),_:1})):(h=(m=t(j))==null?void 0:m.continueform)!=null&&h?(c(),v(R,{key:1,class:"flex flex-center"},{default:a(()=>[l(E,{class:"col-auto boxbstyle"},{default:a(()=>[l(I,{class:"text-dark"},{default:a(()=>{var i;return[d(q((i=t(z).content)!=null?i:"..."),1)]}),_:1}),l(I,{class:"text-dark"},{default:a(()=>[l(M,{flat:"",color:"red",label:"Cancel",onClick:e[2]||(e[2]=O(i=>t(n).phone=null,["prevent"]))}),l(M,{flat:"",label:"Continue...",onClick:e[3]||(e[3]=O(i=>t(p)({loginform:0},0,""),["prevent"]))})]),_:1})]),_:1})]),_:1})):(c(),v(R,{key:2,persistent:"",class:"bg-white rounded-borders column"},{default:a(()=>[s("div",Ee,[t(C).login=="init"?(c(),v(E,{key:0,style:{"min-width":"20%","max-width":"80vw"},flat:""},{default:a(()=>{var i,r,f;return[l(k,{class:"q-pa-sm q-gutter-sm"},{default:a(()=>[l(_,{class:"text-weight-bold text-orange text-h5"},{default:a(()=>[d("Continue to mesh")]),_:1}),l(_,{caption:""},{default:a(()=>[d("For Trader & Buyer")]),_:1})]),_:1}),(r=(i=t(n).phoneCode)==null?void 0:i.length)!=null&&r?(c(),v(k,{key:0,class:"q-pa-md row q-gutter-sm column"},{default:a(()=>[l(W,{round:"",outline:"",color:"orange","bottom-slots":"",filled:"",modelValue:t(n).phoneCode,"onUpdate:modelValue":e[4]||(e[4]=u=>t(n).phoneCode=u),options:Object.values(t(X)),input:t(N)("phoneCode",t(n).phoneCode),label:"Country",dense:!0,class:"col"},{prepend:a(()=>[l(D,{name:"place"})]),_:1},8,["modelValue","options","input"]),s("div",Ve,[l(D,{name:"phone"}),d("+"+q(t(n).phoneCode[1])+" ",1),V(s("input",{class:"boxcstyle",type:"Number","onUpdate:modelValue":e[5]||(e[5]=u=>t(n).phone=u),label:"Phone Number",onInput:e[6]||(e[6]=u=>t(N)("phone",t(n).phone))},null,544),[[G,t(n).phone]])]),t(b).phone?(c(),A("div",Ge,q(t(b).phone),1)):w("",!0)]),_:1})):w("",!0),(f=t(b).phone)!=null&&f?(c(),A("div",Ue)):w("",!0),l(k,{class:"q-py-xs"},{default:a(()=>[l(_,{caption:""},{default:a(()=>[d("Sale & Buy ")]),_:1})]),_:1}),l(I,{class:"text-dark bg-orange",onClick:e[7]||(e[7]=O(u=>Q(),["prevent"]))},{default:a(()=>[l(M,{class:"fontastyle",flat:"",label:"Continue"})]),_:1})]}),_:1})):t(C).login=="create"?(c(),v(E,{key:1,style:{"min-width":"20%","max-width":"80vw"},flat:""},{default:a(()=>{var i,r,f;return[l(k,{class:"q-pa-sm q-gutter-sm"},{default:a(()=>[l(_,{class:"text-weight-bold text-orange text-h5"},{default:a(()=>[d("Joining mesh")]),_:1}),l(_,{caption:""},{default:a(()=>[d("For Trader & Buyer")]),_:1})]),_:1}),(r=(i=t(n).phoneCode)==null?void 0:i.length)!=null&&r?(c(),v(k,{key:0,class:"q-pa-md row q-gutter-sm column"},{default:a(()=>[l(W,{round:"",outline:"",color:"orange","bottom-slots":"",filled:"",modelValue:t(n).phoneCode,"onUpdate:modelValue":e[8]||(e[8]=u=>t(n).phoneCode=u),options:Object.values(t(X)),input:t(N)("phoneCode",t(n).phoneCode),label:"Country",dense:!0,class:"col"},{prepend:a(()=>[l(D,{name:"place"})]),_:1},8,["modelValue","options","input"]),s("div",Ke,[s("div",null,[l(D,{name:"phone"}),d(),s("label",null," +"+q(t(n).phoneCode[1]),1),V(s("input",{class:"boxcstyle",type:"Number","onUpdate:modelValue":e[9]||(e[9]=u=>t(n).phone=u),label:"Phone Number",onInput:e[10]||(e[10]=u=>t(N)("phone",t(n).phone))},null,544),[[G,t(n).phone]])]),s("div",null,[l(D,{name:"password"}),d(" password "),V(s("input",{class:"boxcstyle",type:"password","onUpdate:modelValue":e[11]||(e[11]=u=>t(n).password=u),label:"Phone Number",onInput:e[12]||(e[12]=u=>t(N)("password",t(n).password))},null,544),[[G,t(n).password]])])]),t(b).phone?(c(),A("div",Re,q(t(b).phone),1)):w("",!0)]),_:1})):w("",!0),(f=t(b).phone)!=null&&f?(c(),A("div",Fe)):w("",!0),l(k,{class:"q-py-xs"},{default:a(()=>[l(_,{caption:""},{default:a(()=>[d("Sale & Buy ")]),_:1})]),_:1}),l(I,{class:"text-dark bg-orange",onClick:e[13]||(e[13]=O(u=>Q(),["prevent"]))},{default:a(()=>[l(M,{class:"fontastyle",flat:"",label:"Join"})]),_:1})]}),_:1})):t(C).login=="keyrequired"?(c(),v(E,{key:2,style:{"min-width":"20%","max-width":"80vw"},flat:""},{default:a(()=>{var i,r,f;return[l(k,{class:"q-pa-sm q-gutter-sm"},{default:a(()=>[l(_,{class:"text-weight-bold text-orange text-h5"},{default:a(()=>[d("Joining mesh")]),_:1}),l(_,{caption:""},{default:a(()=>[d("For Traders Only")]),_:1})]),_:1}),(r=(i=t(n).phoneCode)==null?void 0:i.length)!=null&&r?(c(),v(k,{key:0,class:"q-pa-md row q-gutter-sm column"},{default:a(()=>[s("div",Ze,[s("div",null,[l(D,{name:"password"}),d(" Log key "),V(s("input",{class:"boxcstyle",type:"password","onUpdate:modelValue":e[14]||(e[14]=u=>t(n).enrollKey=u),label:"Phone Number",onInput:e[15]||(e[15]=u=>t(N)("enrollKey",t(n).enrollKey))},null,544),[[G,t(n).enrollKey]])])]),t(b).phone?(c(),A("div",ze,q(t(b).phone),1)):w("",!0)]),_:1})):w("",!0),(f=t(b).phone)!=null&&f?(c(),A("div",He)):w("",!0),l(k,{class:"q-py-xs"},{default:a(()=>[l(_,{caption:""},{default:a(()=>[d("Contact us: +251 914424140 ")]),_:1})]),_:1}),l(I,{class:"text-dark bg-orange",onClick:e[16]||(e[16]=O(u=>Q(),["prevent"]))},{default:a(()=>[l(M,{class:"fontastyle",flat:"",label:"Login"})]),_:1})]}),_:1})):w("",!0),s("div",Je,[t(C).login=="init"?(c(),v(M,{key:0,flat:"",dense:!0,onClick:e[17]||(e[17]=i=>t(C).login="create")},{default:a(()=>[d(" Create ")]),_:1})):(c(),v(M,{key:1,flat:"",dense:!0,onClick:e[18]||(e[18]=i=>t(C).login="init")},{default:a(()=>[d(" Already Have Account ? ")]),_:1}))])]),We]),_:1}))}}};export{wt as default};
