import{h,q as pe,O as ge,P as me,R as fe,r as S,w as W,o as ve,S as ye,u as e,l as c,m as y,n as l,U as j,V as he,W as s,f as a,X as L,Q as q,Y as M,Z as P,_ as m,p as w,$ as T,a0 as I,a1 as E,a2 as C,a3 as V,a4 as F}from"./index.39fdb616.js";import{d as we,Q as b}from"./dynamicModule.b0001511.js";import{Q as U}from"./QPage.30cde12f.js";import{Q as X}from"./QSelect.6795d003.js";import{u as _e,a as be,_ as A,s as Ce}from"./debugMixin.369f3227.js";import{_ as xe,g as ke,a as Se,b as qe,c as Y}from"./geolocMixin.5bc3b9f5.js";import{a as Pe}from"./authenticatingStore.02d719c4.js";import{p as Le}from"./profileStore.9ce9b794.js";import{u as Me}from"./use-quasar.0e73d800.js";import{u as Ne}from"./profileschemaValidator.6762ae9b.js";import"./axios.05cf8750.js";const Ae=[h("g",{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)","stroke-width":"2"},[h("circle",{cx:"22",cy:"22",r:"6"},[h("animate",{attributeName:"r",begin:"1.5s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),h("animate",{attributeName:"stroke-opacity",begin:"1.5s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),h("animate",{attributeName:"stroke-width",begin:"1.5s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),h("circle",{cx:"22",cy:"22",r:"6"},[h("animate",{attributeName:"r",begin:"3s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),h("animate",{attributeName:"stroke-opacity",begin:"3s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),h("animate",{attributeName:"stroke-width",begin:"3s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),h("circle",{cx:"22",cy:"22",r:"8"},[h("animate",{attributeName:"r",begin:"0s",dur:"1.5s",values:"6;1;2;3;4;5;6",calcMode:"linear",repeatCount:"indefinite"})])])];var De=pe({name:"QSpinnerRings",props:ge,setup(K){const{cSize:$,classes:D}=me(K);return()=>h("svg",{class:D.value,stroke:"currentColor",width:$.value,height:$.value,viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"},Ae)}});const Te={class:"q-pa-md q-mx-auto fontastyle",style:{"max-width":"400px"}},Ie={class:"rounded-borders q-card q-card--bordered q-pa-md bg-orange text-white"},$e={class:"q-pt-sm q-mb-md"},Oe=s("h4",{class:"q-my-none text-h5"},"Allow Location Access",-1),Qe=s("div",{class:"q-mb-md"},[s("p",null,"We need your location to provide you with the best experience:"),s("ul",{class:"q-pl-lg"},[s("li",null,"Get exclusive access to products before others."),s("li",null,"Find products near your location."),s("li",null,"Sell products to customers near you.")])],-1),Be=s("p",null,"For these features, please allow location access.",-1),je={class:"q-mt-md row justify-end q-gutter-sm"},Ee={key:1},Ve=s("p",{class:"text-grey q-pa-sm",style:{position:"fixed",bottom:"5px",left:"5px"}}," Provided by mesh ",-1),Fe={class:"col flex flex-center column bg-black q-pa-sm"},Ge={class:"row justify-evenly items-center"},Ue={key:0,class:"warnMessage"},Ke={key:1},Re={class:"column justify-evenly items-center"},ze={key:0,class:"warnMessage"},Ze={key:1},Je={class:"column justify-evenly items-center"},He={key:0,class:"warnMessage"},We={key:1},Xe={class:"col-auto column q-gutter-xs text-grey"},Ye=s("br",null,null,-1),et=s("p",{class:"text-grey q-pa-sm"},"Provided by mesh",-1),bt={__name:"signPage",setup(K){const{askForGPS:$,_thislocation:D,gpsStatus:x,allowGPS:R,_initGeo:ee,getCurrentPosition:tt}=xe(),{_debugObj:f,_validateThis:N}=Ne(),{Loadingpage:z,Loadingevent:O,Loading:nt,DoneMessage:ot,KnowthisMessage:at,WarnthisMessage:lt,timerLoadevent:g,timerDone:st,timerInformthis:it,timerError:rt}=_e(),te=Pe(),ne=Le();be({title:"itService signing",titleTemplate:o=>`${o} - LoginPage`,script:{printJs:{type:"application/ld+json",innerHTML:"{  }"},ldJson:{type:"application/ld+json",innerHTML:"{ }"}}}),Me();const oe=fe();var t=S({});async function ae(){t.value={};try{t.value.phone=null,t.value.phoneCode=["",""],t.value.geolocation={},t.value.geolocation={lat:"",long:""},t.value.location={},t.value.location={country:"",city:"",street:""}}catch{}return!0}let _=S({login:"init",create:!1}),le=S("Continue"),se="phone";const ie=ne,re={createData:async function(){let o={};return t.value[se]==null?!1:await ie.createData(t.value,o).then(n=>{var p;return(p=n.status)!=null&&p?n.data:!1}).catch(()=>!1)}};async function Q(){var o;return console.log(f!=null?f:!1,"debugggggg"),(o=f.value)!=null&&o?Object.values(f.value).every(p=>p==null)&&Z():(f.value=null,Z()),!0}S(0);var Z=async function(){return console.log(`

Function - _manageStoreLogin --STORE Authentication Initializing [Phone,Stored_ID]---- 
`),await te.useLogin(t.value).then(async o=>{var p,v,i,u,d,r,H;var n=(p=o.data)!=null?p:!1;return console.log(`
 LoginStatus = ${o.status} 
`),console.log(o.data,(v=O.continueform)!=null?v:!1),!((i=o.status)!=null&&i)||!n?!((u=t.value.phone)!=null&&u)||_.value.login=="init"?(await g({loginform:0},0,"Create New Account"),!0):(console.log(t.value,"ceating new"),_.value.login="create",await g({loginform:0},0,"Creating New Account !"),re.createData().then(async B=>B&&Object.keys(B).length?(_.value.login="init",console.log(`

</Function - _manageStoreLogin -- New Profile Created -- 
`),le.value="Log to Continue",g({loginform:0},0,"Account Created ! Login to continue.")):(t.value.phone=null,await g({loginform:0},0,"Phone Number Error !"))).catch(B=>g({main:0},0,"Try Refreshing, please ?"+B))):(d=n.enrollKey)!=null&&d&&n.enrollKey!=((r=t.value.enrollKey)!=null?r:!1)?(await g({main:5e3},0,"Use Correct key!"),_.value.login="keyrequired",!0):(t.value=Object.assign({},n),console.log(`
 User Acctype = ${t.value.acctype} 
`),(H=t.value.acctype)!=null&&H?(await g({main:0},0,"...."),await de("Home","Home","saleit"),g({loginform:0},0,"Routing Error. Check Connection Please ;")):(await g({main:5e3},0,"Access Error, Retrying.."),!1))}).catch(async o=>(console.log(`

</Function - _manageStoreLogin - 
`+o),await g({main:0},0,"Error Connecting.."+o)))};S(!1),S(null);let G=S([]),k=S(null);W(x,(o,n)=>((o=="finish"||o==null)&&ue(),!0)),W(D,(o,n)=>{var p,v;return o&&(t.value.geolocation=o,J("lat",j((p=o.lat)!=null?p:null)),J("long",j((v=o.long)!=null?v:null))),!0});async function ue(){var o,n,p,v,i,u,d;if(console.log("Setting Locations =<> GPS = ",Object.values((o=t.value.geolocation)!=null?o:{})," && timeZone = ",k.value),!k.value)return!1;if(D.value)t.value.geolocation=D.value;else{let r=((n=k.value.loc)!=null?n:"").split(",");console.error(r,"GPS ACESS IS BLOCKED, timeZone API OPtions ...."),r[1]&&(t.value.geolocation={lat:r[0],long:r[1]})}return A._set("lat",t.value.geolocation.lat),A._set("long",t.value.geolocation.long),t.value.phoneCode=G.value,t.value.location.country=(p=k.value.country)!=null?p:"",t.value.location.city=(v=k.value.city)!=null?v:"",t.value.location.street=(i=k.value.city)!=null?i:"",t.value.location.provinance=(u=k.value.region)!=null?u:"",t.value.currency=(d=G.value[2])!=null?d:A._get("currency","ETB"),console.log("Final =<> GPS = ",t.value.geolocation," && Locations = ",t.value.location),x.value==null||(x.value=null),!0}async function ce(){return console.log("Initiating the API or TimeZone Locations System"),x.value="Checking.... Connection.",G.value=await ke(),k.value=await Se(),x.value=await qe(),new Promise(o=>{setTimeout(()=>{console.log("Terminating the API or TimeZone Locations System, && INIT GeoData Mining using GPS or TimeZone GeoData !!! !"),ee(),o(!0)},2e3)})}g({main:0},0,"..."),ve(async()=>(console.log(`

<0 ---------Mining Client DATA ---- 
`),await g({main:0},0,"mesh "),await ce().then(async o=>(console.log(`

<0 ---------Automatic Authentications Initiated---- 
`),await Q(),console.log(`

</0---------Automatic Authentications Terminated--- 
`),!0)).catch(async o=>await g({main:0},0,"Error Connecting.. "+o)))),ye(async()=>{console.log(`

<---------Defaulting Profile <--this--> ---- 
`),console.log(`

---------Mining User Device Informations [Phones, GeoLocations]---- 
`)}),ae();let de=async(o=null,n=null,p=!0)=>{var v,i,u;if(!o||!((v=t.value.acctype)!=null&&v))return!1;if(he[o]._auth&&!((i=t.value.enrolled)!=null&&i))return _thisOps.value="createPermission",!1;await g({main:0},0,"Loading ...");try{let d=Object.assign({acctype:(u=t.value.acctype[p])!=null?u:""},A._reroute(o,n,Ce.value=="Small"));return A._set("path",j(n)),await oe.push(d),g({main:1},1," "),!0}catch(d){return console.log(`

</Routing Functions of pathName = ${o}  == >> ${d} == >>  
`),g({main:3e3},3e3,d),!1}};async function J(o,n){return n&&A._set(o,j(n)),!0}return(o,n)=>{var p,v;return((p=e(O).main)!=null?p:!1)||e(x)?(c(),y(U,{key:0,class:"column flex flex-center bg-orange rounded-borders q-py-sm"},{default:l(()=>{var i;return[e(x)=="permiting_gpsservice"?(c(),y(we,{key:0,isOpen:e($),onEmitClick0:n[1]||(n[1]=u=>e(R)(u))},{default:l(()=>[s("div",Te,[s("div",Ie,[s("div",$e,[a(L,{name:"place",size:"48px",color:"white"}),Oe]),Qe,Be,s("div",je,[a(q,{flat:"",color:"primary",label:"Allow",onClick:n[0]||(n[0]=u=>e(R)(!0))})])])])]),_:1},8,["isOpen"])):(c(),M("p",Ee,P(e(x)=="timezone"?"Connection Error":"Loading ..."),1)),s("div",null,[a(De,{style:{color:"lightyellow"},size:"10em"})]),(i=e(O).main)!=null&&i?(c(),y(b,{key:2,style:{color:"lightyellow"},class:"fontdstyle"},{default:l(()=>{var u;return[m(P((u=e(z).content)!=null?u:"..."),1)]}),_:1})):w("",!0),Ve]}),_:1})):(v=e(O).continueform)!=null&&v?(c(),y(U,{key:1,class:"flex flex-center"},{default:l(()=>[a(E,{class:"col-auto boxbstyle"},{default:l(()=>[a(T,{class:"text-dark"},{default:l(()=>{var i;return[m(P((i=e(z).content)!=null?i:"..."),1)]}),_:1}),a(T,{class:"text-dark"},{default:l(()=>[a(q,{flat:"",color:"red",label:"Cancel",onClick:n[2]||(n[2]=I(i=>e(t).phone=null,["prevent"]))}),a(q,{flat:"",label:"Continue...",onClick:n[3]||(n[3]=I(i=>e(g)({loginform:0},0,""),["prevent"]))})]),_:1})]),_:1})]),_:1})):(c(),y(U,{key:2,persistent:"",class:"bg-white rounded-borders column"},{default:l(()=>[s("div",Fe,[s("div",null,[e(_).login=="init"?(c(),y(E,{key:0,style:{"min-width":"20%","max-width":"80vw"},flat:""},{default:l(()=>{var i,u,d;return[a(C,{class:"q-pa-sm q-gutter-sm"},{default:l(()=>[a(b,{class:"text-weight-bold text-orange text-h5"},{default:l(()=>[m("Continue to mesh")]),_:1}),a(b,{caption:""},{default:l(()=>[m("For Trader & Buyer")]),_:1})]),_:1}),(u=(i=e(t).phoneCode)==null?void 0:i.length)!=null&&u?(c(),y(C,{key:0,class:"q-pa-md row q-gutter-sm column"},{default:l(()=>[a(X,{round:"",outline:"",color:"orange","bottom-slots":"",filled:"",modelValue:e(t).phoneCode,"onUpdate:modelValue":n[4]||(n[4]=r=>e(t).phoneCode=r),options:Object.values(e(Y)),input:e(N)("phoneCode",e(t).phoneCode),label:"Country",dense:!0,class:"col"},{prepend:l(()=>[a(L,{name:"place"})]),_:1},8,["modelValue","options","input"]),s("div",Ge,[a(L,{name:"phone"}),m("+"+P(e(t).phoneCode[1])+" ",1),V(s("input",{class:"boxcstyle",type:"Number","onUpdate:modelValue":n[5]||(n[5]=r=>e(t).phone=r),label:"Phone Number",onInput:n[6]||(n[6]=r=>e(N)("phone",e(t).phone))},null,544),[[F,e(t).phone]])]),e(f).phone?(c(),M("div",Ue,P(e(f).phone),1)):w("",!0)]),_:1})):w("",!0),(d=e(f).phone)!=null&&d?(c(),M("div",Ke)):w("",!0),a(C,{class:"q-py-xs"},{default:l(()=>[a(b,{caption:""},{default:l(()=>[m("Sale & Buy ")]),_:1})]),_:1}),a(T,{class:"text-dark bg-orange",onClick:n[7]||(n[7]=I(r=>Q(),["prevent"]))},{default:l(()=>[a(q,{class:"fontastyle",flat:"",label:"Continue"})]),_:1})]}),_:1})):e(_).login=="create"?(c(),y(E,{key:1,style:{"min-width":"20%","max-width":"80vw"},flat:""},{default:l(()=>{var i,u,d;return[a(C,{class:"q-pa-sm q-gutter-sm"},{default:l(()=>[a(b,{class:"text-weight-bold text-orange text-h5"},{default:l(()=>[m("Joining mesh")]),_:1}),a(b,{caption:""},{default:l(()=>[m("For Trader & Buyer")]),_:1})]),_:1}),(u=(i=e(t).phoneCode)==null?void 0:i.length)!=null&&u?(c(),y(C,{key:0,class:"q-pa-md row q-gutter-sm column"},{default:l(()=>[a(X,{round:"",outline:"",color:"orange","bottom-slots":"",filled:"",modelValue:e(t).phoneCode,"onUpdate:modelValue":n[8]||(n[8]=r=>e(t).phoneCode=r),options:Object.values(e(Y)),input:e(N)("phoneCode",e(t).phoneCode),label:"Country",dense:!0,class:"col"},{prepend:l(()=>[a(L,{name:"place"})]),_:1},8,["modelValue","options","input"]),s("div",Re,[s("div",null,[a(L,{name:"phone"}),m(" +"+P(e(t).phoneCode[1])+" ",1),V(s("input",{class:"boxcstyle",type:"Number","onUpdate:modelValue":n[9]||(n[9]=r=>e(t).phone=r),label:"Phone Number",onInput:n[10]||(n[10]=r=>e(N)("phone",e(t).phone))},null,544),[[F,e(t).phone]])]),s("div",null,[a(L,{name:"password"}),m(" password "),V(s("input",{class:"boxcstyle",type:"password","onUpdate:modelValue":n[11]||(n[11]=r=>e(t).password=r),label:"Phone Number",onInput:n[12]||(n[12]=r=>e(N)("password",e(t).password))},null,544),[[F,e(t).password]])])]),e(f).phone?(c(),M("div",ze,P(e(f).phone),1)):w("",!0)]),_:1})):w("",!0),(d=e(f).phone)!=null&&d?(c(),M("div",Ze)):w("",!0),a(C,{class:"q-py-xs"},{default:l(()=>[a(b,{caption:""},{default:l(()=>[m("Sale & Buy ")]),_:1})]),_:1}),a(T,{class:"text-dark bg-orange",onClick:n[13]||(n[13]=I(r=>Q(),["prevent"]))},{default:l(()=>[a(q,{class:"fontastyle",flat:"",label:"Join"})]),_:1})]}),_:1})):e(_).login=="keyrequired"?(c(),y(E,{key:2,style:{"min-width":"20%","max-width":"80vw"},flat:""},{default:l(()=>{var i,u,d;return[a(C,{class:"q-pa-sm q-gutter-sm"},{default:l(()=>[a(b,{class:"text-weight-bold text-orange text-h5"},{default:l(()=>[m("Joining mesh")]),_:1}),a(b,{caption:""},{default:l(()=>[m("For Traders Only")]),_:1})]),_:1}),(u=(i=e(t).phoneCode)==null?void 0:i.length)!=null&&u?(c(),y(C,{key:0,class:"q-pa-md row q-gutter-sm column"},{default:l(()=>[s("div",Je,[s("div",null,[a(L,{name:"password"}),m(" Log key "),V(s("input",{class:"boxcstyle",type:"password","onUpdate:modelValue":n[14]||(n[14]=r=>e(t).enrollKey=r),label:"Phone Number",onInput:n[15]||(n[15]=r=>e(N)("enrollKey",e(t).enrollKey))},null,544),[[F,e(t).enrollKey]])])]),e(f).phone?(c(),M("div",He,P(e(f).phone),1)):w("",!0)]),_:1})):w("",!0),(d=e(f).phone)!=null&&d?(c(),M("div",We)):w("",!0),a(T,{class:"text-dark bg-orange",onClick:n[16]||(n[16]=I(r=>Q(),["prevent"]))},{default:l(()=>[a(q,{class:"fontastyle",flat:"",label:"Login"})]),_:1})]}),_:1})):w("",!0)]),s("div",Xe,[e(_).login=="init"?(c(),y(q,{key:0,flat:"",dense:!0,onClick:n[17]||(n[17]=i=>e(_).login="create")},{default:l(()=>[m(" Create ")]),_:1})):(c(),y(q,{key:1,flat:"",dense:!0,onClick:n[18]||(n[18]=i=>e(_).login="init")},{default:l(()=>[m(" Login ")]),_:1})),Ye,a(C,{class:"q-py-xs text-grey"},{default:l(()=>[a(b,{class:"text-grey",caption:""},{default:l(()=>[m("Contact us: +251 914424140 ")]),_:1})]),_:1})])]),et]),_:1}))}}};export{bt as default};
