import{h as y,q as pe,O as ge,P as me,R as fe,r as P,w as J,o as ve,S as ye,u as t,l as c,m as v,n as a,U as B,V as he,W as u,f as l,X as p,Q as L,Y as M,Z as q,p as h,_ as I,$ as O,a0 as E,a1 as k,a2 as N,a3 as V,a4 as G}from"./index.00a864f4.js";import{d as we,Q as C}from"./moduleLoader.2eb2842e.js";import{Q as R}from"./QPage.e8896f7c.js";import{Q as W}from"./QSelect.b62b9e60.js";import{u as be,a as Ce,s as _e}from"./debugMixin.29ad5b1d.js";import{_ as xe,g as ke,a as Se,b as Pe,c as X}from"./geolocMixin.41c1b3e0.js";import{a as Le}from"./authenticatingStore.e55ff7e1.js";import{p as Me}from"./profileStore.8279a730.js";import{u as qe}from"./use-quasar.a5baf21a.js";import{_ as U}from"./storeService.3eb6e8a7.js";import{u as Ae}from"./profileschemaValidator.64686100.js";import"./axios.05cf8750.js";const Ne=[y("g",{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)","stroke-width":"2"},[y("circle",{cx:"22",cy:"22",r:"6"},[y("animate",{attributeName:"r",begin:"1.5s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),y("animate",{attributeName:"stroke-opacity",begin:"1.5s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),y("animate",{attributeName:"stroke-width",begin:"1.5s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),y("circle",{cx:"22",cy:"22",r:"6"},[y("animate",{attributeName:"r",begin:"3s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),y("animate",{attributeName:"stroke-opacity",begin:"3s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),y("animate",{attributeName:"stroke-width",begin:"3s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),y("circle",{cx:"22",cy:"22",r:"8"},[y("animate",{attributeName:"r",begin:"0s",dur:"1.5s",values:"6;1;2;3;4;5;6",calcMode:"linear",repeatCount:"indefinite"})])])];var De=pe({name:"QSpinnerRings",props:ge,setup(F){const{cSize:$,classes:D}=me(F);return()=>y("svg",{class:D.value,stroke:"currentColor",width:$.value,height:$.value,viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"},Ne)}});const Te={class:"boxastyle text-orange bg-orange"},Ie=u("p",{class:"text-white"},"Allow Location Access.",-1),Oe=u("div",{class:"text-orange boxcstyle",style:{"max-width":"80vw"}},[p(" Would you like to "),u("ul",null,[u("li",null,"Get product before any one"),u("li",null,"Get product near you")]),p(" then, we need locations acccess to provide you with best exprience. ")],-1),$e={class:"justify-end row"},je={key:1},Qe=u("p",{class:"text-grey q-pa-sm",style:{position:"fixed",bottom:"5px",left:"5px"}}," Provided by mesh ",-1),Be={class:"col flex flex-center column q-gutter-md"},Ee={class:"row justify-evenly items-center"},Ve={key:0,class:"warnMessage"},Ge={key:1},Ue={class:"column justify-evenly items-center"},Ke={key:0,class:"warnMessage"},Re={key:1},Fe={class:"column justify-evenly items-center"},Ze={key:0,class:"warnMessage"},ze={key:1},He={class:"col-auto q-pa-none row q-gutter-xs fontastyle text-grey justify-end"},Je=u("p",{class:"text-grey q-pa-sm"},"Provided by mesh",-1),ht={__name:"signPage",setup(F){const{askForGPS:$,_thislocation:D,gpsStatus:_,allowGPS:Z,_initGeo:Y,getCurrentPosition:We}=xe(),{_debugObj:w,_validateThis:A}=Ae(),{Loadingpage:z,Loadingevent:j,Loading:Xe,DoneMessage:Ye,KnowthisMessage:et,WarnthisMessage:tt,timerLoadevent:g,timerDone:nt,timerInformthis:ot,timerError:at}=be(),ee=Le(),te=Me();Ce({title:"itService signing",titleTemplate:o=>`${o} - LoginPage`,script:{printJs:{type:"application/ld+json",innerHTML:"{  }"},ldJson:{type:"application/ld+json",innerHTML:"{ }"}}}),qe();const ne=fe();var n=P({});async function oe(){n.value={};try{n.value.phone=null,n.value.phoneCode=["",""],n.value.geolocation={},n.value.geolocation={lat:"",long:""},n.value.location={},n.value.location={country:"",city:"",street:""}}catch{}return!0}let b=P({login:"init",create:!1}),ae=P("Continue"),le="phone";const se=te,ie={createData:async function(){let o={};return n.value[le]==null?!1:await se.createData(n.value,o).then(e=>{var m;return(m=e.status)!=null&&m?e.data:!1}).catch(()=>!1)}};async function Q(){return Object.values(w.value).every(e=>e==null)&&re(),!0}P(0);var re=async function(){return console.log(`

Function - _manageStoreLogin --STORE Authentication Initializing [Phone,Stored_ID]---- 
`),await ee.useLogin(n.value).then(async o=>{var m,f,s,r,d,i,T;var e=(m=o.data)!=null?m:!1;return console.log(`
 LoginStatus = ${o.status} 
`),console.log(o.data,(f=j.continueform)!=null?f:!1),!((s=o.status)!=null&&s)||!e?!((r=n.value.phone)!=null&&r)||b.value.login=="init"?(await g({loginform:0},0,"Create New Account"),!0):(console.log(n.value,"ceating new"),b.value.login="create",await g({loginform:0},0,"Creating New Account !"),ie.createData().then(async x=>x&&Object.keys(x).length?(b.value.login="init",console.log(`

</Function - _manageStoreLogin -- New Profile Created -- 
`),ae.value="Log to Continue",g({loginform:0},0,"Account Created ! Login to continue.")):(n.value.phone=null,await g({loginform:0},0,"Phone Number Error !"))).catch(x=>g({main:0},0,"Try Refreshing, please ?"+x))):(d=e.enrollKey)!=null&&d&&e.enrollKey!=((i=n.value.enrollKey)!=null?i:!1)?(await g({main:5e3},0,"Use Correct key!"),b.value.login="keyrequired",!0):(n.value=Object.assign({},e),console.log(`
 User Acctype = ${n.value.acctype} 
`),(T=n.value.acctype)!=null&&T?(await g({main:0},0,"...."),await de("Home","Home","saleit"),g({loginform:0},0,"Routing Error. Check Connection Please ;")):(await g({main:5e3},0,"Access Error, Retrying.."),!1))}).catch(async o=>(console.log(`

</Function - _manageStoreLogin - 
`+o),await g({main:0},0,"Error Connecting.."+o)))};P(!1),P(null);let K=P([]),S=P(null);J(_,(o,e)=>((o=="finish"||o==null)&&ue(),!0)),J(D,(o,e)=>{var m,f;return o&&(n.value.geolocation=o,H("lat",B((m=o.lat)!=null?m:null)),H("long",B((f=o.long)!=null?f:null))),!0});async function ue(){var o,e,m,f,s,r,d,i,T;if(console.log("Setting Locations =<> GPS = ",Object.values((o=n.value.geolocation)!=null?o:{})," && timeZone = ",S.value),!S.value)return!1;if((m=(e=D.value)==null?void 0:e.lat)!=null&&m)n.value.geolocation=D.value;else{let x=((f=S.value.loc)!=null?f:"").split(",");console.error(x,"GPS ACESS IS BLOCKED, timeZone API OPtions ...."),x[1]&&(n.value.geolocation={lat:x[0],long:x[1]})}return n.value.phoneCode=K.value,n.value.location.country=(s=S.value.country)!=null?s:"",n.value.location.city=(r=S.value.city)!=null?r:"",n.value.location.street=(d=S.value.city)!=null?d:"",n.value.location.provinance=(i=S.value.region)!=null?i:"",n.value.currency=(T=K.value[2])!=null?T:U._get("currency","ETB"),console.log("Final =<> GPS = ",n.value.geolocation," && Locations = ",n.value.location),_.value==null||(_.value=null),!0}async function ce(){return console.log("Initiating the API or TimeZone Locations System"),_.value="Checking.... Connection.",K.value=await ke(),S.value=await Se(),_.value=await Pe(),new Promise(o=>{setTimeout(()=>{console.log("Terminating the API or TimeZone Locations System, && INIT GeoData Mining using GPS or TimeZone GeoData !!! !"),Y(),o(!0)},2e3)})}async function H(o,e){return e&&U._set(o,B(e)),!0}g({main:0},0,"..."),ve(async()=>(console.log(`

<0 ---------Mining Client DATA ---- 
`),await g({main:0},0,"mesh "),await ce().then(async o=>(console.log(`

<0 ---------Automatic Authentications Initiated---- 
`),await Q(),console.log(`

</0---------Automatic Authentications Terminated--- 
`),!0)).catch(async o=>await g({main:0},0,"Error Connecting.. "+o)))),ye(async()=>{console.log(`

<---------Defaulting Profile <--this--> ---- 
`),console.log(`

---------Mining User Device Informations [Phones, GeoLocations]---- 
`)}),oe();let de=async(o=null,e=null,m=!0)=>{var f,s,r;if(!o||!((f=n.value.acctype)!=null&&f))return!1;if(he[o]._auth&&!((s=n.value.enrolled)!=null&&s))return _thisOps.value="createPermission",!1;await g({main:0},0,"Loading "+o);try{let d=Object.assign({acctype:(r=n.value.acctype[m])!=null?r:""},U._reroute(o,e,_e.value=="Small"));return U._set("path",B(e)),await ne.push(d),g({main:1},1,"Ok, Loading "+o),!0}catch(d){return console.log(`

</Routing Functions of pathName = ${o}  == >> ${d} == >>  
`),g({main:3e3},3e3,d),!1}};return(o,e)=>{var m,f;return((m=t(j).main)!=null?m:!1)||t(_)?(c(),v(R,{key:0,class:"column flex flex-center bg-orange rounded-borders q-py-sm"},{default:a(()=>{var s;return[t(_)=="permiting_gpsservice"?(c(),v(we,{key:0,isOpen:t($),onEmitClick0:e[1]||(e[1]=r=>t(Z)(r))},{default:a(()=>[u("div",Te,[Ie,Oe,u("div",$e,[l(L,{flat:"",color:"green",onClick:e[0]||(e[0]=r=>t(Z)(!0))},{default:a(()=>[p(" Allow ")]),_:1})])])]),_:1},8,["isOpen"])):(c(),M("p",je,q(t(_)=="timezone"?"Connection Error":t(_)),1)),u("div",null,[l(De,{style:{color:"lightyellow"},size:"10em"})]),(s=t(j).main)!=null&&s?(c(),v(C,{key:2,style:{color:"lightyellow"},class:"fontdstyle"},{default:a(()=>{var r;return[p(q((r=t(z).content)!=null?r:"..."),1)]}),_:1})):h("",!0),Qe]}),_:1})):(f=t(j).continueform)!=null&&f?(c(),v(R,{key:1,class:"flex flex-center"},{default:a(()=>[l(E,{class:"col-auto boxbstyle"},{default:a(()=>[l(I,{class:"text-dark"},{default:a(()=>{var s;return[p(q((s=t(z).content)!=null?s:"..."),1)]}),_:1}),l(I,{class:"text-dark"},{default:a(()=>[l(L,{flat:"",color:"red",label:"Cancel",onClick:e[2]||(e[2]=O(s=>t(n).phone=null,["prevent"]))}),l(L,{flat:"",label:"Continue...",onClick:e[3]||(e[3]=O(s=>t(g)({loginform:0},0,""),["prevent"]))})]),_:1})]),_:1})]),_:1})):(c(),v(R,{key:2,persistent:"",class:"bg-white rounded-borders column"},{default:a(()=>[u("div",Be,[t(b).login=="init"?(c(),v(E,{key:0,style:{"min-width":"20%","max-width":"80vw"},flat:""},{default:a(()=>{var s,r,d;return[l(k,{class:"q-pa-sm q-gutter-sm"},{default:a(()=>[l(C,{class:"text-weight-bold text-orange text-h5"},{default:a(()=>[p("Continue to mesh")]),_:1}),l(C,{caption:""},{default:a(()=>[p("For Trader & Buyer")]),_:1})]),_:1}),(r=(s=t(n).phoneCode)==null?void 0:s.length)!=null&&r?(c(),v(k,{key:0,class:"q-pa-md row q-gutter-sm column"},{default:a(()=>[l(W,{round:"",outline:"",color:"orange","bottom-slots":"",filled:"",modelValue:t(n).phoneCode,"onUpdate:modelValue":e[4]||(e[4]=i=>t(n).phoneCode=i),options:Object.values(t(X)),input:t(A)("phoneCode",t(n).phoneCode),label:"Country",dense:!0,class:"col"},{prepend:a(()=>[l(N,{name:"place"})]),_:1},8,["modelValue","options","input"]),u("div",Ee,[l(N,{name:"phone"}),p("+"+q(t(n).phoneCode[1])+" ",1),V(u("input",{class:"boxcstyle",type:"Number","onUpdate:modelValue":e[5]||(e[5]=i=>t(n).phone=i),label:"Phone Number",onInput:e[6]||(e[6]=i=>t(A)("phone",t(n).phone))},null,544),[[G,t(n).phone]])]),t(w).phone?(c(),M("div",Ve,q(t(w).phone),1)):h("",!0)]),_:1})):h("",!0),(d=t(w).phone)!=null&&d?(c(),M("div",Ge)):h("",!0),l(k,{class:"q-py-xs"},{default:a(()=>[l(C,{caption:""},{default:a(()=>[p("Sale & Buy ")]),_:1})]),_:1}),l(I,{class:"text-dark bg-orange",onClick:e[7]||(e[7]=O(i=>Q(),["prevent"]))},{default:a(()=>[l(L,{class:"fontastyle",flat:"",label:"Continue"})]),_:1})]}),_:1})):t(b).login=="create"?(c(),v(E,{key:1,style:{"min-width":"20%","max-width":"80vw"},flat:""},{default:a(()=>{var s,r,d;return[l(k,{class:"q-pa-sm q-gutter-sm"},{default:a(()=>[l(C,{class:"text-weight-bold text-orange text-h5"},{default:a(()=>[p("Joining mesh")]),_:1}),l(C,{caption:""},{default:a(()=>[p("For Trader & Buyer")]),_:1})]),_:1}),(r=(s=t(n).phoneCode)==null?void 0:s.length)!=null&&r?(c(),v(k,{key:0,class:"q-pa-md row q-gutter-sm column"},{default:a(()=>[l(W,{round:"",outline:"",color:"orange","bottom-slots":"",filled:"",modelValue:t(n).phoneCode,"onUpdate:modelValue":e[8]||(e[8]=i=>t(n).phoneCode=i),options:Object.values(t(X)),input:t(A)("phoneCode",t(n).phoneCode),label:"Country",dense:!0,class:"col"},{prepend:a(()=>[l(N,{name:"place"})]),_:1},8,["modelValue","options","input"]),u("div",Ue,[u("div",null,[l(N,{name:"phone"}),V(u("input",{class:"boxcstyle",type:"Number","onUpdate:modelValue":e[9]||(e[9]=i=>t(n).phone=i),label:"Phone Number",onInput:e[10]||(e[10]=i=>t(A)("phone",t(n).phone))},null,544),[[G,t(n).phone]])]),u("div",null,[l(N,{name:"password"}),p(" password "),V(u("input",{class:"boxcstyle",type:"password","onUpdate:modelValue":e[11]||(e[11]=i=>t(n).password=i),label:"Phone Number",onInput:e[12]||(e[12]=i=>t(A)("password",t(n).password))},null,544),[[G,t(n).password]])])]),t(w).phone?(c(),M("div",Ke,q(t(w).phone),1)):h("",!0)]),_:1})):h("",!0),(d=t(w).phone)!=null&&d?(c(),M("div",Re)):h("",!0),l(k,{class:"q-py-xs"},{default:a(()=>[l(C,{caption:""},{default:a(()=>[p("Sale & Buy ")]),_:1})]),_:1}),l(I,{class:"text-dark bg-orange",onClick:e[13]||(e[13]=O(i=>Q(),["prevent"]))},{default:a(()=>[l(L,{class:"fontastyle",flat:"",label:"Join"})]),_:1})]}),_:1})):t(b).login=="keyrequired"?(c(),v(E,{key:2,style:{"min-width":"20%","max-width":"80vw"},flat:""},{default:a(()=>{var s,r,d;return[l(k,{class:"q-pa-sm q-gutter-sm"},{default:a(()=>[l(C,{class:"text-weight-bold text-orange text-h5"},{default:a(()=>[p("Joining mesh")]),_:1}),l(C,{caption:""},{default:a(()=>[p("For Traders Only")]),_:1})]),_:1}),(r=(s=t(n).phoneCode)==null?void 0:s.length)!=null&&r?(c(),v(k,{key:0,class:"q-pa-md row q-gutter-sm column"},{default:a(()=>[u("div",Fe,[u("div",null,[l(N,{name:"password"}),p(" Log key "),V(u("input",{class:"boxcstyle",type:"password","onUpdate:modelValue":e[14]||(e[14]=i=>t(n).enrollKey=i),label:"Phone Number",onInput:e[15]||(e[15]=i=>t(A)("enrollKey",t(n).enrollKey))},null,544),[[G,t(n).enrollKey]])])]),t(w).phone?(c(),M("div",Ze,q(t(w).phone),1)):h("",!0)]),_:1})):h("",!0),(d=t(w).phone)!=null&&d?(c(),M("div",ze)):h("",!0),l(k,{class:"q-py-xs"},{default:a(()=>[l(C,{caption:""},{default:a(()=>[p("Contact us: +251 091232344 ")]),_:1})]),_:1}),l(I,{class:"text-dark bg-orange",onClick:e[16]||(e[16]=O(i=>Q(),["prevent"]))},{default:a(()=>[l(L,{class:"fontastyle",flat:"",label:"Login"})]),_:1})]}),_:1})):h("",!0),u("div",He,[t(b).login=="init"?(c(),v(L,{key:0,flat:"",dense:!0,onClick:e[17]||(e[17]=s=>t(b).login="create")},{default:a(()=>[p(" Create ")]),_:1})):(c(),v(L,{key:1,flat:"",dense:!0,onClick:e[18]||(e[18]=s=>t(b).login="init")},{default:a(()=>[p(" Already Have Account ? ")]),_:1}))])]),Je]),_:1}))}}};export{ht as default};
