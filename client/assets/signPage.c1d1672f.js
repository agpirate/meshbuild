import{Q as ee}from"./QItemLabel.d96c0f54.js";import{Q as U}from"./QPage.dd37a963.js";import{r as p,O as fe,w as te,o as pe,P as _e,k as be,u as n,l as d,m as M,n as h,R as E,S as xe,U as t,V as f,W as Q,X as A,p as w,f as k,Y as oe,Q as ne,Z as D,_ as se,$ as N,a0 as O,a1 as Se,F as we,a2 as ke}from"./index.21eddcd6.js";import{s as Ce}from"./utils.a266043b.js";import{_ as Pe,a as Le,p as Ae,g as Me,b as $e,c as je,d as Te}from"./geolocMixin.32c67fe7.js";import{u as De}from"./use-quasar.d4ccfeda.js";import{d as Ne,u as Ie,a as Ee,_ as $,b as Oe}from"./debugMixin.c3829f04.js";import"./axios.05cf8750.js";const Ve=()=>{var Z=p("profileSchemas"),V=p("profileSchema");let j=p({}),_=p({}),P=p(null);Ne("profileSchemas","profileSchema").then(a=>{a&&(P.value=a)});async function R(a,l=null){var q,F,i;if(console.log("ssssssssssss",a,l),!P.value||!l)return!1;let B=(q=P.value[a].rules)!=null?q:null,z=(i=(F=j.value[a])!=null?F:null)!=null?i:l;if(!B)return!0;_.value[a]=null;for(let G of B)if(!await g(G,z)){_.value[a]=H(G),console.log("No Validated  for = "+a);break}return console.log(_.value," Validatiotion Obj."),!0}function H(a){switch(a.type){case"required":return"Field is required";case"minValue":return"Minimum Value Error";case"maxValue":return"Maximam Value Error";case"minLength":return`Minimum length is ${a.value}`;case"maxLength":return`Maximum length is ${a.value}`;case"pattern":return"Invalid format";default:return"Invalid input"}}const g=async(a,l)=>{switch(console.log(typeof a,typeof l,"validation is thisrule210"),a.type){case"required":return l!=null&&l!="";case"minValue":return l>=a.value;case"maxValue":return l<=a.value;case"minLength":return l.length>=a.value;case"maxLength":return l.length<=a.value;case"pattern":return new RegExp(a.value).test(l);case"type":return L(a.value,l);default:return!0}},L=(a,l)=>{switch(a){case"number":return!isNaN(l);case"string":return typeof l=="string";case"array":return Array.isArray(l);case"object":return typeof l=="object"&&!Array.isArray(l);default:return!1}};return{thisSchemaPath:Z,thisSchemaFile:V,_debugObj:_,_validateThis:R}},Re={class:"bgc-light boxStyle-sm radiusxxs fontStyle-base font-system sh-xxs-system-secondaryOUT onedlayout ccolumn cgap-4"},Be=t("h4",null," Location Access Required ",-1),qe=t("div",{class:"onedlayout crow cj-center"},[t("p",{class:"box-size-flexp75auto"}," Mesh requires location access to provide you with the best experience ")],-1),Fe={class:"onedlayout crow cj-end"},Ge=t("h4",{class:""}," Close ",-1),Ke=[Ge],Ue=t("h4",{class:""}," Allow ",-1),Qe=[Ue],Ze={key:1},He=t("div",null,null,-1),ze=t("div",{class:"font-grey",style:{position:"fixed",bottom:"5px",left:"5px"}},[t("p",null," Provided by mesh ")],-1),Je={class:"ccol-grow ccolumn cj-center ia-center"},We={class:"boxStyle-xs radius-sm bgc-dl15"},Xe={key:0,style:{"min-width":"40%","max-width":"80vw"},class:"bgc-dl30 radiusxxs boxStyle-sm p-xl fontStyle-base onedlayout ccolumn c-gap-3"},Ye=t("h4",{class:"txtsmokey"}," Log In",-1),et=t("h6",{class:"txtsmokey font-system"}," Mesh",-1),tt={class:"boxStyle onedlayout cgap-4 ccolumn ia-center"},ot={class:"onedlayout ccolumn cgap-2"},nt={class:"boxStyle-xxs radius-sm bgc-darkgrey onedlayout crow cj-evenly ia-center font-grey"},st={class:"ri-phone-fill icon-xl font-light"},at={key:0,class:"txtnegative"},lt={key:1},it={class:"boxStyle-dense onedlayout crow cj-between ia-center font-greysmoke"},rt=t("h4",{class:""}," Login",-1),ct=t("h5",null," Create New",-1),ut=t("div",{class:"boxStyle-xxs"},[t("h4",{class:"font-warning"}," Creating Account"),t("h6",null,"mesh")],-1),dt={key:0,class:"boxStyle-xxs ccolumn"},gt={class:"ccol-auto crow boxStyle-xxs font-darkgrey"},yt={class:"onedlayout ccolumn fontStyle-base font-grey"},mt={class:"boxStyle-xxs radius-sm bgc-darkgrey onedlayout crow cj-evenly ia-center"},ht=t("h1",null,[t("i",{class:"ri-phone-fill"})],-1),vt={class:"boxStyle-xxs radius-sm bgc-darkgrey onedlayout crow cj-evenly ia-center"},ft=t("h1",null,[t("i",{class:"ri-key-fill"})],-1),pt={key:0,class:"warnMessage"},_t={key:1},bt={class:"q-py-xs"},xt={class:"bgwarning onedlayout crow cj-between ia-center fontStyle-dense"},St=t("h4",null," Create",-1),wt=t("h4",{class:"txtprimary"}," Already Registered ? ",-1),kt={key:2,class:"boxStyle-xs radius-sm onedlayout ccolumn cgap-3"},Ct=t("h3",null,"Continue with login key ",-1),Pt=t("hr",null,null,-1),Lt={key:0,class:"onedlayout ccolumn"},At={class:"boxStyle-xxs radius-sm bgc-darkgrey onedlayout crow cj-evenly ia-center"},Mt=t("h1",null,[t("i",{class:"ri-key-fill"})],-1),$t={key:0,class:"warnMessage"},jt={key:1},Tt={class:"bgc-dl15 boxStyle-sm p-lrsm onedlayout crow cj-between fontStyle-dense pointer font-smoke"},Dt=t("h3",null," Continue",-1),Nt=[Dt],It=t("h3",null," Create",-1),Et=[It],Ot=t("h6",null," Contact us: +251 914424140 ",-1),Vt=t("p",{class:"text-grey q-pa-sm"},"Provided by mesh",-1),zt={__name:"signPage",setup(Z){const{askForGPS:V,_thislocation:j,gpsStatus:_,allowGPS:P,_initGeo:R,getCurrentPosition:H}=Pe(),{_debugObj:g,_validateThis:L}=Ve(),{Loadingpage:a,Loadingevent:l,Loading:B,DoneMessage:z,KnowthisMessage:q,WarnthisMessage:F,timerLoadevent:i,timerDone:G,timerInformthis:ae,timerError:Rt}=Ie(),le=Le(),ie=Ae();Ee({title:"mesh",titleTemplate:s=>`${s} - LoginPage`,script:{printJs:{type:"application/ld+json",innerHTML:"{  }"},ldJson:{type:"application/ld+json",innerHTML:"{ }"}}}),De();const re=fe();var o=p({});async function ce(){o.value={};try{o.value.phone=null,o.value.phoneCode=["",""],o.value.geolocation={},o.value.geolocation={lat:"",long:""},o.value.location={},o.value.location={country:"",city:"",street:""}}catch{}return!0}let x=p({login:"init",create:!1}),ue=p("Continue"),de="phone";const ge=ie,ye={createData:async function(){let s={};return o.value[de]==null?!1:await ge.createData(o.value,s).then(e=>{var r;return(r=e.status)!=null&&r?e.data:!1}).catch(()=>!1)}};async function I(){var s;return console.log(g!=null?g:!1,"debugggggg"),(s=g.value)!=null&&s?Object.values(g.value).every(r=>r==null)&&J():(g.value=null,J()),!0}p(0);var J=async function(){return console.log(`

Function - _manageStoreLogin --STORE Authentication Initializing [Phone,Stored_ID]---- 
`),await le.useLogin(o.value).then(async s=>{var r,m,b,u,c,S,T;var e=(r=s.data)!=null?r:!1;return console.log(`
 LoginStatus = ${s.status} 
`),console.log(s.data,(m=l.continueform)!=null?m:!1),!((b=s.status)!=null&&b)||!e?!((u=o.value.phone)!=null&&u)||x.value.login=="init"?(await i({loginform:0},0,"Create New Account"),!0):(console.log(o.value,"ceating new"),x.value.login="create",await i({loginform:0},0,"Creating New Account !"),ye.createData().then(async y=>y&&Object.keys(y).length?(x.value.login="init",console.log(`

</Function - _manageStoreLogin -- New Profile Created -- 
`),ue.value="Log to Continue",i({loginform:0},0,"Account Created ! Login to continue.")):(o.value.phone=null,await i({loginform:0},0,"Phone Number Error !"))).catch(y=>i({main:0},0,"Try Refreshing, please ?"+y))):(c=e.enrollKey)!=null&&c&&e.enrollKey!=((S=o.value.enrollKey)!=null?S:!1)?(await i({main:5e3},0,"Continue with key"),x.value.login="keyrequired",!0):(o.value=Object.assign({},e),console.log(`
 User Acctype = ${o.value.acctype} 
`),(T=o.value.acctype)!=null&&T?(await i({main:0},0,"...."),await ve("Home","Home","saleit"),i({loginform:0},0,"Routing Error. Check Connection Please ;")):(await i({main:5e3},0,"Access Error, Retrying.."),!1))}).catch(async s=>(console.log(`

</Function - _manageStoreLogin - 
`+s),await i({main:0},0,"Error Connecting.."+s)))};p(!1),p(null);let K=p([]),C=p(null);te(_,(s,e)=>((s=="finish"||s==null)&&me(),!0)),te(j,(s,e)=>{var r,m;return s&&(o.value.geolocation=s,W("lat",E((r=s.lat)!=null?r:null)),W("long",E((m=s.long)!=null?m:null))),!0});async function me(){var s,e,r,m,b,u,c;if(console.log("Setting Locations =<> GPS = ",Object.values((s=o.value.geolocation)!=null?s:{})," && timeZone = ",C.value),!C.value)return!1;if(j.value)o.value.geolocation=j.value;else{let S=((e=C.value.loc)!=null?e:"").split(",");console.error(S,"GPS ACESS IS BLOCKED, timeZone API OPtions ...."),S[1]&&(o.value.geolocation={lat:S[0],long:S[1]})}return $._set("lat",o.value.geolocation.lat),$._set("long",o.value.geolocation.long),o.value.phoneCode=K.value,o.value.location.country=(r=C.value.country)!=null?r:"",o.value.location.city=(m=C.value.city)!=null?m:"",o.value.location.street=(b=C.value.city)!=null?b:"",o.value.location.provinance=(u=C.value.region)!=null?u:"",o.value.currency=(c=K.value[2])!=null?c:$._get("currency","ETB"),console.log("Final =<> GPS = ",o.value.geolocation," && Locations = ",o.value.location),_.value==null||(_.value=null),!0}async function he(){return console.log("Initiating the API or TimeZone Locations System"),_.value="Checking.... Connection.",K.value=await Me(),C.value=await $e(),_.value=await je(),new Promise(s=>{setTimeout(()=>{console.log("Terminating the API or TimeZone Locations System, && INIT GeoData Mining using GPS or TimeZone GeoData !!! !"),R(),s(!0)},2e3)})}i({main:0},0,"..."),pe(async()=>(console.log(`

<0 ---------Mining Client DATA ---- 
`),await i({main:0},0,"mesh "),await he().then(async s=>(console.log(`

<0 ---------Automatic Authentications Initiated---- 
`),await I(),console.log(`

</0---------Automatic Authentications Terminated--- 
`),!0)).catch(async s=>await i({main:0},0,"Error Connecting.. "+s)))),_e(async()=>{console.log(`

<---------Defaulting Profile <--this--> ---- 
`),console.log(`

---------Mining User Device Informations [Phones, GeoLocations]---- 
`)}),ce();let ve=async(s=null,e=null,r=!0)=>{var m,b,u;if(!s||!((m=o.value.acctype)!=null&&m))return!1;if(xe[s]._auth&&!((b=o.value.enrolled)!=null&&b))return _thisOps.value="createPermission",!1;await i({main:0},0,"");try{let c=Object.assign({acctype:(u=o.value.acctype[r])!=null?u:""},$._reroute(s,e,Ce.value=="Small"));return $._set("path",E("mesh")),await re.push(c),i({main:1},1," "),!0}catch(c){return console.log(`

</Routing Functions of pathName = ${s}  == >> ${c} == >>  
`),i({main:3e3},3e3,c),!1}};async function W(s,e){return e&&$._set(s,E(e)),!0}return(s,e)=>{var m,b;const r=be("buttton");return((m=n(l).main)!=null?m:!1)||n(_)?(d(),M(U,{key:0,class:"column flex flex-center bgc-system rounded-borders q-py-sm"},{default:h(()=>{var u;return[n(_)=="permiting_gpsservice"?(d(),M(Oe,{key:0,isOpen:n(V),onEmitClick0:e[2]||(e[2]=c=>n(P)(c))},{default:h(()=>[t("div",Re,[Be,qe,t("div",Fe,[t("button",{class:"boxStyle-sm radius-xs bgc-lightsmoke-hovered font-negative",onClick:e[0]||(e[0]=c=>n(P)(!1))},Ke),t("button",{class:"boxStyle-sm radius-xs bgc-lightsmoke-hovered font-posetive",onClick:e[1]||(e[1]=c=>n(P)(!0))},Qe)])])]),_:1},8,["isOpen"])):(d(),f("p",Ze)),He,(u=n(l).main)!=null&&u?(d(),M(ee,{key:2,style:{color:"lightyellow"},class:"fontdstyle"},{default:h(()=>{var c;return[Q(A((c=n(a).content)!=null?c:"..."),1)]}),_:1})):w("",!0),ze]}),_:1})):(b=n(l).continueform)!=null&&b?(d(),M(U,{key:1,class:"flex flex-center"},{default:h(()=>[k(se,{class:"col-auto boxbstyle"},{default:h(()=>[k(oe,{class:"text-dark"},{default:h(()=>{var u;return[Q(A((u=n(a).content)!=null?u:"..."),1)]}),_:1}),k(oe,{class:"text-dark"},{default:h(()=>[k(ne,{flat:"",color:"red",label:"Cancel",onClick:e[3]||(e[3]=D(u=>n(o).phone=null,["prevent"]))}),k(ne,{flat:"",label:"Continue...",onClick:e[4]||(e[4]=D(u=>n(i)({loginform:0},0,""),["prevent"]))})]),_:1})]),_:1})]),_:1})):(d(),M(U,{key:2,persistent:"",class:"ccolumn"},{default:h(()=>{var u,c,S,T;return[t("div",Je,[t("div",We,[n(x).login=="init"?(d(),f("div",Xe,[Ye,et,t("div",tt,[t("div",ot,[t("div",nt,[t("h1",null,[t("i",st,A(n(o).phoneCode[1]),1)]),N(t("input",{class:"bgc-dl15 ccol-grow boxStyle-sm radius-sm",type:"Number","onUpdate:modelValue":e[5]||(e[5]=y=>n(o).phone=y),label:"Phone Number",onChange:e[6]||(e[6]=y=>n(L)("phone",n(o).phone))},null,544),[[O,n(o).phone]])])]),n(g).phone?(d(),f("p",at,A(n(g).phone),1)):w("",!0),(u=n(g).phone)!=null&&u?(d(),f("div",lt)):w("",!0)]),t("div",it,[k(r,{class:"boxStyle-sm radius-sm bgc-darkgrey bgc-darkgrey-hovered pointer",onClick:e[7]||(e[7]=D(y=>I(),["prevent"]))},{default:h(()=>[rt]),_:1}),k(r,{class:"boxStyle-sm radius-xs bgc-darkgrey bgc-darkishgrey-hovered pointer",onClick:e[8]||(e[8]=y=>n(x).login="create")},{default:h(()=>[ct]),_:1})])])):n(x).login=="create"?(d(),M(se,{key:1,class:"boxStyle-xxs bggreysmokey radiusxxs fontStyle-dense"},{default:h(()=>{var y,X,Y;return[ut,(X=(y=n(o).phoneCode)==null?void 0:y.length)!=null&&X?(d(),f("div",dt,[t("div",gt,[N(t("select",{class:"ccol-grow","onUpdate:modelValue":e[9]||(e[9]=v=>n(o).phoneCode=v),onChange:e[10]||(e[10]=v=>n(L)("phoneCode",n(o).phoneCode))},[(d(!0),f(we,null,ke(Object.values(n(Te)),v=>(d(),f("option",{key:v},A(v),1))),128))],544),[[Se,n(o).phoneCode]])]),t("div",yt,[t("div",mt,[ht,N(t("input",{class:"bgc-dl15 ccol-grow boxStyle-sm radius-sm",type:"Number","onUpdate:modelValue":e[11]||(e[11]=v=>n(o).phone=v),label:"Phone Number",onChange:e[12]||(e[12]=v=>n(L)("phone",n(o).phone))},null,544),[[O,n(o).phone]])]),t("div",vt,[ft,N(t("input",{class:"bgc-dl15 ccol-grow boxStyle-sm radius-sm",type:"password","onUpdate:modelValue":e[13]||(e[13]=v=>n(o).password=v),label:"Phone Number",onChange:e[14]||(e[14]=v=>n(L)("password",n(o).password))},null,544),[[O,n(o).password]])])]),n(g).phone?(d(),f("div",pt,A(n(g).phone),1)):w("",!0)])):w("",!0),(Y=n(g).phone)!=null&&Y?(d(),f("div",_t)):w("",!0),t("div",bt,[k(ee,{caption:""},{default:h(()=>[Q("Sale & Buy ")]),_:1})]),t("div",xt,[k(r,{class:"boxStyle-sm pointer radius-sm bgc-darkgrey font-smoke",onClick:e[15]||(e[15]=D(v=>I(),["prevent"]))},{default:h(()=>[St]),_:1}),k(r,{class:"boxStyle-sm pointer txtprimary",onClick:e[16]||(e[16]=v=>n(x).login="init")},{default:h(()=>[wt]),_:1})])]}),_:1})):n(x).login=="keyrequired"?(d(),f("div",kt,[Ct,Pt,(S=(c=n(o).phoneCode)==null?void 0:c.length)!=null&&S?(d(),f("div",Lt,[t("div",At,[Mt,N(t("input",{class:"bgc-dl15 ccol-grow boxStyle-sm radius-sm font-smoke",type:"password","onUpdate:modelValue":e[17]||(e[17]=y=>n(o).enrollKey=y),label:"Phone Number",onChange:e[18]||(e[18]=y=>n(L)("enrollKey",n(o).enrollKey))},null,544),[[O,n(o).enrollKey]])]),n(g).phone?(d(),f("div",$t,A(n(g).phone),1)):w("",!0)])):w("",!0),(T=n(g).phone)!=null&&T?(d(),f("div",jt)):w("",!0),t("div",Tt,[t("button",{onClick:e[19]||(e[19]=D(y=>I(),["prevent"])),class:"boxStyle-sm bgc-dl45 radius-xs pointer"},Nt),t("button",{onClick:e[20]||(e[20]=y=>n(x).login="create"),class:"BBoxStyle-flat"},Et)])])):w("",!0)]),Ot]),Vt]}),_:1}))}}};export{zt as default};
