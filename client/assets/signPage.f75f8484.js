import{h as y,q as pe,O as ge,P as me,R as fe,r as L,w as J,o as ve,S as ye,u as t,l as c,m as v,n as a,U as B,V as he,W as u,f as l,X as d,Q as M,Y as q,Z as A,p as w,_ as I,$ as O,a0 as E,a1 as S,a2 as D,a3 as V,a4 as G}from"./index.2d8c7734.js";import{d as we,Q as _}from"./moduleLoader.6f2f3520.js";import{Q as R}from"./QPage.ab9f6ff1.js";import{Q as W}from"./QSelect.2e1efa61.js";import{u as be,a as Ce,s as _e}from"./debugMixin.9a788b98.js";import{_ as xe,g as ke,a as Se,b as Pe,c as X}from"./geolocMixin.3d331abc.js";import{a as Le}from"./authenticatingStore.a969de4d.js";import{p as Me}from"./profileStore.28120b97.js";import{u as qe}from"./use-quasar.fae1d3a2.js";import{_ as U}from"./storeService.3eb6e8a7.js";import{u as Ae}from"./profileschemaValidator.d89fa149.js";import"./axios.05cf8750.js";const Ne=[y("g",{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)","stroke-width":"2"},[y("circle",{cx:"22",cy:"22",r:"6"},[y("animate",{attributeName:"r",begin:"1.5s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),y("animate",{attributeName:"stroke-opacity",begin:"1.5s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),y("animate",{attributeName:"stroke-width",begin:"1.5s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),y("circle",{cx:"22",cy:"22",r:"6"},[y("animate",{attributeName:"r",begin:"3s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),y("animate",{attributeName:"stroke-opacity",begin:"3s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),y("animate",{attributeName:"stroke-width",begin:"3s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),y("circle",{cx:"22",cy:"22",r:"8"},[y("animate",{attributeName:"r",begin:"0s",dur:"1.5s",values:"6;1;2;3;4;5;6",calcMode:"linear",repeatCount:"indefinite"})])])];var De=pe({name:"QSpinnerRings",props:ge,setup(F){const{cSize:$,classes:T}=me(F);return()=>y("svg",{class:T.value,stroke:"currentColor",width:$.value,height:$.value,viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"},Ne)}});const Te={class:"boxastyle text-orange bg-orange"},Ie=u("p",{class:"text-white"},"Allow Location Access.",-1),Oe=u("div",{class:"text-orange boxcstyle",style:{"max-width":"80vw"}},[d(" Would you like to "),u("ul",null,[u("li",null,"Get product before any one"),u("li",null,"Get product near you")]),d(" then, we need locations acccess to provide you with best exprience. ")],-1),$e={class:"justify-end row"},je={key:1},Qe=u("p",{class:"text-grey q-pa-sm",style:{position:"fixed",bottom:"5px",left:"5px"}}," Provided by mesh ",-1),Be={class:"col flex flex-center column q-gutter-md"},Ee={class:"row justify-evenly items-center"},Ve={key:0,class:"warnMessage"},Ge={key:1},Ue={class:"column justify-evenly items-center"},Ke={key:0,class:"warnMessage"},Re={key:1},Fe={class:"column justify-evenly items-center"},Ze={key:0,class:"warnMessage"},ze={key:1},He={class:"col-auto q-pa-none row q-gutter-xs fontastyle text-grey justify-end"},Je=u("p",{class:"text-grey q-pa-sm"},"Provided by mesh",-1),ht={__name:"signPage",setup(F){const{askForGPS:$,_thislocation:T,gpsStatus:x,allowGPS:Z,_initGeo:Y,getCurrentPosition:We}=xe(),{_debugObj:b,_validateThis:N}=Ae(),{Loadingpage:z,Loadingevent:j,Loading:Xe,DoneMessage:Ye,KnowthisMessage:et,WarnthisMessage:tt,timerLoadevent:p,timerDone:nt,timerInformthis:ot,timerError:at}=be(),ee=Le(),te=Me();Ce({title:"itService signing",titleTemplate:o=>`${o} - LoginPage`,script:{printJs:{type:"application/ld+json",innerHTML:"{  }"},ldJson:{type:"application/ld+json",innerHTML:"{ }"}}}),qe();const ne=fe();var n=L({});async function oe(){n.value={};try{n.value.phone=null,n.value.phoneCode=["",""],n.value.geolocation={},n.value.geolocation={lat:"",long:""},n.value.location={},n.value.location={country:"",city:"",street:""}}catch{}return!0}let C=L({login:"init",create:!1}),ae=L("Continue"),le="phone";const se=te,ie={createData:async function(){let o={};return n.value[le]==null?!1:await se.createData(n.value,o).then(e=>{var g;return(g=e.status)!=null&&g?e.data:!1}).catch(()=>!1)}};async function Q(){return Object.values(b.value).every(e=>e==null)&&re(),!0}L(0);var re=async function(){return console.log(`

Function - _manageStoreLogin --STORE Authentication Initializing [Phone,Stored_ID]---- 
`),await ee.useLogin(n.value).then(async o=>{var g,m,h,s,i,f,r;var e=(g=o.data)!=null?g:!1;return console.log(`
 LoginStatus = ${o.status} 
`),console.log(o.data,(m=j.continueform)!=null?m:!1),!((h=o.status)!=null&&h)||!e?!((s=n.value.phone)!=null&&s)||C.value.login=="init"?(await p({loginform:0},0,"Create New Account"),!0):(console.log(n.value,"ceating new"),C.value.login="create",await p({loginform:0},0,"Creating New Account !"),ie.createData().then(async k=>k&&Object.keys(k).length?(C.value.login="init",console.log(`

</Function - _manageStoreLogin -- New Profile Created -- 
`),ae.value="Log to Continue",p({loginform:0},0,"Account Created ! Login to continue.")):(n.value.phone=null,await p({loginform:0},0,"Phone Number Error !"))).catch(k=>p({main:0},0,"Try Refreshing, please ?"+k))):(i=e.enrollKey)!=null&&i&&e.enrollKey!=((f=n.value.enrollKey)!=null?f:!1)?(await p({main:5e3},0,"Use Correct key!"),C.value.login="keyrequired",!0):(n.value=Object.assign({},e),console.log(`
 User Acctype = ${n.value.acctype} 
`),(r=n.value.acctype)!=null&&r?(await p({main:0},0,"...."),await de("Home","Home","saleit"),p({loginform:0},0,"Routing Error. Check Connection Please ;")):(await p({main:5e3},0,"Access Error, Retrying.."),!1))}).catch(async o=>(console.log(`

</Function - _manageStoreLogin - 
`+o),await p({main:0},0,"Error Connecting.."+o)))};L(!1),L(null);let K=L([]),P=L(null);J(x,(o,e)=>((o=="finish"||o==null)&&ue(),!0)),J(T,(o,e)=>{var g,m;return o&&(n.value.geolocation=o,H("lat",B((g=o.lat)!=null?g:null)),H("long",B((m=o.long)!=null?m:null))),!0});async function ue(){var o,e,g,m,h,s,i,f,r;if(console.log("Setting Locations =<> GPS = ",Object.values((o=n.value.geolocation)!=null?o:{})," && timeZone = ",P.value),!P.value)return!1;if((g=(e=T.value)==null?void 0:e.lat)!=null&&g)n.value.geolocation=T.value;else{let k=((m=P.value.loc)!=null?m:"").split(",");console.error(k,"GPS ACESS IS BLOCKED, timeZone API OPtions ...."),k[1]&&(n.value.geolocation={lat:k[0],long:k[1]})}return n.value.phoneCode=K.value,n.value.location.country=(h=P.value.country)!=null?h:"",n.value.location.city=(s=P.value.city)!=null?s:"",n.value.location.street=(i=P.value.city)!=null?i:"",n.value.location.provinance=(f=P.value.region)!=null?f:"",n.value.currency=(r=K.value[2])!=null?r:U._get("currency","ETB"),console.log("Final =<> GPS = ",n.value.geolocation," && Locations = ",n.value.location),x.value==null||(x.value=null),!0}async function ce(){return console.log("Initiating the API or TimeZone Locations System"),x.value="Checking.... Connection.",K.value=await ke(),P.value=await Se(),x.value=await Pe(),new Promise(o=>{setTimeout(()=>{console.log("Terminating the API or TimeZone Locations System, && INIT GeoData Mining using GPS or TimeZone GeoData !!! !"),Y(),o(!0)},2e3)})}async function H(o,e){return e&&U._set(o,B(e)),!0}p({main:0},0,"..."),ve(async()=>(console.log(`

<0 ---------Mining Client DATA ---- 
`),await p({main:0},0,"mesh "),await ce().then(async o=>(console.log(`

<0 ---------Automatic Authentications Initiated---- 
`),await Q(),console.log(`

</0---------Automatic Authentications Terminated--- 
`),!0)).catch(async o=>await p({main:0},0,"Error Connecting.. "+o)))),ye(async()=>{console.log(`

<---------Defaulting Profile <--this--> ---- 
`),console.log(`

---------Mining User Device Informations [Phones, GeoLocations]---- 
`)}),oe();let de=async(o=null,e=null,g=!0)=>{var m,h,s;if(!o||!((m=n.value.acctype)!=null&&m))return!1;if(he[o]._auth&&!((h=n.value.enrolled)!=null&&h))return _thisOps.value="createPermission",!1;await p({main:0},0,"Loading "+o);try{let i=Object.assign({acctype:(s=n.value.acctype[g])!=null?s:""},U._reroute(o,e,_e.value=="Small"));return U._set("path",B(e)),await ne.push(i),p({main:1},1,"Ok, Loading "+o),!0}catch(i){return console.log(`

</Routing Functions of pathName = ${o}  == >> ${i} == >>  
`),p({main:3e3},3e3,i),!1}};return(o,e)=>{var g,m,h;return((g=t(j).main)!=null?g:!1)||t(x)?(c(),v(R,{key:0,class:"column flex flex-center bg-orange rounded-borders q-py-sm"},{default:a(()=>{var s;return[t(x)=="permiting_gpsservice"?(c(),v(we,{key:0,isOpen:t($),onEmitClick0:e[1]||(e[1]=i=>t(Z)(i))},{default:a(()=>[u("div",Te,[Ie,Oe,u("div",$e,[l(M,{flat:"",color:"green",onClick:e[0]||(e[0]=i=>t(Z)(!0))},{default:a(()=>[d(" Allow ")]),_:1})])])]),_:1},8,["isOpen"])):(c(),q("p",je,A(t(x)=="timezone"?"Connection Error":t(x)),1)),u("div",null,[l(De,{style:{color:"lightyellow"},size:"10em"})]),(s=t(j).main)!=null&&s?(c(),v(_,{key:2,style:{color:"lightyellow"},class:"fontdstyle"},{default:a(()=>{var i;return[d(A((i=t(z).content)!=null?i:"..."),1)]}),_:1})):w("",!0),Qe]}),_:1})):(h=(m=t(j))==null?void 0:m.continueform)!=null&&h?(c(),v(R,{key:1,class:"flex flex-center"},{default:a(()=>[l(E,{class:"col-auto boxbstyle"},{default:a(()=>[l(I,{class:"text-dark"},{default:a(()=>{var s;return[d(A((s=t(z).content)!=null?s:"..."),1)]}),_:1}),l(I,{class:"text-dark"},{default:a(()=>[l(M,{flat:"",color:"red",label:"Cancel",onClick:e[2]||(e[2]=O(s=>t(n).phone=null,["prevent"]))}),l(M,{flat:"",label:"Continue...",onClick:e[3]||(e[3]=O(s=>t(p)({loginform:0},0,""),["prevent"]))})]),_:1})]),_:1})]),_:1})):(c(),v(R,{key:2,persistent:"",class:"bg-white rounded-borders column"},{default:a(()=>[u("div",Be,[t(C).login=="init"?(c(),v(E,{key:0,style:{"min-width":"20%","max-width":"80vw"},flat:""},{default:a(()=>{var s,i,f;return[l(S,{class:"q-pa-sm q-gutter-sm"},{default:a(()=>[l(_,{class:"text-weight-bold text-orange text-h5"},{default:a(()=>[d("Continue to mesh")]),_:1}),l(_,{caption:""},{default:a(()=>[d("For Trader & Buyer")]),_:1})]),_:1}),(i=(s=t(n).phoneCode)==null?void 0:s.length)!=null&&i?(c(),v(S,{key:0,class:"q-pa-md row q-gutter-sm column"},{default:a(()=>[l(W,{round:"",outline:"",color:"orange","bottom-slots":"",filled:"",modelValue:t(n).phoneCode,"onUpdate:modelValue":e[4]||(e[4]=r=>t(n).phoneCode=r),options:Object.values(t(X)),input:t(N)("phoneCode",t(n).phoneCode),label:"Country",dense:!0,class:"col"},{prepend:a(()=>[l(D,{name:"place"})]),_:1},8,["modelValue","options","input"]),u("div",Ee,[l(D,{name:"phone"}),d("+"+A(t(n).phoneCode[1])+" ",1),V(u("input",{class:"boxcstyle",type:"Number","onUpdate:modelValue":e[5]||(e[5]=r=>t(n).phone=r),label:"Phone Number",onInput:e[6]||(e[6]=r=>t(N)("phone",t(n).phone))},null,544),[[G,t(n).phone]])]),t(b).phone?(c(),q("div",Ve,A(t(b).phone),1)):w("",!0)]),_:1})):w("",!0),(f=t(b).phone)!=null&&f?(c(),q("div",Ge)):w("",!0),l(S,{class:"q-py-xs"},{default:a(()=>[l(_,{caption:""},{default:a(()=>[d("Sale & Buy ")]),_:1})]),_:1}),l(I,{class:"text-dark bg-orange",onClick:e[7]||(e[7]=O(r=>Q(),["prevent"]))},{default:a(()=>[l(M,{class:"fontastyle",flat:"",label:"Continue"})]),_:1})]}),_:1})):t(C).login=="create"?(c(),v(E,{key:1,style:{"min-width":"20%","max-width":"80vw"},flat:""},{default:a(()=>{var s,i,f;return[l(S,{class:"q-pa-sm q-gutter-sm"},{default:a(()=>[l(_,{class:"text-weight-bold text-orange text-h5"},{default:a(()=>[d("Joining mesh")]),_:1}),l(_,{caption:""},{default:a(()=>[d("For Trader & Buyer")]),_:1})]),_:1}),(i=(s=t(n).phoneCode)==null?void 0:s.length)!=null&&i?(c(),v(S,{key:0,class:"q-pa-md row q-gutter-sm column"},{default:a(()=>[l(W,{round:"",outline:"",color:"orange","bottom-slots":"",filled:"",modelValue:t(n).phoneCode,"onUpdate:modelValue":e[8]||(e[8]=r=>t(n).phoneCode=r),options:Object.values(t(X)),input:t(N)("phoneCode",t(n).phoneCode),label:"Country",dense:!0,class:"col"},{prepend:a(()=>[l(D,{name:"place"})]),_:1},8,["modelValue","options","input"]),u("div",Ue,[u("div",null,[l(D,{name:"phone"}),V(u("input",{class:"boxcstyle",type:"Number","onUpdate:modelValue":e[9]||(e[9]=r=>t(n).phone=r),label:"Phone Number",onInput:e[10]||(e[10]=r=>t(N)("phone",t(n).phone))},null,544),[[G,t(n).phone]])]),u("div",null,[l(D,{name:"password"}),d(" password "),V(u("input",{class:"boxcstyle",type:"password","onUpdate:modelValue":e[11]||(e[11]=r=>t(n).password=r),label:"Phone Number",onInput:e[12]||(e[12]=r=>t(N)("password",t(n).password))},null,544),[[G,t(n).password]])])]),t(b).phone?(c(),q("div",Ke,A(t(b).phone),1)):w("",!0)]),_:1})):w("",!0),(f=t(b).phone)!=null&&f?(c(),q("div",Re)):w("",!0),l(S,{class:"q-py-xs"},{default:a(()=>[l(_,{caption:""},{default:a(()=>[d("Sale & Buy ")]),_:1})]),_:1}),l(I,{class:"text-dark bg-orange",onClick:e[13]||(e[13]=O(r=>Q(),["prevent"]))},{default:a(()=>[l(M,{class:"fontastyle",flat:"",label:"Join"})]),_:1})]}),_:1})):t(C).login=="keyrequired"?(c(),v(E,{key:2,style:{"min-width":"20%","max-width":"80vw"},flat:""},{default:a(()=>{var s,i,f;return[l(S,{class:"q-pa-sm q-gutter-sm"},{default:a(()=>[l(_,{class:"text-weight-bold text-orange text-h5"},{default:a(()=>[d("Joining mesh")]),_:1}),l(_,{caption:""},{default:a(()=>[d("For Traders Only")]),_:1})]),_:1}),(i=(s=t(n).phoneCode)==null?void 0:s.length)!=null&&i?(c(),v(S,{key:0,class:"q-pa-md row q-gutter-sm column"},{default:a(()=>[u("div",Fe,[u("div",null,[l(D,{name:"password"}),d(" Log key "),V(u("input",{class:"boxcstyle",type:"password","onUpdate:modelValue":e[14]||(e[14]=r=>t(n).enrollKey=r),label:"Phone Number",onInput:e[15]||(e[15]=r=>t(N)("enrollKey",t(n).enrollKey))},null,544),[[G,t(n).enrollKey]])])]),t(b).phone?(c(),q("div",Ze,A(t(b).phone),1)):w("",!0)]),_:1})):w("",!0),(f=t(b).phone)!=null&&f?(c(),q("div",ze)):w("",!0),l(S,{class:"q-py-xs"},{default:a(()=>[l(_,{caption:""},{default:a(()=>[d("Contact us: +251 091232344 ")]),_:1})]),_:1}),l(I,{class:"text-dark bg-orange",onClick:e[16]||(e[16]=O(r=>Q(),["prevent"]))},{default:a(()=>[l(M,{class:"fontastyle",flat:"",label:"Login"})]),_:1})]}),_:1})):w("",!0),u("div",He,[t(C).login=="init"?(c(),v(M,{key:0,flat:"",dense:!0,onClick:e[17]||(e[17]=s=>t(C).login="create")},{default:a(()=>[d(" Create ")]),_:1})):(c(),v(M,{key:1,flat:"",dense:!0,onClick:e[18]||(e[18]=s=>t(C).login="init")},{default:a(()=>[d(" Already Have Account ? ")]),_:1}))])]),Je]),_:1}))}}};export{ht as default};
