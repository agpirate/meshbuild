var Ps=Object.create;var ae=Object.defineProperty;var xs=Object.getOwnPropertyDescriptor;var Ms=Object.getOwnPropertyNames;var Us=Object.getPrototypeOf,Es=Object.prototype.hasOwnProperty;var Ws=(e,t)=>()=>(e&&(t=e(e=0)),t);var Ge=(e,t)=>{for(var r in t)ae(e,r,{get:t[r],enumerable:!0})},Je=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Ms(t))!Es.call(e,i)&&i!==r&&ae(e,i,{get:()=>t[i],enumerable:!(n=xs(t,i))||n.enumerable});return e};var b=(e,t,r)=>(r=e!=null?Ps(Us(e)):{},Je(t||!e||!e.__esModule?ae(r,"default",{value:e,enumerable:!0}):r,e)),Ts=e=>Je(ae({},"__esModule",{value:!0}),e);var vs={};Ge(vs,{default:()=>$a});var bs,$a,Ss=Ws(()=>{bs=require("quasar/wrappers"),$a=(0,bs.ssrMiddleware)(({app:e,resolve:t,render:r,serve:n})=>{e.get(t.urlPath("*"),(i,a)=>{a.setHeader("Content-Type","text/html"),r({req:i,res:a}).then(s=>{a.send(s)}).catch(s=>{s.url?s.code?a.redirect(s.code,s.url):a.redirect(s.url):s.code===404?a.status(404).send("404 | Page Not Found"):a.status(500).send("500 | Internal Server Error")})})})});var Ba={};Ge(Ba,{default:()=>Ta});module.exports=Ts(Ba);var z=require("path"),_s=require("vue/server-renderer"),Ns=b(require("serialize-javascript")),Is=b(require("./render-template.js")),ge=b(require("./quasar.manifest.json")),Os=b(require("./server/server-entry.js"));var C=require("quasar/wrappers");var re=require("mongoose"),Xe="mongodb://0.0.0.0:27017/saleit",Ve="mongodb://0.0.0.0:27017/profile",Ye="mongodb://0.0.0.0:27017/chat";try{I=re.mongoose.createConnection(Ve,{}),console.log("Connecting to saleitProfile DataBases....")}catch(e){console.log("Error Connecting to saleitProfile DB_"+e),process.exit(1)}var I,Da=I.connection;I.once("open",e=>{console.log(`saleitProfile Database connected: ${Ve}`)});I.on("error",e=>{console.error(`saleitProfile DB connection error: ${e}`)});try{k=re.mongoose.createConnection(Ye,{}),console.log("Connecting to saleitProfile DataBases....")}catch(e){console.log("Error Connecting to saleitProfile DB_"+e),process.exit(1)}var k,Aa=k.connection;k.once("open",e=>{console.log(`saleitProfile Database connected: ${Ye}`)});k.on("error",e=>{console.error(`saleitProfile DB connection error: ${e}`)});try{j=re.mongoose.createConnection(Xe,{}),console.log("Connecting to saleit DataBases....")}catch(e){console.log("Error Connecting to saleitProfile DB_"+e),process.exit(1)}var j,Ka=j.connection;j.once("open",e=>{console.log(`saleit Database connected: ${Xe}`)});j.on("error",e=>{console.error(`Procurment DB connection error: ${e}`)});var be=require("mongoose"),La=require("vue"),Ga=be.mongoose.Schema,Ze=be.mongoose.Types.ObjectId;var qe={group:{type:String,default:"client"},profile:{group:{type:String,default:"client",role:{xrole:[],clients:["likes","comment"],upgraded:["clients","likes","comment"],creatorrw:2001,creator:2001,admin:2001},enum:["upgraded","client","creator","admin","xrole"]},role:[{type:String,default:"",enum:["likes","comments","clients","*","***",""]}],capability:{type:String,default:"1010"},accstage:{type:Array,default:[]}},profileMeta:{type:String,default:"client",role:{client:["clients","likes","comments"]},enum:["upgraded","client","creator","admin"]},saleit:{group:{type:String,default:"client",role:{xrole:[],client:["likes","comments","clients"],upgraded:["clients","likes","comments"],creatorrw:2001,creator:2001,admin:2001},enum:["upgraded","client","creator","admin","xrole"]},role:[{type:String,default:"",enum:["likes","comments","clients","*","***",""]}],capability:{type:String,default:"1010"},accstage:{type:Array,default:[]}},saleitClient:{group:{type:String,default:"client",role:{xrole:[],client:["likes","comments","clients"],upgraded:["clients","likes","comments"],creatorrw:2001,creator:2001,admin:2001},enum:["upgraded","client","creator","admin","xrole"]},role:[{type:String,default:"",enum:["likes","comments","clients","*","***",""]}],capability:{type:String,default:"1010"},accstage:{type:Array,default:[]}},saleitChat:{group:{type:String,default:"client",role:{xrole:[],client:["likes","comments","clients"],upgraded:["clients","likes","comments"],creatorrw:2001,creator:2001,admin:2001},enum:["upgraded","client","creator","admin","xrole"]},role:[{type:String,default:"",enum:["likes","comments","clients","*","***",""]}],capability:{type:String,default:"1010"},accstage:{type:Array,default:[]}},publicChat:{group:{type:String,default:"client",role:{xrole:[],client:["likes","comments","clients"],upgraded:["clients","likes","comments"],creatorrw:2001,creator:2001,admin:2001},enum:["upgraded","client","creator","admin","xrole"]},role:[{type:String,default:"",enum:["likes","comments","clients","*","***",""]}],capability:{type:String,default:"1010"},accstage:{type:Array,default:[]}}};var Qe={_stage_:{type:Number,default:1,$ifNull:1},profile:{type:Array,default:["/saleitgr/saleitpng.png"],$ifNull:["/saleitgr/saleitpng.png"],vtype:"file"},cover:{type:String,default:"/saleitgr/saleitpng.png",$ifNull:"/saleitgr/saleitpng.png",vtype:"file"},profileMeta:{type:Array,default:[{mimetype:"",encoding:"",originalname:"",destination:"",fieldname:"",filename:"",size:"",path:"",geoLocation:""}],ifNull:[{mimetype:"",encoding:"",originalname:"",destination:"",fieldname:"",filename:"",size:"",path:"",geoLocation:""}]},userName:{type:String,Vtype:"String",default:"",$ifNull:""},name:{type:String,Vtype:"String",default:"",$ifNull:"",validRuleset:"[ val => val && val.length > 0 || 'Please type something']"},lastName:{type:String,Vtype:"String",default:"",$ifNull:""},password:{type:String,vtype:"String",default:0,$ifNull:0},enrollKey:{type:String,vtype:"String",default:"",$ifNull:""},phone:{type:Number,vtype:"Number",default:0,$ifNull:0,required:!0,index:{unique:!0,dropDups:!0,length:10}},phoneCode:{type:Array,vtype:"Array",default:["",""],$ifNull:["",""],required:!0},location:{country:{type:String,default:"",$ifNull:""},provinance:{type:String,default:"",$ifNull:""},city:{type:String,default:"",$ifNull:""},street:{type:String,default:"",$ifNull:""}},geolocation:{lat:{type:Number,vtype:"Number",default:0,$ifNull:0},long:{type:Number,vtype:"Number",default:0,$ifNull:0}},verified:{type:String,Vtype:"String",default:"0",$ifNull:"",enum:["0","1"]},cart:{type:Array,Vtype:"Array",default:[],$ifNull:[]},contacts:{type:Array,vtype:"Array",default:[],$ifNull:[],index:{length:10}},queryWeight:{1:{type:Array,Vtype:"Array",default:[1,50,50,50],$ifNull:[1,50,50,50]},2:{type:String,Vtype:"String",default:"1.1.1.1",$ifNull:"1.1.1.1"},3:{type:String,Vtype:"String",default:"1.1.1.1",$ifNull:"1.1.1.1"}},acckey:{type:Ze,ref:"threeas"},acckey2:{type:Ze,ref:"threeas"}},et={userID:{type:String,default:""},location:{type:String,default:""},activities:{name:{type:String,default:""},amount:{type:Number,vtype:"Number",default:0}},interests:{type:String,default:""}};function S(e){var t=new Date-new Date(e),r=Math.floor(t/(1e3*60*60*24));if(r)return new Date(e).toLocaleString();var n=Math.floor(t/(1e3*60*60)),i=Math.floor(t/(1e3*60));return n%=24,i%=60,(n?n+" H,  ":"")+(i?i+" M ago":n?"":"just now")}var st=require("mongoose"),ve=st.mongoose.Schema,Se=(e=null)=>new Date(e).toLocaleString(),at=new ve(qe,{timestamps:Se});at.method("toJSON",function(){let{__v:e,_id:t,...r}=this.toObject();return r.id=t,r});var rt=new ve(Qe,{timestamps:Se});rt.method("toJSON",function(){let{__v:e,_id:t,...r}=this.toObject();return r.id=t,r.fupdatedAt=S(r.updatedAt),r});var nt=new ve(et,{timestamps:Se});nt.method("toJSON",function(){let{__v:e,_id:t,...r}=this.toObject();return r.id=t,r.fupdatedAt=S(r.updatedAt),r});var y;I.models.threeas??!1?console.log("Collections alread existed on"):(y=I.model("threeas",at),console.log(y,"New Created !"));var h;I.model.profileModel?console.log("assets Collections already existed on Procurment"):(h=I.model("profiles",rt),console.log(h,"New Created !"));var tt;I.model.profileMetaModel?console.log("assets Collections already existed on Procurment"):(tt=I.model("profileMetas",nt),console.log(tt,"New Created !"));var it=require("mongoose");ObjectId=it.mongoose.Types.ObjectId;var Bs=require("jsonwebtoken");async function Fs(e,t,r){console.log(`

 Authentication Middlewares =========> Entering 
`);let n=e.cookies??!1,i=n?n?.access_token??!1:!1;console.log(`Cookies Finding ; Option 1 : Cookies = ${i} 
`);var a=e.headers??!1;if(typeof a=="string"){let p=a;try{a=JSON.parse(p)}catch{}}let s=a.authorization??!1,l=a.cookie??!1;if(!i){let p="";s?(s=s.split(" ")??null,p=s.length<2?null:s[1],console.log(`Cookies Finding ; Option 2 : autorization Header-Cookies = ${p} 
`)):(p=l?l.replace("access_token= ",""):"",console.log(`Cookies Finding ; Option 2 : cookie Header-Cookies = ${l} 
`)),i=p?.trim()??i}if(!i)return console.log(`Cookies Finding Error ; No Cookie Founded : Exit!
`),t.status(401).send("Access forbidden ? _cookies failed");console.log(`Cookies Finding Final Passed ;  = ${i} 
`);let o=null;var u=a?.acckey??null,c=a?._iss??null,f=a?._issmodal??null,d=a?.acckey??null;try{let p=Bs.verify(i,"itserviceKey");console.log(`Token Decoded For = 
`),console.log(p),p&&(o=p.userID??o,u=p.acckey??u)}catch{console.log(`Token Decoded Error = 
`)}if(o)await h.findOne({_id:new ObjectId(o)}).then(p=>{if(p)u=p.acckey??!1,d=p.queryWeight??!1;else return t.status(403).send("userID ; Access forbidden")}).catch(()=>t.status(403).send("userID ; Access forbidden"));else return t.status(401).send("Access forbidden ? userID failed");try{c=null,f=f??"saleit",console.log(`== Role & Permission Acckey ${u?"is OK":"No"} && Target Modal is = ${f??"No Model_Specified"}  
`),u&&f&&await y.findOne({_id:new ObjectId(u)}).then(p=>(p&&(c=p[f]??null),!0)).catch(()=>!0),console.log(`== Role & Permission  = Null for Modal = ${f??"No Model ?"} && ${c} 
`)}catch(p){return console.log(p),!0}return c?(e.userID=o,e.issId=u,e.issrole=c,e.queryWeight=d,e.params.lat=a.lat??"",e.params.long=a.long??"",e.location={lat:a.lat??"",long:a.long??""},console.log(`Ending MWare UserID = ${o} && Acckey = ${u} 
`),r(),!0):t.status(403).send("UserRole ; Access forbidden")}var g=Fs;var ut=require("mongoose"),ct=b(require("jsonwebtoken")),dt=require("express"),lt=ut.mongoose.Types.ObjectId,ft=(0,dt.Router)(),Ds={"Content-Type":"application/json","Content-Length":"5000",ETag:"Roaw"},ot=["id"];var ne=["phone","id"];ft.post("/login",async(e,t)=>{let r=e.body??{},n=Object.keys(r),i=ne.every(s=>new Set(n).has(s));if(!n.length&&!i)return t.status(404).send("createKey","is Null");let a={};for(let s in ne){let l=ne[s],o=r[l]??!1;if(console.log(l,`
`,ne,ot.includes(l),o),o)if(ot.includes(l))try{a._id=new lt(o)}catch{}else a[l]=(l=="phone"&&o.length==10,o)}delete a.phoneCode,console.log(a,`findbyyyyyy

`,r);try{return await h.findOne(a).then(async s=>{if(console.log(`

 User Authentication Profile == ${s??null},, for userID = 
`),console.log(a),s&&Object.keys(s).length){console.log(`
 User Acckey  == ${s.acckey??!1}  <= ${s.acckey??!1?"Yes":"No"} < == >User Already Existed ?
`);let l=new lt(s.acckey);return await y.findOne({_id:l}).then(o=>{if(console.log(`
 Checked :_ User Acckey / ID == ${o?.id??!1}  <= < == >User Already Existed ?
`),o){s=s.toObject()??!1;var u=null;try{u=ct.default.sign({id:s._id,userID:s._id,acckey:o.id},"itserviceKey",{expiresIn:"1d"})}catch{}if(!u)return t.status(501).json({data:"Token Generating Error"});let c=24*60*60*1e3;return t.setHeader("authorization",`Bearer ${u}`),t.cookie("access_token",u,{maxAge:864e5,httpOnly:!0,domain:e.hostname,secure:!1,signed:!1,sameSite:"lax"}),t.setHeader("acctype",JSON.stringify(o)),t.setHeader("token",u),t.setHeader("role",o.profile.group??null),s.acctype=o,s.id=s._id,console.log(e.hostname,`
 Final Checked :  == ${s.id??!1}  <= < == >User Authenticated ? with token 
 ${u}`),t.set(Ds),t.status(200).send(s)}return t.status(501).json(o)}).catch(o=>(console.log(`
 ${o}`),t.status(501).send(o)))}else return t.status(202).send(s)}).catch(s=>t.status(404).send(s))}catch(s){return t.status(505).send(s)}});var pt=ft;var gt=require("mongoose"),As=require("jsonwebtoken");ObjectId=gt.mongoose.Types.ObjectId;async function Ks(e,t,r){var n=e.cookies??e.headers.cookie??!1,i=e.headers??!1;let a=n?.access_token??!1;if(typeof i=="string"){let d=i;try{i=JSON.parse(d)}catch{}}let s=i.authorization??!1;if(s&&(a=s.split('"')[1]?.trim()??a),!(a&&i))return t.status(403).send("Access forbidden");let l=i.id??null;var o=i?.acckey??null,u=i?._iss??null,c=i?._issmodal??null,f=i?.acckey??null;try{let d=As.verify(a,"itserviceKey");(!l||d)&&(l=d.userId??l,o=d.acckey??o),console.log(l,"bearToken-------------->")}catch{}if(l)await h.findOne({_id:new ObjectId(l)}).then(d=>{if(d)o=d.acckey??!1,f=d.queryWeight??!1;else return t.status(403).send("Access forbidden")}).catch(()=>t.status(403).send("Access forbidden"));else return t.status(403).send("Access forbidden");return e.userId=l,e.issId=o,e.issrole=u,e.queryWeight=f,o&&c?await y.findOne({_id:new ObjectId(o)}).then(d=>(d?u=d[c]:u=null,!0)).catch(()=>!0):(u=null,e._issrole=u,r(),!0)}var yt=Ks;var vt=require("mongoose"),St=b(require("jsonwebtoken")),wt=require("express");var w=async function(e,t=[],r={},n=100,i={createdAt:-1},a=0){try{return await e.find({$or:t},r).sort(i).skip(Number(a)).limit(Number(n)).then(s=>(console.log(s.length,"or Fetching..","skips =",a,"limits =",n,"sortBy =",i),s?{status:200,data:s}:{status:200,data:s})).catch(s=>({status:501,data:s}))}catch(s){return{status:500,data:s}}},v=async function(e,t=[],r={},n=100,i={createdAt:-1},a=0){try{return await e.find({$and:t},r).sort(i).skip(Number(a)).limit(Number(n)).then(s=>(console.log(s.length,"and& Fetching..","skips =",a,"limits =",n,"sortBy =",i),s?{status:200,data:s}:{status:200,data:s})).catch(s=>({status:501,data:s}))}catch(s){return{status:500,data:s}}},E=async function(e,t=[],r={},n=100,i={createdAt:-1}){try{return await e.find({$or:t},r).sort(i).limit(n).then(a=>(console.log(a.length,"Or Fetching"),a?{status:200,data:a}:{status:200,data:a})).catch(a=>({status:501,data:a}))}catch(a){return{status:500,data:a}}},R=async function(e,t){try{return await e.findByIdAndDelete(t).then(r=>r&&Object.keys(r).length?{status:200,data:r}:{status:200,data:null}).catch(r=>({status:501,data:r}))}catch(r){return{status:500,data:r}}};var mt=require("mongoose"),we=mt.mongoose.Types.ObjectId;var Hs=["id","Id","ID"],Ls=["saleitID","userID"];var zs=["geoSearch","queryOperator","returnWat","limits","skips","sortBy","upload","timestamp","latest","lat","long","paginationID"];async function m(e={}){if(!e)return[!1,!1,!1,!1,!1];var t={};let r=[],n=e.limits??0,i=e.skips??0,a=e.sortBy??{createdAt:-1};return console.log(`
 Incoming Query 
`,e),[Object.keys(e).length?await Gs(e):[{}],r,n,a,i]}var ie=3;async function Gs(e={}){let t=[];console.log(`
 Incoming Cleared Query 
`,e);let r=e.geoSearch??"off",n=(e.queryOperator??"-or").split("-");for(let a in e){let s=a;var i=e[a]??"";if(zs.includes(a))continue;try{i=isNaN(Number(i))?i:Number(i)}catch{}let l={};if(s=="qweight"){let o=parseInt(i[1]),u=parseInt(i[2]);console.log(`
 `,n[0]),n[0]=="productSpecific"?t=[{catagoryScore:o==0?{$gte:0}:o},{usageScore:u==0?{$gte:0}:u}]:n[0]=="userSpecific"?t=[{catagoryScore:{$gte:o-o/ie,$lte:o+o/ie}},{usageScore:{$gte:u-u/ie,$lte:u+u/ie}}]:i.length==5&&(t=[{catagoryScore:{$gte:0}},{usageScore:{$gte:0}}],t.push({trendScore:{$lte:1e4}}));break}else if(Hs.includes(a))try{l._id=new we(i)}catch{}else if(Ls.includes(a))try{l[a]=new we(e[a]??"")}catch{}else l[a]=typeof i=="string"?{$regex:i,$options:"i"}:i;t.push(l)}if(e.paginationID??!1)try{t.push({_id:{$gt:new we(e.paginationID)}})}catch{console.log(`
 Error Formating Pagination ID ...`)}if(r!="off"){let s={nearMe:7,myCity:5,myCountry:0,off:0}[r];t.push({$expr:{$regexMatch:{input:{$toString:"$geolocation.long"},regex:"^"+String(e.long).slice(0,s)}}}),t.push({$expr:{$regexMatch:{input:{$toString:"$geolocation.lat"},regex:"^"+String(e.lat).slice(0,s)}}})}return t.length?t=t.filter(a=>Object.keys(a).length):t=[{}],console.log(`
Yield Query 
`,t),t}var le={};async function _e(e,t,r=!1,n=!1){console.log(`
============= Document Update ============= updateKey =`+r+" <<START>>"),le={};for(let i in t)try{let a=t[i],s={};r??!1?s[r]=a[r]??null:s={updatedAt:null},await e.findOne(s).then(async l=>{if(l==null)l=new e(a),console.log("Creating Document =",l.updateKey??"",s," ;;Newly Creating Process Debug",l);else{if(!r)return!1;l=Object.assign(l,a),console.log("Updating Document =",l.updateKey??"",s,`;
 Incoming AccKey =`,l)}return await l.save().then(o=>(console.log("Final Acckey =",o.acckey??o._id,""),o=o.toObject()??!1,o&&Object.keys(o).length?(r&&(le[s[r]]=o),console.log(`
============= Document Update ============ END Success `+i),{status:200,data:le}):{status:501,data:o})).catch(o=>(console.log(o,"Creating Process Debug Error"),{status:500,data:o}))}).catch(l=>({status:500,data:l}))}catch(a){return{status:500,data:a}}return{status:200,data:le}}var Js=[{group:"client",saleit:{group:"client",role:["likes","comments","clients"],capability:"02220",accstage:[1,3,4,5]},profile:{group:"client",role:[""],capability:"22220",accstage:[1,3,4,5]},profileMeta:"client",saleitClient:{group:"client",role:[""],capability:"22220",accstage:[1,3,4,5]},saleitChat:{group:"client",role:[""],capability:"22220",accstage:[1,3,8]},publicChat:{group:"client",role:[""],capability:"22220",accstage:[1,3,8]}},{group:"upgraded",profile:{group:"upgraded",role:[""],capability:"22220",accstage:[1,3,4,5]},profileMeta:"upgraded",saleitClient:{group:"upgraded",role:[""],capability:"22220",accstage:[1,3,4,5]},saleitChat:{group:"upgraded",role:[""],capability:"22220",accstage:[1,3,8]},publicChat:{group:"upgraded",role:[""],capability:"22220",accstage:[1,3,8]}},{group:"creator",saleit:{group:"creator",role:[""],capability:"22220",accstage:[1,2,3,4,5]},profile:{group:"creator",role:[""],capability:"22220",accstage:[1,3,4,5]},profileMeta:"creator",saleitClient:{group:"creator",role:[""],capability:"22220",accstage:[1,2,3,4,5]},saleitChat:{group:"creator",role:[""],capability:"22220",accstage:[1,3,8]},publicChat:{group:"creator",role:[""],capability:"22220",accstage:[1,3,8]}},{group:"admin",saleit:{group:"admin",role:[""],capability:"22220",accstage:[1,2,3,4,5]},profile:{group:"admin",role:[""],capability:"22220",accstage:[1,3,4,5]},profileMeta:"admin",saleitClient:{group:"admin",role:[""],capability:"22220",accstage:[1,3,8]},saleitChat:{group:"admin",role:[""],capability:"22220",accstage:[1,3,8]},publicChat:{group:"admin",role:[""],capability:"22220",accstage:[1,3,2,3]}}],Xs="group",ht="creator",Vs="phone";async function bt(){return console.log(`

-==--------------------------------Role & Permissions Managment---------------START`),await _e(y,Js,Xs).then(async e=>{console.log(`
`+Object.keys(e.data),` = Sum of Role and Permissions <=>
`);for(let i in e.data)console.log(`
 Role Name = ${i} && acckey = ${e.data[i]._id}
`);let t=null;if(e.status==200)t=e.data[ht]??!1;else return!0;console.log(`
 Creating Sample User = ${ht} && with accKey ${t._id??null}`);let r=[{name:"root",lastName:"root",phone:"123456787",acckey:t?new ObjectId(t._id):null}],n=await _e(h,r,Vs);return console.log(`User Creating  ====>> ${n.status==200?"success":"Error"}`),console.log(`---------------------------------Role & Permissions Managment---------------END

`),!0})}var Ys=vt.mongoose.Types.ObjectId;bt();var W=(0,wt.Router)(),Ie=y,oe="/permission",ue={"Content-Type":"application/json","Content-Length":"5050",ETag:"Roaw","Set-Cookie":["type=ninja","language=javascript"]},Ne="phone";W.post("/add",yt,async(e,t)=>{let r={},n=e.body??{};if(n[Ne]??!1)r[Ne]=n[Ne]??!1;else return t.status(303).send("req.body is null");let i=await y.findOne({group:n.upgrade??"creator"});if(i)modelQA.acckey=i._id;else return{status:303,data:"Permission Assign Error"};try{return await h.findOne(r).then(async a=>{if(a&&Object.keys(a).length){let s=new Ys(a.acckey);return await y.findOne({_id:s}).then(l=>{if(l){let o=St.default.sign({userID:a.id,acckey:l.id},"itserviceKey",{expiresIn:"1h"});return t.setHeader("Authorization",`Bearer ${o}`),t.cookie("access_token",o,{maxAge:9e5,httpOnly:!0,secure:!1,signed:!1}),t.setHeader("threea",JSON.stringify(l)),t.setHeader("token",JSON.stringify(o)),t.setHeader("role",l.profile.group),t.status(200).send(JSON.stringify(a))}return t.status(404).json("Permission Error")}).catch(()=>t.status(404).json({}))}else return t.status(202).send(null)}).catch(a=>t.status(404).send(a))}catch(a){return t.status(505).send(a)}});var Zs="group";W.put(oe,g,async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1];if(!n)return t.status(404).send({message:"NullData(P +token) Received."});let a={};return a=e.body??{},Object.keys(a).length==0&&(a[Zs]??!0)?t.status(404).send(""):(a.userID=n,documentCupdate(y,[a],"group").then(s=>(t.set(ue),t.status(s.status).send(s.data))))});W.get(oe+"s",g,async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],a=e.query??e.params??{};Object.keys(a).length==0;let[s={},l=[],o=100]=await m(a);try{let u=await w(Ie,s,l,o);return u.status==200?(t.set(ue),t.status(u.status).send(u.data)):t.status(404).send("(Srv):- _read303;but, "+u.data)}catch{return t.status(505).send("(Srv);- _read505")}});W.get(oe,g,async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],a=e.query??e.params??{};Object.keys(a).length==0;let[s={},l=[],o=100]=await m(a);try{let u=await v(Ie,s,l,o);return u.status==200?(t.set(ue),t.status(u.status).send(u.data)):t.status(404).send("(Srv):- _readf202;but, "+u.data)}catch{return t.status(505).send("(Srv);- _readf505")}});W.delete(oe,g,async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1];if(!n)return t.status(404).send({message:"NullData(P) Received."});let a=e.query??e.params??{};Object.keys(a).length==0;try{let s=await R(Ie,a.id);return s.status==200?(t.set(ue),t.status(s.status).send(s.data)):t.status(404).send("(Srv):- _del202;but, "+s.data)}catch{return t.status(505).send("(Srv);- _del505")}});var _t=W;var kt=require("express"),G=b(require("multer")),jt=require("mongoose");var Sr=require("multer");async function T(e){let t={};for(let s in e){t[s]=[],t[s+"Meta"]=[];var r=e[s];for(let l in r)try{var n=r[l],i="/"+n.fieldname+"/"+n.filename,a={thefilePath:i,geoLocation:"0000000000xyz"};t[s][l]=a.thefilePath,t[s+"Meta"][l]=a}catch{return!1}}return t}async function Nt(e){let t={};var r={thefilePath:"/"+e.fieldname+"/"+e.filename,geoLocation:"0000000000xyz"};return t[e.fieldname]=r.thefilePath,t[e.fieldname+"Meta"]=r,t}var It=jt.mongoose.Types.ObjectId,F=(0,kt.Router)(),P=h,J="/profile",B={"Content-Type":"application/json","Content-Length":"5050",ETag:"Roaw","Set-Cookie":["type=ninja","language=javascript"]};var Ot={"application/pdf":"pdf","application/zip":"zip","text/csv":"csv","text/pdf":"pdf","text/json":"json","image/jpeg":"jpeg","image/png":"png","image/svg+xml":"svg+xml","image/webp":"webp","video/mp4":"mp4","video/mkv":"mkv"},ke=()=>{var e="";return{storage:G.default.diskStorage({filename:(t,r,n)=>{let i=Ot[r.mimetype];e=r.originalname.split(".")[0].split(" ")[0]+"-"+new Date().getTime()+"."+i,n(null,e)},destination:(t,r,n)=>{n(null,"./public/"+r.fieldname)},path:(t,r,n)=>{n(null,"/"+r.fieldname+"/"+e)}}),limits:{fileSize:1e6*5},fileFilter:(t,r,n)=>{if(Ot[r.mimetype])n(null,!0);else return n(null,!1)}}},qs={updatedAt:null},ce="phone",Oe="id";F.post(J,async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],a=e.query?e.query:e.params;var s=a?.file_??!1;let l={};console.log(`
<==> Profile API Creating New User == Parameters => ${a}`);try{if(s)(s.files??!1)&&(0,G.default)(ke()).fields([{name:s.files,maxCount:4}])(e,t,async o=>{if(l=e.body??{},o)return t.status(303).send({message:"Uploading Error"+o});{let u=e.files??!1;if(u){let c=await T(u);l[s.files]=c[s.files]}}return l.userID=n,await Ct(l).then(u=>t.status(u.status).send(u.data))});else return l=e.body??{},(l[ce]??null)==null?t.status(404).send(""):(l.userID=n,await Ct(l).then(o=>(console.log(`
Creating Status == ${o.data}

`,l),t.set(B),t.status(o.status).send(o.data))))}catch(o){return t.status(401).send(o)}});F.put(J,g,async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1];if(!n)return t.status(404).send({message:"NullData(P +token) Received."});var s=(e.query?e.query:e.params)?.file_??!1;let l={};try{if(s)s.files??!1?(0,G.default)(ke()).fields([{name:s.files,maxCount:4}])(e,t,async o=>{if(l=e.body??{},o??!1)return t.status(303).send({message:"Uploading Error"+o});{let u=e.files??!1;if(console.log(`
(Multiple) File Existed as `,u,o),u){let c=await T(u);l[s.files]=c[s.files]}else return t.status(303).send({message:"Uploading Error"})}return(l[Oe]??null)==null?t.status(404).send(""):(l.userID=n,await Ce(l).then(u=>(t.set(B),t.status(u.status).send(u.data))))}):(s.file??!1)&&(0,G.default)(ke()).single(s.file)(e,t,async o=>{if(l=e.body??{},o??!1)return t.status(303).send({message:"Uploading Error"+o});{let u=e.file??!1;if(console.log(`
(Single) File Existed as `,u,o),u){let c=await Nt(u);l[s.file]=c[s.file]}else return t.status(303).send({message:"Uploading Error"})}return(l[Oe]??null)==null?t.status(404).send(""):(l.userID=n,await Ce(l).then(u=>(t.set(B),t.status(u.status).send(u.data))))});else return l=e.body??{},(l[Oe]??null)==null?t.status(404).send(""):(l.userID=n,await Ce(l,"UpdateRowItem",l.onplaySubops??!1).then(o=>(t.set(B),t.status(o.status).send(o.data))))}catch(o){return t.status(401).send(o)}});F.get(J+"s",g,async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],a=e.query??e.params,[s={},l=[],o=100,u={createdAt:-1},c=0]=await m(a);if(!Object.keys(s).length)return t.status(404).send({message:"NullData(P) Received."});let f=(a.queryOperator??"-or").split("-");try{let d=f[1]=="and"?await v(P,s,l,o,u):await w(P,s,l,o,u);return d.status==200?t.status(d.status).send(d.data):t.status(404).send("(Srv):- _read303;but, "+d.data)}catch{return t.status(505).send("(Srv);- _read505")}});F.get(J,g,async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],a=e.query??e.params,[s={},l=[],o=100,u={createdAt:-1},c=0]=await m(a);if(!Object.keys(s).length)return t.status(404).send({message:"NullData(P) Received."});let f=(a.queryOperator??"-or").split("-");try{let d=f[1]=="and"?await v(P,s,l,o,u):await E(P,s,l,o,u);return d.status==200?(t.set(B),t.send(d.data)):t.status(404).send("(Srv):- _readf202;but, "+d.data)}catch{return t.status(505).send("(Srv);- _readf505")}});F.delete(J,g,async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1];if(!n)return t.status(404).send({message:"NullData(P) Received."});let a=e.query??e.params;if(!(a??!1)||Object.keys(a).length==0)return t.status(404).send("NullData(P) Received.");try{let s=await R(P,a.id);return s.status==200?(t.set(B),t.send(s.data)):t.status(404).send("(Srv):- _del202;but, "+s.data)}catch{return t.status(505).send("(Srv);- _del505")}});var $t=F;async function Ct(e){try{let t={};return e[ce]??!1?t[ce]=e[ce]:t=qs,console.log(`
<==>CreateContent Profile Service 0=> Check Existances of Params 
`),await P.findOne(t).then(async r=>{r==null?(r=new P(e),console.log(`
 == New User Profile Created !
`)):(r=Object.assign(r,e),console.log(`
 == Exising User --> Updating User Profile With Incoming Data !
`));let n=e.group??"client",i="";console.log(`
 == Assing Role & Permission !
`);try{i=await y.findOne({group:n}),console.log(`
 == Role & Permission Acckey = ${i._id??null} == ${n}!
`)}catch(a){n=a}if(i)r.acckey=i._id;else return{status:303,data:"Permission Assign Error"};return r.phone.length==10&&(r.phone=r.phone.slice(1,9)),console.log(`oooooooooooooo
`,r.phone,"pppppppppp"),await r.save().then(a=>a&&Object.keys(a).length?{status:200,data:a}:{status:303,data:a}).catch(a=>({status:303,data:a}))}).catch(r=>({status:303,data:r}))}catch{return{status:303,data:"Fatal DATABASE ERROR"}}}var Qs="id";async function Ce(e,t=null,r=null){console.log(`

 Updating Profile 
`);try{let n={};if(e.id??!1)n._id=new It(e[Qs]);else return{status:303,data:"body.null data"};return console.log(`
<==>UpdatingContent Profile Service 0=> Check Existances of Params 
`),console.log(n),await P.findOne(n).then(async i=>{if(console.log(`
<==> Acckey = ${i.acckey??" No User"} && subOps = ${r} 
`),i==null)return{status:303,data:"Record Doesn't Found."};if(r=="updateRole"&&(e.group??!1)){console.log(`
 == Updating Role & Permission New Group = ${e.group??!1}`);let a=await y.findOne({group:e.group});a?(console.log(`
 == Profile Role Updating  acckey = ${a.id??null} && RoleGroup =${e.group}`),i=Object.assign(i,{acckey:new It(a.id)})):console.log(`
 == Updating Role & Permission ;- Creating New Group = ${e.group??!1} ; Failed`)}else i=Object.assign(i,e);return await i.save().then(a=>a&&Object.keys(a).length?{status:200,data:a}:{status:303,data:a}).catch(a=>({status:303,data:a}))}).catch(i=>({status:303,data:i}))}catch{return{status:303,data:"Fatal DATABASE ERROR"}}}var Rt=require("mongoose"),xr=require("vue"),ea=Rt.mongoose.Schema,je=ea.ObjectId;var Pt={userID:{type:je,ref:"profiles"},content:{type:String,default:""},phone:{type:String,default:0}},xt={comment:{type:String,vtype:"String",default:"",$ifNull:""},saleitID:{type:je,ref:"saleits"},userID:{type:je,ref:"profiles"},userName:{type:String,vtype:"String",default:"",$ifNull:""},phone:{type:Number,vtype:"Number",default:"",$ifNull:""}};var Mt=require("mongoose"),$e=Mt.mongoose.Schema,Br=$e.ObjectId,Ut=(e=null)=>new Date(e).toLocaleString(),Et=new $e(Pt,{timestamps:Ut});Et.method("toJSON",function(){let{__v:e,_id:t,...r}=this.toObject();return r.id=t,r.fupdatedAt=S(r.updatedAt),r.fcreatedAt=S(r.createdAt),r});var Wt=new $e(xt,{timestamps:Ut});Wt.method("toJSON",function(){let{__v:e,_id:t,...r}=this.toObject();return r.id=t,r.fupdatedAt=S(r.updatedAt),r.fcreatedAt=S(r.createdAt),r});var Re;k.model.publicChatModel?console.log("assets Collections already existed on Procurment"):Re=k.model("publicChats",Et);var X;k.model.saleChatModel?console.log("sale it Collections already existed on saleit content"):X=k.model("contentChats",Wt);var Xt=require("mongoose"),Vt=require("express"),un=require("multer");var xe=require("mongoose");var Dr=xe.mongoose.Schema,Pe=xe.mongoose.Types.ObjectId,Tt={_stage_:{type:Number,vtype:"Number",default:1},userID:{type:Pe,ref:"profiles"},userName:{type:String,vtype:"String",default:"",$ifNull:""},phone:{type:Number,vtype:"Number",default:"",$ifNull:""},phoneCode:{type:Array,vtype:"Array",default:["",""],$ifNull:["",""],required:!0},catagory:{type:String,vtype:"String",default:"Households",$ifNull:"Households",enum:["Electronics","Vehicles","Households","Land/House","Clothing","Food","Others"]},queryWeight:{type:String,vtype:"String",default:"1.1.1.1",$ifNull:"1.1.1.1"},catagoryScore:{type:Number,vtype:"Number",default:0,$ifNull:0},usageScore:{type:Number,vtype:"Number",default:0,$ifNull:0},trendScore:{type:Number,vtype:"Number",default:0,$ifNull:0},usage:{type:String,vtype:"String",default:"Used",$ifNull:"Used",enum:["New","Used","Others"]},saleitgr:{type:Array,default:["/saleitgr/saleitpng.png"],vtype:"file"},header:{type:String,vtype:"String",default:"....",$ifNull:"....",validRuleset:"[ val => val && val.length > 0 || 'Please type something']"},content:{type:String,vtype:"String",textarea:!0,default:"....",$ifNull:"...."},quantity:{type:Number,vtype:"Number",default:0,$ifNull:0},price:{type:Number,vtype:"Number",default:0,$ifNull:0},currency:{type:String,vtype:"String",default:"$(US)",$ifNull:"$(US)",enum:["$(US)","GB Pound","Euro","ETB","Pound",""]},discount:{type:Number,vtype:"Number",default:0,$ifNull:0},tPrice:{type:Number,vtype:"Number",default:0,$ifNull:0},location:{country:{type:String,default:"",$ifNull:""},provinance:{type:String,default:"",$ifNull:""},city:{type:String,default:"",$ifNull:""},street:{type:String,default:"",$ifNull:""}},geolocation:{lat:{type:Number,vtype:"Number",default:0,$ifNull:0},long:{type:Number,vtype:"Number",default:0,$ifNull:0}},timer:{action:{type:String,vtype:"String",enum:["delete","expired","sold",""],default:"",$ifNull:""},hours:{type:Number,vtype:"Number",default:-1,$ifNull:-1},days:{type:Number,vtype:"Number",default:-1,$ifNull:-1}},status:{type:String,vtype:"String",default:"posted",$ifNull:"posted",enum:["posted","sold","Paused","discarded"]},likes:{like:{type:Number,vtype:"Number",default:0,$ifNull:0},dislike:{type:Number,vtype:"Number",default:0,$ifNull:0}},completed:{type:String,vtype:"String",default:"no",$ifNull:"no"},_itServiceRating:{type:Number,vtype:"Number",default:0,$ifNull:0},tClient:{type:Number,vtype:"Number",default:0,$ifNull:0},tQs:{type:Number,vtype:"Number",default:0,$ifNull:0},tQ:{type:Number,vtype:"Number",default:0,$ifNull:0},tC:{type:Number,vtype:"Number",default:0,$ifNull:0},tQC:{type:Number,vtype:"Number",default:0,$ifNull:0},tQt:{type:Number,vtype:"Number",default:0,$ifNull:0},tCt:{type:Number,vtype:"Number",default:0,$ifNull:0},tQCt:{type:Number,vtype:"Number",default:0,$ifNull:0},tQCtonD:{type:Number,vtype:"Number",default:0,$ifNull:0},tQCttech:{type:Number,vtype:"Number",default:0,$ifNull:0}},Bt={geolocation:{lat:{type:String,vtype:"String",default:"000000",$ifNull:"000000"},long:{type:String,vtype:"String",default:"000001",$ifNull:"000001"}},location:{country:{type:String,default:"",$ifNull:""},provinance:{type:String,default:"",$ifNull:""},city:{type:String,default:"",$ifNull:""},street:{type:String,default:"",$ifNull:""}},phone:{type:Number,vtype:"Number",default:"",$ifNull:""},phoneCode:{type:Array,vtype:"Array",default:["",""],$ifNull:["",""],required:!0},saleitID:{type:Pe,ref:"saleits"},userID:{type:Pe,ref:"profiles"},orderID:{type:String,vtype:"String",default:"xyxy",$ifNull:"+xyxy"},confirmID:{type:String,vtype:"String",default:"xyxy",$ifNull:"+xyxy"},quantity:{type:Number,vtype:"Number",default:0,$ifNull:0},price:{type:Number,vtype:"Number",default:0,$ifNull:0},currency:{type:String,vtype:"String",default:"$(US)",$ifNull:"$(US)",enum:["$(US)","GB Pound","Euro","ETB","Pound",""]},paymentMethod:{type:String,vtype:"String",default:"onDelivery",$ifNull:"onDelivery",enum:["onDelivery","TELBirr","EBCBirr","others",""]},served:{type:String,vtype:"String",default:"Requested",$ifNull:"Requested",enum:["Served","Queed","Requested","Requesting"]},store:{type:String,vtype:"String",default:"cart",$ifNull:"cart",enum:["cart","buy","bought"]},description:{type:String,vtype:"String",default:"",$ifNull:""}};var Me=require("mongoose"),Ft=Me.mongoose.Schema;Me.mongoose.set("strictQuery",!0);var Dt=(e=null)=>new Date(e).toLocaleString(),At=new Ft(Tt,{timestamps:Dt});At.method("toJSON",function(){let{__v:e,_id:t,...r}=this.toObject();r.id=t,r.fupdatedAt=S(r.updatedAt),r.fcreatedAt=S(r.createdAt);let n=String(r.phone);return r.fphone=n.slice(0,3)+"****"+n[7]+n[8],r.netPrice=(r.discount??0)||(r.price??0),r.isOpen=(r.netPrice??0)*(r.quantity??0),r});var Kt=new Ft(Bt,{timestamps:Dt});Kt.method("toJSON",function(){let{__v:e,_id:t,...r}=this.toObject();r.id=t,r.fupdatedAt=S(r.updatedAt),r.fcreatedAt=S(r.createdAt);let n=String(r.phone);return r.fphone=n.slice(0,3)+"****"+n[7]+n[8],r});var $;j.model.saleitModel?console.log("sale it Collections already existed on saleit content"):($=j.model("sales",At),console.log($,"New Created !"));var U;j.model.saleitClientModel?console.log("sale it Collections already existed on saleit content"):(U=j.model("saleitClients",Kt),console.log(U,"New Created !"));var Lt=require("mongoose"),Zr=require("express");ObjectId=Lt.mongoose.Types.ObjectId;var ta={Households:5,Clothing:20,Food:35,Electronics:50,Vehicles:65,"Land/House":80,Others:100},sa={New:100,Used:75,All:1};var Ue={updatedAt:null},x=class{constructor(t,r){console.log(`
_user_Und_foreign_Operations Init 
 With User++currentModel =`,t,` & Data of UserID= 
`,r.userID??!1),this.reqData=r,this.model=t||"",this.userID=null,this.modalId=null,this.createNew=!0}async addFollowing(){this.userID=this.reqData.userID?{_id:new ObjectId(this.reqData.userID)}:Ue;try{let t=await h.findOne(this.userID,{});if(!t)return{status:501,foreignData:"User doesn't exist"};let r=this.reqData.followingPhone||"";(t.contacts??!1)||(t.contacts=[]),t.contacts.includes(r)||t.contacts.push(r);let n=await t.save();return n&&Object.keys(n).length?{status:200,foreignData:n}:{status:400,foreignData:n}}catch(t){return{status:505,foreignData:t}}}async computeUser(){this.userID=this.reqData.userID?{_id:new ObjectId(this.reqData.userID)}:Ue;try{let t=await h.findOne(this.userID,{});if(!t)return{status:501,foreignData:"User doesn't exist"};let r=this.reqData.weight||!1;if(!r)return{status:400,foreignData:"No Weights to be updated."};let n=t.queryWeight||!1;if(n&&n[1]){let a=n[1];a=a.map((s,l)=>Math.ceil((s+r[l])/2-1)),a[3]=Math.ceil(a[3]+1),t.queryWeight[1]=[1,a[1],a[2],a[3]]}else t.queryWeight[1]=[1,1,1,1];let i=await t.save();return i&&Object.keys(i).length?{status:200,foreignData:i}:{status:400,foreignData:i}}catch(t){return{status:505,foreignData:t}}}async saveItem(t=!0){return this.createNew=t,this.reqData.id==null?this.modalId=Ue:this.modalId={_id:new ObjectId(this.reqData.id)},await this.save()}async deleteItem(){return this.reqData.id==null?{status:401,foreignData:""}:(this.modalId={_id:new ObjectId(this.reqData.id)},await this.delete())}async save(){try{let t=await this.model.findOne(this.modalId,{});if(t)Object.assign(t,this.reqData);else if(this.createNew)t=new this.model(this.reqData);else return{status:501,foreignData:"Client Doesn't exist"};let r=await t.save();return r&&Object.keys(r).length?{status:200,foreignData:r}:{status:400,foreignData:r}}catch(t){return{status:505,foreignData:t}}}async delete(){try{return await this.model.findByIdAndDelete(this.modalId).then(t=>t&&Object.keys(t).length?{status:200,foreignData:t}:{status:400,foreignData:t}).catch(t=>({status:400,foreignData:t}))}catch(t){return{status:505,foreignData:t}}}};async function aa(e,t,r,n){if(r=="likes"){t.weight=await u();let c=new x(null,t),f=null;try{f=await c.computeUser()}catch{}return console.log(r,`
  Sale UserData Status Result 
`,f.status),f.status!=200||(e=Object.assign(e,t),e.likes.like++,f.data=e),f}else if(r=="following"){t.followingPhone=e.phoneCode[1]+" "+e.phone,t.weight=await u();let c=new x(null,t),f=null;try{f=await c.addFollowing()}catch{}return console.log(r,`
 Sale UserData Status Result  
`,f.status),f.status!=200||(e=Object.assign(e,t),f.data=e),f}else if(r=="_itServiceRating"){t.weight=await u();let c=new x(null,t),f=null;try{f=await c.computeUser()}catch{}return console.log(r,`
 Sale UserData Status Result  
`,f.status),f.status!=200||(e=Object.assign(e,t),e._itServiceRating=e._itServiceRating+(t._itServiceRating-e._itServiceRating)/2,e._itServiceRating=Math.min(e._itServiceRating,5),f.data=e),f}else if(r=="CreateRowItem"){t.weight=await u(!0);let c=parseFloat(t.quantity??0),f=parseFloat(t.price??0),d=parseFloat(t.discount??0);return t.quantity=c>0?c:1,t.price=f>0?f:0,t.discount=d>0?d:0,e=Object.assign(e,t),e.tQs=t.quantity,e.tQ=t.quantity,{status:200,data:e}}else if(r=="UpdateRowItem"){t.weight=await u(!0);let c=parseFloat(t.quantity??0),f=parseFloat(t.price??0),d=parseFloat(t.discount??0);return t.quantity=c>0?c:1,t.price=f>0?f:0,t.discount=d>0?d:0,e=Object.assign(e,t),e.tQs=t.quantity,e.tQ=e.tQt+t.quantity,{status:200,data:e}}else if(r=="comments"){let c=Object.assign({},t.comments);c.saleitID=new ObjectId(t.id??""),c.weight=t.weight??"",c.userID=t.userID??"",c.weight=await u();let f=new x(X,c),d=null;try{d=await f.computeUser()}catch{}return console.log(r,`
 Sale UserData Status Result  
`,d.status),d.status!=200?d:n=="delete"?await f.deleteItem().then(p=>(console.log(n,`
  Sale  Status Result 
`,p.status),p.status==200&&(p.data=e),p)).catch(p=>(console.log(p),{status:401,data:p,foreignData:p})):await f.saveItem(!0).then(p=>(console.log(n,`
  Sale  Status Result 
`,p.status),p.status==200&&(p.data=e),p)).catch(p=>(console.log(p),{status:401,data:p,foreignData:p}))}else if(r=="clients"){let c=Object.assign({},t.clients);var i=parseFloat(e.quantity??1),a=parseFloat(e.tQt??0),s=parseFloat(e.tClient??0),l=parseFloat(e._stage_??1);if(n=="delete")return await new x(U,c).deleteItem().then(async d=>{if(console.log(n,`
  Sale  Status Result 
`,d.status),d.data=null,d.status==200){i=i+parseFloat(c.quantity),a=a>0?a-parseFloat(c.quantity):0,c.store=="buy"&&(s=s>0?s-1:0);let p=await Ht(e,i,a,s,l);console.log(`
 SecondaryOperation Sale  Status Result 
`,!!p),d.data=p,p||(d.status=401)}return d}).catch(d=>(console.log(d),{status:401,data:d,foreignData:d}));if(["create","update"].includes(n)){var o=e.discount>0?e.discount:e.price;let f={status:501,data:"Computing Client Error"};c.totalOnstore=i??0,c.totalTaken=a??0,c.salePrice=o??0;try{f=await ra(c,e.currency??"")}catch{}if(f.status!=200)return f;c=f.data,c.contentId=t.id,c.weight=t.weight,c.userID=t.userID,c.saleitID=e.id,c.weight=await u();let d=new x(U,c),p=null;try{p=await d.computeUser()}catch{}return console.log(r,`
 Sale UserData Status Result  
`,p.status),p.status!=200?p:await d.saveItem(!0).then(async N=>{if(N.data=null,console.log(n,`
  Sale  Status Result 
`,N.status),N.status==200){i=parseFloat(c.totalOnstore??0),a=parseFloat(c.totalTaken??0),s=s+(c.newClient??0);let he=await Ht(e,i,a,s,l);console.log(`
 SecondaryOperation Sale  Status Result 
`,!!he),N.data=he,he||(N.status=401)}return N}).catch(N=>(console.log(N),{status:401,data:N,foreignData:N}))}else return{status:401,data:"no Sub Operation for  :- "+r,foreignData:"no Sub Operations"}}else return{status:401,data:"no Operation",foreignData:"no Operations"};async function u(c=!1){let f=parseInt(e.catagoryScore??1),d=parseInt(e.usageScore??1),p=parseInt(e.trendScore??1);if(c)try{d=t.usage??!1?parseInt(sa[t.usage]):d,f=t.catagory??!1?parseInt(ta[t.catagory]):f,t.catagoryScore=isNaN(f)?10:f,t.usageScore=isNaN(d)?10:d,t.trendScore=isNaN(p)?10:p+1}catch{}else e.trendScore=p+1;return[1,f,d,p]}}async function ra(e,t){var r=e.served??!1,n=e.store??!1;let i=null;try{if(n=="cart"||!r)return e.store="cart",e.quantity=e.quantity??0,e.price=(e.quantity??0)*e.salePrice,e.served="Requesting",e.currency=t,e._stage_=0,i={status:200,data:e},i;if(e.salePrice){let s=parseFloat(e.quantity??1);if(s=s||1,r=="Requesting"||!e.price)if(e.totalOnstore){s>e.totalOnstore&&(s=e.totalOnstore),e.totalOnstore=e.totalOnstore-s,e.totalTaken=e.totalTaken+s;var a=parseFloat(s*e.salePrice);e.quantity=s,e.price=a,e.served="Requested",e.currency=t,e.store="buy",e.newClient=1,e.description="waiting for Delivery Infos",e._stage_=1,i={status:200,data:e}}else e.store="cart",e.currency=t,e.quantity=e.quantity??0,e.served="Requesting",e._stage_=0,i={status:200,data:e};else e.served=="Queed"&&(e._stage_=3),e.served=="Served"&&(e._stage_=4),i={status:200,data:e}}else e.store="cart",e.quantity=e.quantity??0,e.served="Requesting",e._stage_=0,i={status:200,data:e};return i}catch(s){return{status:501,data:s}}}async function Ht(e,t,r,n,i){return t??!1?(i=Math.max(Number(i),2),e.completed="no"):(e.completed="yes",i=Math.max(Number(i),4)),e.quantity=t,e.tQs=t,e.tQt=r,e.tClient=n,e.tQ=r+t,e._stage_=i,e}var de=aa;var zt=require("mongoose"),Gt=zt.mongoose.Types.ObjectId;var Ee="id",We="id";var Jt={updatedAt:null};async function Te(e,t=null,r=null){try{let n={};e[Ee]??!1?n["_"+Ee]=new Gt(e[Ee]):n=Jt;let i={};return await $.findOne(n).then(async a=>{if(console.log(`
-------------------New CreateSaleit--------------------------
`),console.log(`
UpdateSale >== mainOps = `,t,`
 subOps = `,r,"UpdatingOperations Ends Succefully of UserID",e.userID??!1),a==null)if(t){if(i=await de({},e,t,r),console.log(`
 mainOps = `,t,`
 subOps = `,r,"PrimaryOperations- New "),i.status!=200)return i;a=new $(i.data)}else a=new $(e);else if(t){let s=await de(a,e,t,r);if(console.log(`
 mainOps = `,t,`
 subOps = `,r,"PrimaryOperations - Updating "),s.status!=200)return s;a=s.data}else a=Object.assign(a,e);return console.log(`
 mainOps = `,t,`
 subOps = `,r,"UpdatingOperations Ends Succefully"),await a.save().then(s=>(console.log(`
 === ==============Saved Finally    =================
`,!!s),s&&Object.keys(s).length?{status:200,data:s,foreignData:i.foreignData??{status:401}}:{status:501,data:s})).catch(s=>({status:501,data:s}))}).catch(a=>({status:501,data:a}))}catch(n){return{status:501,data:n}}}async function _(e,t=null,r=null){try{let n={};e[We]??!1?n["_"+We]=new Gt(e[We]):n=Jt;let i={};return await $.findOne(n).then(async a=>{if(console.log(`
-------------------New UpdateSaleit--------------------------
`),console.log(`
UpdateSale >== mainOps = `,t,`
 subOps = `,r,`
 UpdatingOperations Ends Succefully of UserID`,e.userID??!1),a==null)return{status:404,data:"Saleit Record Doesn't Found."};if(t){if(i=await de(a,e,t,r),console.log("_primaryOperations UpdateSale ==<",i.status,`
`),i.status!=200)return i;a=Object.assign(a,i.data)}else a=Object.assign(a,e);return await a.save().then(s=>(console.log(`
 === ==============Saved Finally    =================
`,!!s),s&&Object.keys(s).length?{status:200,data:s,foreignData:i.foreignData??{status:401}}:{status:501,data:s})).catch(s=>({status:500,data:s}))}).catch(a=>({status:500,data:a}))}catch(n){return{status:500,data:n}}}var on=Xt.mongoose.Types.ObjectId,D=(0,Vt.Router)(),Yt=X,V="/saleitChat";var Y={"Content-Type":"application/json","Content-Length":"5050",ETag:"Roaw"},Be="comments",na="update",ia="create",la="delete",oa="id",ua="id";D.post(V,async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],a={};return a=e.body??{},(a[oa]??null)==null?t.status(404).send("Create Key Null"+a):(a.userID=n,await _(a,Be,ia).then(s=>(console.log(s.status,`
Clients Response Creating New
`),t.set(Y),t.status(s.status).send(s))))});D.put(V,async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],a={};return a=e.body??{},(a[ua]??null)==null?t.status(404).send("Uppdate Key Null"+a):(a.userID=n,await _(a,Be,na).then(s=>(console.log(s.status,`
Clients Response Creating New
`),t.set(Y),t.status(s.status).send(s))))});D.get(V+"s",async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],a=e.query??e.params;(a??!1)&&Object.keys(a).length;let[s=[],l=[],o=10]=await m(a),u={createdAt:-1};try{let c=await w(Yt,s,l,o,u);return t.set(Y),t.status(c.status).json(c.data)}catch(c){return t.status(500).send(c)}});D.get(V,async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],a=e.query??e.params;if(!((a??!1)&&Object.keys(a).length))return t.status(400).send("Search Query is null ?");let[s=[],l=[],o=10]=await m(a),u={createdAt:-1};try{let c=await v(Yt,s,l,o,u);return t.set(Y),t.status(c.status).json(c.data)}catch(c){return t.status(500).send(c)}});D.delete(V,async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],a=e.query??e.params??{};if(Object.keys(a).length==0)return t.status(404).send("Body is null ?");console.log(`
Clients Response Creating New
`),a.userID=n;try{return await _(a,Be,la).then(s=>(console.log(s.status,`
Clients Response Creating New
`),t.set(Y),t.status(s.status).send(s)))}catch(s){return t.status(500).send(s)}});var Zt=D;var qt=require("express"),ca=b(require("multer")),Qt=require("mongoose");var da=Qt.mongoose.Types.ObjectId,K=(0,qt.Router)(),A=Re,Z="/publicchat";var q={"Content-Type":"application/json","Content-Length":"5000",ETag:"Roaw","Set-Cookie":["type=ninja","language=javascript"]};var es="phone";async function fa(e){try{let t={};return t[es]=!1,await A.findOne(t,{}).then(async r=>{if(r==null)r=new A(e);else return{status:404,data:"Dubplication Occured"};return console.log("------------------------------------------>Existed Profile",r),await r.save().then(n=>n&&Object.keys(n).length?{status:200,data:n}:{status:404,data:n}).catch(n=>({status:404,data:n}))}).catch(r=>({status:404,data:r}))}catch{return{status:404,data:"Fatal DATABASE ERROR"}}}async function pa(e){console.log("------------------------------------------>Existed Profile");try{let t={};return e.id??!1?t._id=new da(e.id):t[es]=!1,await A.findOne({$or:t},{}).then(async r=>r==null?{status:404,data:"Not REgistered"}:(r=Object.assign(r,e),await r.save().then(n=>n&&Object.keys(n).length?{status:200,data:n}:{status:404,data:n}).catch(n=>({status:404,data:n})))).catch(r=>({status:404,data:r}))}catch{return{status:404,data:"Fatal DATABASE ERROR"}}}K.post(Z,async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userId??!1,e.queryWeight??!1],a=e?.body??!1;return!a||Object.keys(a).length==0?t.status(404).send({message:"NullData Body Received."}):await fa(a).then(s=>s.status==200?(t.set(q),t.status(s.status).json(s.data)):t.status(s.status).send(s.data)).catch(s=>t.status(404).send(s))});K.put(Z,g,async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userId??!1,e.queryWeight??!1],a=e?.body??!1;return!a||Object.keys(a).length==0?t.status(404).send({message:"NullData Body Received."}):await pa(a).then(s=>s.status==200?(t.set(q),t.status(s.status).json(s.data)):t.status(s.status).send(s.data)).catch(s=>t.status(404).send(s))});K.get(Z+"s",g,async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userId??!1,e.queryWeight??!1],a=e.query??e.params;!(a??!1)||Object.keys(a).length==0;let[s,l,o]=await m(a);try{let u=await w(A,s,l,o);return u.status==200?(t.set(q),t.send(u.data)):t.status(404).send("(Srv):- _read404;but, "+u.data)}catch{return t.status(500).send("(Srv);- _read500")}});K.get(Z,g,async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userId??!1,e.queryWeight??!1],a=e.query??e.params;!(a??!1)||Object.keys(a).length==0;let[s,l,o]=await m(a);try{let u=await v(A,s,l,o);return console.log("reading public hatts==>>",u.data.length,s),u.status==200?(t.set(q),t.send(u.data)):t.status(404).send("(Srv):- _readf202;but, "+u.data)}catch{return t.status(500).send("(Srv);- _readf500")}});K.delete(Z,g,async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userId??!1,e.queryWeight??!1];if(!n)return t.status(404).send({message:"NullData(P) Received."});let a=e.query??e.params;!(a??!1)||Object.keys(a).length==0;try{let s=await R(A,a.id);return s.status==200?(t.set(q),t.send(s.data)):t.status(404).send("(Srv):- _del202;but, "+s.data)}catch{return t.status(500).send("(Srv);- _del500")}});var ts=K;var rs=require("mongoose"),ns=require("express"),fe=b(require("multer"));var jn=rs.mongoose.Types.ObjectId,H=(0,ns.Router)(),$n=require("fs"),Q=$,ee="/saleit",M={"Content-Type":"application/json","Content-Length":"5000",ETag:"Roaw"},ss={"application/pdf":"pdf","application/zip":"zip","text/csv":"csv","text/pdf":"pdf","text/json":"json","image/jpeg":"jpeg","image/png":"png","image/svg+xml":"svg+xml","image/webp":"webp","video/mp4":"mp4","video/mkv":"mkv"},is=()=>{var e="";return{storage:fe.default.diskStorage({filename:(t,r,n)=>{let i=ss[r.mimetype];e=r.originalname.split(".")[0].split(" ")[0]+"-"+new Date().getTime()+"."+i,n(null,e)},destination:(t,r,n)=>{n(null,"./public/"+r.fieldname)},path:(t,r,n)=>{n(null,"/"+r.fieldname+"/"+e)}}),limits:{fileSize:1e6*5},fileFilter:(t,r,n)=>{if(ss[r.mimetype])n(null,!0);else return n(null,!1)}}};var ga="phone",Fe="id",as="id";H.post(ee,async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1];console.log(`

 Creating saleit`);var s=(e.query??e.params??{})?.file_??!1;let l={};if(s)(s.files??!1)&&(0,fe.default)(is()).fields([{name:s.files,maxCount:4}])(e,t,async o=>{if(l=e.body??{},Object.keys(l).length==0)return t.status(404).send("");if(o)return t.status(404).send({message:"Uploading Error"+o});{let u=e.files??!1;if(u){let c=await T(u);l[s.files]=c[s.files]}}return l.userID=n,await Te(l,l.thisOps??"CreateRowItem").then(u=>(t.set(M),t.status(u.status).send(u.data)))});else{if(l=e.body??{},(l[ga]??null)==null)return t.status(404).send("null Post-createKey ?");l.userID=n;try{return await Te(l,l.thisOps??"CreateRowItem").then(o=>(t.set(M),t.status(o.status).send(o.data)))}catch(o){return t.status(500).send(o)}}});H.put(ee,async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1];if(!n)return t.status(401).send({message:"NullData(P + token) Received."});console.log(`
 Updating saleit UserID =`,n);var s=(e.query??e.params??{})?.file_??!1;let l={};if(s)if(s.files??!1)(0,fe.default)(is()).fields([{name:s.files,maxCount:4}])(e,t,async o=>{if(l=e.body??{},(l[Fe]??null)==null)return t.status(404).send("Uppdate Key Null");if(o)return t.status(404).send({message:"Uploading Error"+o});{let u=e.files??!1;if(u){let c=await T(u);l[s.files]=c[s.files]}}return l.userID=n,await _(l,l.thisOps??"UpdateRowItem","").then(u=>(t.set(M),t.status(u.status).send(u.data)))});else return l=e.body??{},(l[Fe]??null)==null?t.status(404).send("Uppdate Key Null"):(l.userID=n,await _(l,l.thisOps??"UpdateRowItem").then(o=>(t.set(M),t.status(o.status).send(o.data))));else{if(l=e.body??{},(l[Fe]??null)==null)return t.status(404).send("Uppdate Key Null");l.userID=n;try{return await _(l,l.thisOps??"UpdateRowItem").then(o=>(t.set(M),t.status(o.status).send(o.data)))}catch(o){return t.status(500).send(o)}}});H.get(ee+"s",async(e,t)=>{let[r,n,i,a]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1,e.location??!1],s=e.query??e.params??{},[l=[],o=[],u=5,c={createdAt:-1},f=0]=await m(s);a&&(s.lat=a.lat??"",s.long=a.long??""),(s.trend??!1)&&(c.trendScore=s.trend);let d=(s.queryOperator??"-or").split("-");try{let p=d[1]=="and"?await v(Q,l,o,u,c,f):await w(Q,l,o,u,c,f);return console.log(`
Result:_ Searching for saleitContent gets(s)
`,p.data.length??!1,a),t.set(M),t.status(p.status).json(p.data)}catch(p){return t.status(500).send(p)}});H.get(ee,async(e,t)=>{let[r,n,i,a]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1,e.location??!1],s=e.query??e.params??{},[l=[],o=[],u=5,c={createdAt:-1},f=0]=await m(s);if(!Object.keys(l).length)return t.status(404).send({message:"NullData(P) Received."});a&&(s.lat=a.lat??"",s.long=a.long??""),(s.trend??!1)&&(c.trendScore=s.trend);let d=(s.queryOperator??"-or").split("-");try{let p=d[1]=="and"?await v(Q,l,o,u,c,f):await E(Q,l,o,u,c,f);return console.log(`
Result:_ Searching for saleitContent get(xs) 
`,(s.qweight?.[3]??!1)=="3",p.data.length??!1,a),t.set(M),t.status(p.status).json(p.data)}catch(p){return t.status(500).send(p)}});H.delete(ee,async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],a=e.query??e.params??{};if((a[as]??null)==null)return t.status(404).send("Search Query is null ?");try{let s=await R(Q,a[as]);return t.set(M),t.status(s.status).json(s.data)}catch(s){return t.status(500).send(s)}});var ls=H;var os=require("mongoose"),us=require("express");var Hn=os.mongoose.Types.ObjectId,L=(0,us.Router)();var pe=U,te="/saleitClient";var De="clients",ya="update",ma="create",ha="delete",ba="id",va="id";var se={"Content-Type":"application/json","Content-Length":"5050",ETag:"Roaw"};L.post(te,async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1];if(!n)return t.status(401).send({message:"UserID is Null"});let a={};return a=e.body??{},(a[ba]??null)==null?t.status(404).send("Uppdate Key Null"):(a.userID=n,await _(a,De,ma).then(s=>(console.log(s.status,`
Clients Response Creating New
`),t.set(se),t.status(s.status).send(s))))});L.put(te,async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1];if(!n)return t.status(401).send({message:"UserID is Null."});let a={};return a=e.body??{},(a[va]??null)==null?t.status(404).send("Uppdate Key Null"):(a.userID=n,await _(a,De,ya).then(s=>(console.log(s.data,`
Clients Response Creating New
`),t.set(se),t.status(s.status).send(s))))});L.get(te+"s",async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],a=e.query??e.params,[s={},l=[],o=100,u={createdAt:-1},c=0]=await m(a);Object.keys(s).length;let f=(a.queryOperator??"-or").split("-");try{let d=f[1]=="and"?await v(pe,s,l,o,u):await w(pe,s,l,o,u);return t.set(se),t.status(d.status).json(d.data)}catch(d){return t.status(500).send(d)}});L.get(te,async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],a=e.query??e.params,[s={},l=[],o=100,u={createdAt:-1},c=0]=await m(a);if(!Object.keys(s).length)return t.status(404).send({message:"NullData(P) Received."});let f=(a.queryOperator??"-or").split("-");try{let d=f[1]=="and"?await v(pe,s,l,o,u):await E(pe,s,l,o,u);return t.set(se),t.status(d.status).json(d.data)}catch(d){return t.status(500).send(d)}});L.delete(te,async(e,t)=>{let[r,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],a=e.query??e.params??{};if(Object.keys(a).length==0)return t.status(404).send("Body is null ?");console.log(`
Clients Response Creating New
`),a.userID=n;try{return await _(a,De,ha).then(s=>(console.log(s.status,`
Clients Response Creating New
`),t.set(se),t.status(s.status).send(s)))}catch(s){return t.status(500).send(s)}});var cs=L;var O=b(require("express")),Ae=b(require("compression")),ds=b(require("cookie-parser")),Ke=b(require("body-parser")),fs=b(require("cors")),ps=b(require("path")),gs=b(require("dotenv"));gs.default.config();var Sa=8080,wa=1e3*60*60*24*30,ys=(0,C.ssrCreate)(()=>{let e=(0,O.default)();e.use((0,Ae.default)()),e.use((0,ds.default)()),e.set("view engine","ejs"),e.use(Ke.default.json()),e.use(Ke.default.urlencoded({extended:!0}));let t=["http://127.0.0.1","http://196.190.43.66","http://192.168.1.2","http://0.0.0.0"],r={origin:function(n,i){t.includes(n)||!n?i(null,!0):i(new Error("Not allowed by CORS"))}};return e.use((0,fs.default)(r)),e.disable("x-powered-by"),e.use(O.default.static(ps.default.join(__dirname,"public"))),e.use("/css",O.default.static(__dirname+"public/css")),e.use("/img",O.default.static(__dirname+"public/img")),e.use("/js",O.default.static(__dirname+"public/js")),e.use("/static",O.default.static("public")),e.use(O.default.static("public")),e.use("/assets",O.default.static("src/assets")),e.use("/public",O.default.static("public",{maxAge:"7d",etag:!0,index:!1})),e.use((0,Ae.default)()),e.use((n,i,a)=>(i.setHeader("X-Powered-By","YitService"),i.setHeader("X-Content-Type-Options","nosniff"),i.setHeader("X-Frame-Options","SAMEORIGIN"),i.setHeader("X-XSS-Protection","1; mode=allow"),i.setHeader("Cache-Control","no-cache, no-store, must-revalidate"),i.setHeader("Pragma","no-cache"),i.setHeader("Expires","4d"),a(),!0)),e.get("/helps",(n,i)=>{i.json({message:"API is working!"}),i.send("API is working!"),i.status(200).json({message:"API is working!"}),i.status(200).send("API is working!")}),e.use("/api",pt),e.use("/permissionapi",_t),e.use("/profileapi",$t),e.use("/publicchatapi",ts),e.use("/saleitapi",g,ls),e.use("/saleitClientapi",g,cs),e.use("/saleChatapi",g,Zt),e}),ms=(0,C.ssrListen)(async({app:e,port:t,isReady:r})=>(await r(),e.listen(Sa,()=>{console.log("Server listening at port "+t+process.env.mongodAPI_URL)}))),ri=(0,C.ssrClose)(({listenResult:e})=>(console.log("Closing Server is Being Used",e),e.close())),hs=(0,C.ssrServeStaticContent)((e,t)=>O.default.static(e,{maxAge:wa,...t})),He=(0,C.ssrRenderPreloadTag)(e=>(console.log("renderPreloadTag is Being Used",e),_a.test(e)===!0?`<link rel="modulepreload" href="${e}" crossorigin>`:Na.test(e)===!0?`<link rel="stylesheet" href="${e}">`:Ia.test(e)===!0?`<link rel="preload" href="${e}" as="font" type="font/woff" crossorigin>`:Oa.test(e)===!0?`<link rel="preload" href="${e}" as="font" type="font/woff2" crossorigin>`:Ca.test(e)===!0?`<link rel="preload" href="${e}" as="image" type="image/gif">`:ka.test(e)===!0?`<link rel="preload" href="${e}" as="image" type="image/jpeg">`:ja.test(e)===!0?`<link rel="preload" href="${e}" as="image" type="image/png">`:"")),_a=/\.js$/,Na=/\.css$/,Ia=/\.woff$/,Oa=/\.woff2$/,Ca=/\.gif$/,ka=/\.jpe?g$/,ja=/\.png$/;function Le(e){return Promise.all([Promise.resolve().then(()=>(Ss(),vs))]).then(async t=>{let r=t.map(n=>n.default);for(let n=0;n<r.length;n++)try{await r[n](e)}catch(i){console.error("[Quasar SSR] middleware error:",i);return}})}var Ra=process.env.PORT||3e3,Pa=/\/\//g,ye="/",Cs=ye==="/"?e=>e||"/":e=>e?(ye+e).replace(Pa,"/"):ye,ws=__dirname,ks=(0,z.join)(__dirname,"client");function js(){return(0,z.join)(ks,...arguments)}function xa(e){let t="",r=new Set;return e.forEach(n=>{let i=ge.default[n];i!==void 0&&i.forEach(a=>{if(r.has(a)===!0)return;r.add(a);let s=(0,z.basename)(a);if(ge.default[s]!==void 0)for(let l of ge.default[s])t+=He(l),r.add(l);t+=He(a)})}),t}var Ma="document.currentScript.remove()";function Ua(e){let t=e.nonce!==void 0?' nonce="'+e.nonce+'" ':"",r=(0,Ns.default)(e.state,{isJSON:!0});return"<script"+t+">window.__INITIAL_STATE__="+r+";"+Ma+"<\/script>"}async function Ea(e){let t=[];Object.assign(e,{_meta:{},onRendered:r=>{t.push(r)}});try{let r=await(0,Os.default)(e),n=await(0,_s.renderToString)(r,e);return t.forEach(i=>{i()}),typeof e.rendered=="function"&&e.rendered(),e._meta.runtimePageContent=n,e.state!==void 0&&(e._meta.headTags=Ua(e)+e._meta.headTags),e._meta.endingHeadTags+=xa(e.modules),(0,Is.default)(e)}catch(r){throw r}}var $s=(e,t={})=>hs(js(e),t),me={port:Ra,resolve:{urlPath:Cs,root(){return(0,z.join)(ws,...arguments)},public:js},publicPath:ye,folders:{root:ws,public:ks},render:e=>Ea(e),serve:{static:$s}},ze=ys(me);me.app=ze;ze.use(Cs("/"),$s("."));var Rs=()=>Le(me),Wa=(e,t,r)=>Rs().then(()=>ze(e,t,r)),Ta=ms({isReady:Rs,ssrHandler:Wa,...me});0&&(module.exports={});
