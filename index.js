var xs=Object.create;var ae=Object.defineProperty;var Ms=Object.getOwnPropertyDescriptor;var Es=Object.getOwnPropertyNames;var Us=Object.getPrototypeOf,Ws=Object.prototype.hasOwnProperty;var Ts=(e,t)=>()=>(e&&(t=e(e=0)),t);var Ge=(e,t)=>{for(var a in t)ae(e,a,{get:t[a],enumerable:!0})},Je=(e,t,a,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Es(t))!Ws.call(e,i)&&i!==a&&ae(e,i,{get:()=>t[i],enumerable:!(n=Ms(t,i))||n.enumerable});return e};var v=(e,t,a)=>(a=e!=null?xs(Us(e)):{},Je(t||!e||!e.__esModule?ae(a,"default",{value:e,enumerable:!0}):a,e)),Bs=e=>Je(ae({},"__esModule",{value:!0}),e);var Ss={};Ge(Ss,{default:()=>Pa});var bs,Pa,ws=Ts(()=>{bs=require("quasar/wrappers"),Pa=(0,bs.ssrMiddleware)(({app:e,resolve:t,render:a,serve:n})=>{e.get(t.urlPath("*"),(i,r)=>{r.setHeader("Content-Type","text/html"),a({req:i,res:r}).then(s=>{r.send(s)}).catch(s=>{s.url?s.code?r.redirect(s.code,s.url):r.redirect(s.url):s.code===404?r.status(404).send("404 | Page Not Found"):r.status(500).send("500 | Internal Server Error")})})})});var Aa={};Ge(Aa,{default:()=>Da});module.exports=Bs(Aa);var L=require("path"),Ns=require("vue/server-renderer"),Is=v(require("serialize-javascript")),Os=v(require("./render-template.js")),ye=v(require("./quasar.manifest.json")),ks=v(require("./server/server-entry.js"));var O=require("quasar/wrappers");var re=require("mongoose"),Ve="mongodb://127.0.0.1:27017/saleit",Ye="mongodb://127.0.0.1:27017/profile",Xe="mongodb://127.0.0.1:27017/chat";try{I=re.mongoose.createConnection(Ye,{}),console.log("Connecting to saleitProfile DataBases....")}catch(e){console.log("Error Connecting to saleitProfile DB_"+e),process.exit(1)}var I,Ka=I.connection;I.once("open",e=>{console.log(`saleitProfile Database connected: ${Ye}`)});I.on("error",e=>{console.error(`saleitProfile DB connection error: ${e}`)});try{k=re.mongoose.createConnection(Xe,{}),console.log("Connecting to saleitProfile DataBases....")}catch(e){console.log("Error Connecting to saleitProfile DB_"+e),process.exit(1)}var k,Ha=k.connection;k.once("open",e=>{console.log(`saleitProfile Database connected: ${Xe}`)});k.on("error",e=>{console.error(`saleitProfile DB connection error: ${e}`)});try{C=re.mongoose.createConnection(Ve,{}),console.log("Connecting to saleit DataBases....")}catch(e){console.log("Error Connecting to saleitProfile DB_"+e),process.exit(1)}var C,La=C.connection;C.once("open",e=>{console.log(`saleit Database connected: ${Ve}`)});C.on("error",e=>{console.error(`Procurment DB connection error: ${e}`)});var be=require("mongoose"),Ga=require("vue"),Va=be.mongoose.Schema,Ze=be.mongoose.Types.ObjectId;var qe={group:{type:String,default:"client"},profile:{group:{type:String,default:"client",role:{xrole:[],clients:["likes","comment"],upgraded:["clients","likes","comment"],creatorrw:2001,creator:2001,admin:2001},enum:["upgraded","client","creator","admin","xrole"]},role:[{type:String,default:"",enum:["likes","comments","clients","*","***",""]}],capability:{type:String,default:"1010"},accstage:{type:Array,default:[]}},profileMeta:{type:String,default:"client",role:{client:["clients","likes","comments"]},enum:["upgraded","client","creator","admin"]},saleit:{group:{type:String,default:"client",role:{xrole:[],client:["likes","comments","clients"],upgraded:["clients","likes","comments"],creatorrw:2001,creator:2001,admin:2001},enum:["upgraded","client","creator","admin","xrole"]},role:[{type:String,default:"",enum:["likes","comments","clients","*","***",""]}],capability:{type:String,default:"1010"},accstage:{type:Array,default:[]}},saleitClient:{group:{type:String,default:"client",role:{xrole:[],client:["likes","comments","clients"],upgraded:["clients","likes","comments"],creatorrw:2001,creator:2001,admin:2001},enum:["upgraded","client","creator","admin","xrole"]},role:[{type:String,default:"",enum:["likes","comments","clients","*","***",""]}],capability:{type:String,default:"1010"},accstage:{type:Array,default:[]}},saleitChat:{group:{type:String,default:"client",role:{xrole:[],client:["likes","comments","clients"],upgraded:["clients","likes","comments"],creatorrw:2001,creator:2001,admin:2001},enum:["upgraded","client","creator","admin","xrole"]},role:[{type:String,default:"",enum:["likes","comments","clients","*","***",""]}],capability:{type:String,default:"1010"},accstage:{type:Array,default:[]}},publicChat:{group:{type:String,default:"client",role:{xrole:[],client:["likes","comments","clients"],upgraded:["clients","likes","comments"],creatorrw:2001,creator:2001,admin:2001},enum:["upgraded","client","creator","admin","xrole"]},role:[{type:String,default:"",enum:["likes","comments","clients","*","***",""]}],capability:{type:String,default:"1010"},accstage:{type:Array,default:[]}}};var Qe={_stage_:{type:Number,default:1,$ifNull:1},profile:{type:Array,default:["/saleitgr/saleitpng.png"],$ifNull:["/saleitgr/saleitpng.png"],vtype:"file"},cover:{type:String,default:"/saleitgr/saleitpng.png",$ifNull:"/saleitgr/saleitpng.png",vtype:"file"},profileMeta:{type:Array,default:[{mimetype:"",encoding:"",originalname:"",destination:"",fieldname:"",filename:"",size:"",path:"",geoLocation:""}],ifNull:[{mimetype:"",encoding:"",originalname:"",destination:"",fieldname:"",filename:"",size:"",path:"",geoLocation:""}]},userName:{type:String,Vtype:"String",default:"",$ifNull:""},name:{type:String,Vtype:"String",default:"",$ifNull:"",validRuleset:"[ val => val && val.length > 0 || 'Please type something']"},lastName:{type:String,Vtype:"String",default:"",$ifNull:""},password:{type:String,vtype:"String",default:0,$ifNull:0},enrollKey:{type:String,vtype:"String",default:"",$ifNull:""},phone:{type:Number,vtype:"Number",default:0,$ifNull:0,required:!0,index:{unique:!0,dropDups:!0,length:10}},phoneCode:{type:Array,vtype:"Array",default:["",""],$ifNull:["",""],required:!0},location:{country:{type:String,default:"",$ifNull:""},provinance:{type:String,default:"",$ifNull:""},city:{type:String,default:"",$ifNull:""},street:{type:String,default:"",$ifNull:""}},geolocation:{lat:{type:Number,vtype:"Number",default:0,$ifNull:0},long:{type:Number,vtype:"Number",default:0,$ifNull:0}},verified:{type:String,Vtype:"String",default:"0",$ifNull:"",enum:["0","1"]},cart:{type:Array,Vtype:"Array",default:[],$ifNull:[]},contacts:{type:Array,vtype:"Array",default:[],$ifNull:[],index:{length:10}},queryWeight:{1:{type:Array,Vtype:"Array",default:[1,50,50,50],$ifNull:[1,50,50,50]},2:{type:String,Vtype:"String",default:"1.1.1.1",$ifNull:"1.1.1.1"},3:{type:String,Vtype:"String",default:"1.1.1.1",$ifNull:"1.1.1.1"}},acckey:{type:Ze,ref:"threeas"},acckey2:{type:Ze,ref:"threeas"}},et={userID:{type:String,default:""},location:{type:String,default:""},activities:{name:{type:String,default:""},amount:{type:Number,vtype:"Number",default:0}},interests:{type:String,default:""}};function S(e){var t=new Date-new Date(e),a=Math.floor(t/(1e3*60*60*24));if(a)return new Date(e).toLocaleString();var n=Math.floor(t/(1e3*60*60)),i=Math.floor(t/(1e3*60));return n%=24,i%=60,(n?n+" H,  ":"")+(i?i+" M ago":n?"":"just now")}var st=require("mongoose"),Se=st.mongoose.Schema,we=(e=null)=>new Date(e).toLocaleString(),at=new Se(qe,{timestamps:we});at.method("toJSON",function(){let{__v:e,_id:t,...a}=this.toObject();return a.id=t,a});var rt=new Se(Qe,{timestamps:we});rt.method("toJSON",function(){let{__v:e,_id:t,...a}=this.toObject();return a.id=t,a.fupdatedAt=S(a.updatedAt),a});var nt=new Se(et,{timestamps:we});nt.method("toJSON",function(){let{__v:e,_id:t,...a}=this.toObject();return a.id=t,a.fupdatedAt=S(a.updatedAt),a});var y;I.models.threeas??!1?console.log("Collections alread existed on"):(y=I.model("threeas",at),console.log(y,"New Created !"));var h;I.model.profileModel?console.log("assets Collections already existed on Procurment"):(h=I.model("profiles",rt),console.log(h,"New Created !"));var tt;I.model.profileMetaModel?console.log("assets Collections already existed on Procurment"):(tt=I.model("profileMetas",nt),console.log(tt,"New Created !"));var it=require("mongoose");ObjectId=it.mongoose.Types.ObjectId;var Ds=require("jsonwebtoken");async function As(e,t,a){console.log(`

 Authentication Middlewares =========> Entering 
`);let n=e.cookies??!1,i=n?n?.access_token??!1:!1;console.log(`Cookies Finding ; Option 1 : Cookies = ${i} 
`);var r=e.headers??!1;if(typeof r=="string"){let p=r;try{r=JSON.parse(p)}catch{}}let s=r.authorization??!1,l=r.cookie??!1;if(!i){let p="";s?(s=s.split(" ")??null,p=s.length<2?null:s[1],console.log(`Cookies Finding ; Option 2 : autorization Header-Cookies = ${p} 
`)):(p=l?l.replace("access_token= ",""):"",console.log(`Cookies Finding ; Option 2 : cookie Header-Cookies = ${l} 
`)),i=p?.trim()??i}if(!i)return console.log(`Cookies Finding Error ; No Cookie Founded : Exit!
`),t.status(401).send("Access forbidden ? _cookies failed");console.log(`Cookies Finding Final Passed ;  = ${i} 
`);let o=null;var u=r?.acckey??null,c=r?._iss??null,f=r?._issmodal??null,d=r?.acckey??null;try{let p=Ds.verify(i,"itserviceKey");console.log(`Token Decoded For = 
`),console.log(p),p&&(o=p.userID??o,u=p.acckey??u)}catch{console.log(`Token Decoded Error = 
`)}if(o)await h.findOne({_id:new ObjectId(o)}).then(p=>{if(p)u=p.acckey??!1,d=p.queryWeight??!1;else return t.status(403).send("userID ; Access forbidden")}).catch(()=>t.status(403).send("userID ; Access forbidden"));else return t.status(401).send("Access forbidden ? userID failed");try{c=null,f=f??"saleit",console.log(`== Role & Permission Acckey ${u?"is OK":"No"} && Target Modal is = ${f??"No Model_Specified"}  
`),u&&f&&await y.findOne({_id:new ObjectId(u)}).then(p=>(p&&(c=p[f]??null),!0)).catch(()=>!0),console.log(`== Role & Permission  = Null for Modal = ${f??"No Model ?"} && ${c} 
`)}catch(p){return console.log(p),!0}return c?(e.userID=o,e.issId=u,e.issrole=c,e.queryWeight=d,e.params.lat=r.lat??"",e.params.long=r.long??"",e.location={lat:r.lat??"",long:r.long??""},console.log(`Ending MWare UserID = ${o} && Acckey = ${u} 
`),console.log(`
 Lat : `,r.lat??!1),a(),!0):t.status(403).send("UserRole ; Access forbidden")}var g=As;var ut=require("mongoose"),ct=v(require("jsonwebtoken")),dt=require("express"),lt=ut.mongoose.Types.ObjectId,ft=(0,dt.Router)(),Fs={"Content-Type":"application/json","Content-Length":"5000",ETag:"Roaw"},ot=["id"];var ne=["phone","id"];ft.post("/login",async(e,t)=>{let a=e.body??{},n=Object.keys(a),i=ne.every(s=>new Set(n).has(s));if(!n.length&&!i)return t.status(404).send("createKey","is Null");let r={};for(let s in ne){let l=ne[s],o=a[l]??!1;if(console.log(l,`
`,ne,ot.includes(l),o),o)if(ot.includes(l))try{r._id=new lt(o)}catch{}else r[l]=(l=="phone"&&o.length==10,o)}delete r.phoneCode,console.log(r,`findbyyyyyy

`,a);try{return await h.findOne(r).then(async s=>{if(console.log(`

 User Authentication Profile == ${s??null},, for userID = 
`),console.log(r),s&&Object.keys(s).length){console.log(`
 User Acckey  == ${s.acckey??!1}  <= ${s.acckey??!1?"Yes":"No"} < == >User Already Existed ?
`);let l=new lt(s.acckey);return await y.findOne({_id:l}).then(o=>{if(console.log(`
 Checked :_ User Acckey / ID == ${o?.id??!1}  <= < == >User Already Existed ?
`),o){s=s.toObject()??!1;var u=null;try{u=ct.default.sign({id:s._id,userID:s._id,acckey:o.id},"itserviceKey",{expiresIn:"1d"})}catch{}if(!u)return t.status(501).json({data:"Token Generating Error"});let c=24*60*60*1e3;return t.setHeader("authorization",`Bearer ${u}`),t.cookie("access_token",u,{maxAge:864e5,httpOnly:!0,domain:e.hostname,secure:!1,signed:!1,sameSite:"Lax"}),t.setHeader("acctype",JSON.stringify(o)),t.setHeader("token",u),t.setHeader("role",o.profile.group??null),s.acctype=o,s.id=s._id,console.log(e.hostname,`
 Final Checked :  == ${s.id??!1}  <= < == >User Authenticated ? with token 
 ${u}`),(a.enrollKey??!1)&&(s.enrolled=a.enrollKey==s.enrollKey),t.set(Fs),t.status(200).send(s)}return t.status(501).json(o)}).catch(o=>(console.log(`
 ${o}`),t.status(501).send(o)))}else return t.status(202).send(s)}).catch(s=>t.status(404).send(s))}catch(s){return t.status(505).send(s)}});var pt=ft;var gt=require("mongoose"),Ks=require("jsonwebtoken");ObjectId=gt.mongoose.Types.ObjectId;async function Hs(e,t,a){var n=e.cookies??e.headers.cookie??!1,i=e.headers??!1;let r=n?.access_token??!1;if(typeof i=="string"){let d=i;try{i=JSON.parse(d)}catch{}}let s=i.authorization??!1;if(s&&(r=s.split('"')[1]?.trim()??r),!(r&&i))return t.status(403).send("Access forbidden");let l=i.id??null;var o=i?.acckey??null,u=i?._iss??null,c=i?._issmodal??null,f=i?.acckey??null;try{let d=Ks.verify(r,"itserviceKey");(!l||d)&&(l=d.userId??l,o=d.acckey??o),console.log(l,"bearToken-------------->")}catch{}if(l)await h.findOne({_id:new ObjectId(l)}).then(d=>{if(d)o=d.acckey??!1,f=d.queryWeight??!1;else return t.status(403).send("Access forbidden")}).catch(()=>t.status(403).send("Access forbidden"));else return t.status(403).send("Access forbidden");return e.userId=l,e.issId=o,e.issrole=u,e.queryWeight=f,o&&c?await y.findOne({_id:new ObjectId(o)}).then(d=>(d?u=d[c]:u=null,!0)).catch(()=>!0):(u=null,e._issrole=u,a(),!0)}var yt=Hs;var vt=require("mongoose"),bt=v(require("jsonwebtoken")),St=require("express");var w=async function(e,t=[],a={},n=100,i={createdAt:-1},r=0){try{return await e.find({$or:t},a).sort(i).skip(Number(r)).limit(Number(n)).then(s=>(console.log(s.length,"or Fetching..","skips =",r,"limits =",n,"sortBy =",i),s?{status:200,data:s}:{status:200,data:s})).catch(s=>({status:501,data:s}))}catch(s){return{status:500,data:s}}},b=async function(e,t=[],a={},n=100,i={createdAt:-1},r=0){try{return await e.find({$and:t},a).sort(i).skip(Number(r)).limit(Number(n)).then(s=>(console.log(s.length,"and& Fetching..","skips =",r,"limits =",n,"sortBy =",i),s?{status:200,data:s}:{status:200,data:s})).catch(s=>({status:501,data:s}))}catch(s){return{status:500,data:s}}},E=async function(e,t=[],a={},n=100,i={createdAt:-1}){try{return await e.find({$or:t},a).sort(i).limit(n).then(r=>(console.log(r.length,"Or Fetching"),r?{status:200,data:r}:{status:200,data:r})).catch(r=>({status:501,data:r}))}catch(r){return{status:500,data:r}}},$=async function(e,t){try{return await e.findByIdAndDelete(t).then(a=>a&&Object.keys(a).length?{status:200,data:a}:{status:200,data:null}).catch(a=>({status:501,data:a}))}catch(a){return{status:500,data:a}}};var mt=require("mongoose"),_e=mt.mongoose.Types.ObjectId;var Ls=["id","Id","ID"],zs=["saleitID","userID"];var Gs=["geoSearch","queryOperator","returnWat","limits","skips","sortBy","upload","timestamp","latest","lat","long","paginationID"];async function m(e={}){if(!e)return[!1,!1,!1,!1,!1];var t={};let a=[],n=e.limits??0,i=e.skips??0,r=e.sortBy??{createdAt:-1};return console.log(`
 Incoming Query 
`,e),[Object.keys(e).length?await Vs(e):[{}],a,n,r,i]}var ie=3,Js={nearMe:5,myCity:3,myCountry:1,off:0};async function Vs(e={}){let t=[];console.log(`
 Incoming Cleared Query 
`,e);let a=e.geoSearch??"off",n=(e.queryOperator??"-or").split("-");for(let r in e){let s=r;var i=e[r]??"";if(Gs.includes(r))continue;try{i=isNaN(Number(i))?i:Number(i)}catch{}let l={};if(s=="qweight"){let o=parseInt(i[1]),u=parseInt(i[2]);console.log(`
 `,n[0]),n[0]=="productSpecific"?t=[{catagoryScore:o==0?{$gte:0}:o},{usageScore:u==0?{$gte:0}:u}]:n[0]=="userSpecific"?t=[{catagoryScore:{$gte:o-o/ie,$lte:o+o/ie}},{usageScore:{$gte:u-u/ie,$lte:u+u/ie}}]:i.length==5&&(t=[{catagoryScore:{$gte:0}},{usageScore:{$gte:0}}],t.push({trendScore:{$lte:1e4}}));break}else if(Ls.includes(r))try{l._id=new _e(i)}catch{}else if(zs.includes(r))try{l[r]=new _e(e[r]??"")}catch{}else l[r]=typeof i=="string"?{$regex:i,$options:"i"}:i;t.push(l)}if(e.paginationID??!1)try{t.push({_id:{$gt:new _e(e.paginationID)}})}catch{console.log(`
 Error Formating Pagination ID ...`)}if(a!="off"&&(e.lat??!1)){let r=Js[a];t.push({$expr:{$regexMatch:{input:{$toString:"$geolocation.long"},regex:"^"+String(e.long).slice(0,r)}}}),t.push({$expr:{$regexMatch:{input:{$toString:"$geolocation.lat"},regex:"^"+String(e.lat).slice(0,r)}}})}return t.length?t=t.filter(r=>Object.keys(r).length):t=[{}],console.log(`
Yield Query 
`,t,`
 => DBs Search`),t}var le={};async function Ne(e,t,a=!1,n=!1){console.log(`
============= Document Update ============= updateKey =`+a+" <<START>>"),le={};for(let i in t)try{let r=t[i],s={};a??!1?s[a]=r[a]??null:s={updatedAt:null},await e.findOne(s).then(async l=>{if(l==null)l=new e(r),console.log("Creating Document =",l.updateKey??"",s," ;;Newly Creating Process Debug",l);else{if(!a)return!1;l=Object.assign(l,r),console.log("Updating Document =",l.updateKey??"",s,`;
 Incoming AccKey =`,l)}return await l.save().then(o=>(o=o.toObject()??!1,o&&Object.keys(o).length?(a&&(le[s[a]]=o),console.log(`
============= Document Update ============ END Success `+i),{status:200,data:le}):{status:501,data:o})).catch(o=>(console.log(o,"Creating Process Debug Error"),{status:500,data:o}))}).catch(l=>({status:500,data:l}))}catch(r){return{status:500,data:r}}return{status:200,data:le}}var Ys=[{group:"client",saleit:{group:"client",role:["likes","comments","clients"],capability:"02220",accstage:[1,3,4,5]},profile:{group:"client",role:[""],capability:"22220",accstage:[1,3,4,5]},profileMeta:"client",saleitClient:{group:"client",role:[""],capability:"22220",accstage:[1,3,4,5]},saleitChat:{group:"client",role:[""],capability:"22220",accstage:[1,3,8]},publicChat:{group:"client",role:[""],capability:"22220",accstage:[1,3,8]}},{group:"upgraded",profile:{group:"upgraded",role:[""],capability:"22220",accstage:[1,3,4,5]},profileMeta:"upgraded",saleitClient:{group:"upgraded",role:[""],capability:"22220",accstage:[1,3,4,5]},saleitChat:{group:"upgraded",role:[""],capability:"22220",accstage:[1,3,8]},publicChat:{group:"upgraded",role:[""],capability:"22220",accstage:[1,3,8]}},{group:"creator",saleit:{group:"creator",role:[""],capability:"22220",accstage:[1,2,3,4,5]},profile:{group:"creator",role:[""],capability:"22220",accstage:[1,3,4,5]},profileMeta:"creator",saleitClient:{group:"creator",role:[""],capability:"22220",accstage:[1,2,3,4,5]},saleitChat:{group:"creator",role:[""],capability:"22220",accstage:[1,3,8]},publicChat:{group:"creator",role:[""],capability:"22220",accstage:[1,3,8]}},{group:"admin",saleit:{group:"admin",role:[""],capability:"22220",accstage:[1,2,3,4,5]},profile:{group:"admin",role:[""],capability:"22220",accstage:[1,3,4,5]},profileMeta:"admin",saleitClient:{group:"admin",role:[""],capability:"22220",accstage:[1,3,8]},saleitChat:{group:"admin",role:[""],capability:"22220",accstage:[1,3,8]},publicChat:{group:"admin",role:[""],capability:"22220",accstage:[1,3,2,3]}}],Xs="group",Zs="creator",qs="phone";async function ht(){return console.log(`

-==--------------------------------Role & Permissions Managment---------------START`),await Ne(y,Ys,Xs).then(async e=>{console.log(`
`+Object.keys(e.data),` = Sum of Role and Permissions <=>
`);for(let i in e.data);let t=null;if(e.status==200)t=e.data[Zs]??!1;else return!0;let a=[{name:"root",lastName:"root",phone:"123456787",acckey:t?new ObjectId(t._id):null}],n=await Ne(h,a,qs);return console.log(`User Creating  ====>> ${n.status==200?"success":"Error"}`),console.log(`---------------------------------Role & Permissions Managment---------------END

`),!0})}var Qs=vt.mongoose.Types.ObjectId;ht();var U=(0,St.Router)(),Oe=y,oe="/permission",ue={"Content-Type":"application/json","Content-Length":"5050",ETag:"Roaw","Set-Cookie":["type=ninja","language=javascript"]},Ie="phone";U.post("/add",yt,async(e,t)=>{let a={},n=e.body??{};if(n[Ie]??!1)a[Ie]=n[Ie]??!1;else return t.status(303).send("req.body is null");let i=await y.findOne({group:n.upgrade??"creator"});if(i)modelQA.acckey=i._id;else return{status:303,data:"Permission Assign Error"};try{return await h.findOne(a).then(async r=>{if(r&&Object.keys(r).length){let s=new Qs(r.acckey);return await y.findOne({_id:s}).then(l=>{if(l){let o=bt.default.sign({userID:r.id,acckey:l.id},"itserviceKey",{expiresIn:"1h"});return t.setHeader("Authorization",`Bearer ${o}`),t.cookie("access_token",o,{maxAge:9e5,httpOnly:!0,secure:!1,signed:!1}),t.setHeader("threea",JSON.stringify(l)),t.setHeader("token",JSON.stringify(o)),t.setHeader("role",l.profile.group),t.status(200).send(JSON.stringify(r))}return t.status(404).json("Permission Error")}).catch(()=>t.status(404).json({}))}else return t.status(202).send(null)}).catch(r=>t.status(404).send(r))}catch(r){return t.status(505).send(r)}});var ea="group";U.put(oe,g,async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1];if(!n)return t.status(404).send({message:"NullData(P +token) Received."});let r={};return r=e.body??{},Object.keys(r).length==0&&(r[ea]??!0)?t.status(404).send(""):(r.userID=n,documentCupdate(y,[r],"group").then(s=>(t.set(ue),t.status(s.status).send(s.data))))});U.get(oe+"s",g,async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],r=e.query??e.params??{};Object.keys(r).length==0;let[s={},l=[],o=100]=await m(r);try{let u=await w(Oe,s,l,o);return u.status==200?(t.set(ue),t.status(u.status).send(u.data)):t.status(404).send("(Srv):- _read303;but, "+u.data)}catch{return t.status(505).send("(Srv);- _read505")}});U.get(oe,g,async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],r=e.query??e.params??{};Object.keys(r).length==0;let[s={},l=[],o=100]=await m(r);try{let u=await b(Oe,s,l,o);return u.status==200?(t.set(ue),t.status(u.status).send(u.data)):t.status(404).send("(Srv):- _readf202;but, "+u.data)}catch{return t.status(505).send("(Srv);- _readf505")}});U.delete(oe,g,async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1];if(!n)return t.status(404).send({message:"NullData(P) Received."});let r=e.query??e.params??{};Object.keys(r).length==0;try{let s=await $(Oe,r.id);return s.status==200?(t.set(ue),t.status(s.status).send(s.data)):t.status(404).send("(Srv):- _del202;but, "+s.data)}catch{return t.status(505).send("(Srv);- _del505")}});var wt=U;var kt=require("express"),z=v(require("multer")),Ct=require("mongoose");var _r=require("multer");async function W(e){let t={};for(let s in e){t[s]=[],t[s+"Meta"]=[];var a=e[s];for(let l in a)try{var n=a[l],i="/"+n.fieldname+"/"+n.filename,r={thefilePath:i,geoLocation:"0000000000xyz"};t[s][l]=r.thefilePath,t[s+"Meta"][l]=r}catch{return!1}}return t}async function _t(e){let t={};var a={thefilePath:"/"+e.fieldname+"/"+e.filename,geoLocation:"0000000000xyz"};return t[e.fieldname]=a.thefilePath,t[e.fieldname+"Meta"]=a,t}var Nt=Ct.mongoose.Types.ObjectId,B=(0,kt.Router)(),R=h,G="/profile",T={"Content-Type":"application/json","Content-Length":"5050",ETag:"Roaw","Set-Cookie":["type=ninja","language=javascript"]};var It={"application/pdf":"pdf","application/zip":"zip","text/csv":"csv","text/pdf":"pdf","text/json":"json","image/jpeg":"jpeg","image/png":"png","image/svg+xml":"svg+xml","image/webp":"webp","video/mp4":"mp4","video/mkv":"mkv"},je=()=>{var e="";return{storage:z.default.diskStorage({filename:(t,a,n)=>{let i=It[a.mimetype];e=a.originalname.split(".")[0].split(" ")[0]+"-"+new Date().getTime()+"."+i,n(null,e)},destination:(t,a,n)=>{n(null,"./public/"+a.fieldname)},path:(t,a,n)=>{n(null,"/"+a.fieldname+"/"+e)}}),limits:{fileSize:1e6*5},fileFilter:(t,a,n)=>{if(It[a.mimetype])n(null,!0);else return n(null,!1)}}},ta={updatedAt:null},ce="phone",ke="id";B.post(G,async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],r=e.query?e.query:e.params;var s=r?.file_??!1;let l={};console.log(`
<==> Profile API Creating New User == Parameters => ${r}`);try{if(s)(s.files??!1)&&(0,z.default)(je()).fields([{name:s.files,maxCount:4}])(e,t,async o=>{if(l=e.body??{},o)return t.status(303).send({message:"Uploading Error"+o});{let u=e.files??!1;if(u){let c=await W(u);l[s.files]=c[s.files]}}return l.userID=n,await Ot(l).then(u=>t.status(u.status).send(u.data))});else return l=e.body??{},(l[ce]??null)==null?t.status(404).send(""):(l.userID=n,await Ot(l).then(o=>(console.log(`
Creating Status == ${o.data}

`,l),t.set(T),t.status(o.status).send(o.data))))}catch(o){return t.status(401).send(o)}});B.put(G,g,async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1];if(!n)return t.status(404).send({message:"NullData(P +token) Received."});var s=(e.query?e.query:e.params)?.file_??!1;let l={};try{if(s)s.files??!1?(0,z.default)(je()).fields([{name:s.files,maxCount:4}])(e,t,async o=>{if(l=e.body??{},o??!1)return t.status(303).send({message:"Uploading Error"+o});{let u=e.files??!1;if(console.log(`
(Multiple) File Existed as `,u,o),u){let c=await W(u);l[s.files]=c[s.files]}else return t.status(303).send({message:"Uploading Error"})}return(l[ke]??null)==null?t.status(404).send(""):(l.userID=n,await Ce(l).then(u=>(t.set(T),t.status(u.status).send(u.data))))}):(s.file??!1)&&(0,z.default)(je()).single(s.file)(e,t,async o=>{if(l=e.body??{},o??!1)return t.status(303).send({message:"Uploading Error"+o});{let u=e.file??!1;if(console.log(`
(Single) File Existed as `,u,o),u){let c=await _t(u);l[s.file]=c[s.file]}else return t.status(303).send({message:"Uploading Error"})}return(l[ke]??null)==null?t.status(404).send(""):(l.userID=n,await Ce(l).then(u=>(t.set(T),t.status(u.status).send(u.data))))});else return l=e.body??{},(l[ke]??null)==null?t.status(404).send(""):(l.userID=n,await Ce(l,"UpdateRowItem",l.onplaySubops??!1).then(o=>(t.set(T),t.status(o.status).send(o.data))))}catch(o){return t.status(401).send(o)}});B.get(G+"s",g,async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],r=e.query??e.params,[s={},l=[],o=100,u={createdAt:-1},c=0]=await m(r);if(!Object.keys(s).length)return t.status(404).send({message:"NullData(P) Received."});let f=(r.queryOperator??"-or").split("-");try{let d=f[1]=="and"?await b(R,s,l,o,u):await w(R,s,l,o,u);return d.status==200?t.status(d.status).send(d.data):t.status(404).send("(Srv):- _read303;but, "+d.data)}catch{return t.status(505).send("(Srv);- _read505")}});B.get(G,g,async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],r=e.query??e.params,[s={},l=[],o=100,u={createdAt:-1},c=0]=await m(r);if(!Object.keys(s).length)return t.status(404).send({message:"NullData(P) Received."});let f=(r.queryOperator??"-or").split("-");try{let d=f[1]=="and"?await b(R,s,l,o,u):await E(R,s,l,o,u);return d.status==200?(t.set(T),t.send(d.data)):t.status(404).send("(Srv):- _readf202;but, "+d.data)}catch{return t.status(505).send("(Srv);- _readf505")}});B.delete(G,g,async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1];if(!n)return t.status(404).send({message:"NullData(P) Received."});let r=e.query??e.params;if(!(r??!1)||Object.keys(r).length==0)return t.status(404).send("NullData(P) Received.");try{let s=await $(R,r.id);return s.status==200?(t.set(T),t.send(s.data)):t.status(404).send("(Srv):- _del202;but, "+s.data)}catch{return t.status(505).send("(Srv);- _del505")}});var jt=B;async function Ot(e){try{let t={};return e[ce]??!1?t[ce]=e[ce]:t=ta,console.log(`
<==>CreateContent Profile Service 0=> Check Existances of Params 
`),await R.findOne(t).then(async a=>{a==null?(a=new R(e),console.log(`
 == New User Profile Created !
`)):(a=Object.assign(a,e),console.log(`
 == Exising User --> Updating User Profile With Incoming Data !
`));let n=e.group??"client",i="";console.log(`
 == Assing Role & Permission !
`);try{i=await y.findOne({group:n}),console.log(`
 == Role & Permission Acckey = ${i._id??null} == ${n}!
`)}catch(r){n=r}if(i)a.acckey=i._id;else return{status:303,data:"Permission Assign Error"};return a.phone.length==10&&(a.phone=a.phone.slice(1,9)),console.log(`oooooooooooooo
`,a.phone,"pppppppppp"),await a.save().then(r=>r&&Object.keys(r).length?{status:200,data:r}:{status:303,data:r}).catch(r=>({status:303,data:r}))}).catch(a=>({status:303,data:a}))}catch{return{status:303,data:"Fatal DATABASE ERROR"}}}var sa="id";async function Ce(e,t=null,a=null){console.log(`

 Updating Profile 
`);try{let n={};if(e.id??!1)n._id=new Nt(e[sa]);else return{status:303,data:"body.null data"};return console.log(`
<==>UpdatingContent Profile Service 0=> Check Existances of Params 
`),console.log(n),await R.findOne(n).then(async i=>{if(console.log(`
<==> Acckey = ${i.acckey??" No User"} && subOps = ${a} 
`),i==null)return{status:303,data:"Record Doesn't Found."};if(a=="updateRole"&&(e.group??!1)){console.log(`
 == Updating Role & Permission New Group = ${e.group??!1}`);let r=await y.findOne({group:e.group});r?(console.log(`
 == Profile Role Updating  acckey = ${r.id??null} && RoleGroup =${e.group}`),i=Object.assign(i,{acckey:new Nt(r.id)})):console.log(`
 == Updating Role & Permission ;- Creating New Group = ${e.group??!1} ; Failed`)}else i=Object.assign(i,e);return await i.save().then(r=>r&&Object.keys(r).length?{status:200,data:r}:{status:303,data:r}).catch(r=>({status:303,data:r}))}).catch(i=>({status:303,data:i}))}catch{return{status:303,data:"Fatal DATABASE ERROR"}}}var $t=require("mongoose"),Er=require("vue"),aa=$t.mongoose.Schema,$e=aa.ObjectId;var Rt={userID:{type:$e,ref:"profiles"},content:{type:String,default:""},phone:{type:String,default:0}},Pt={comment:{type:String,vtype:"String",default:"",$ifNull:""},saleitID:{type:$e,ref:"saleits"},userID:{type:$e,ref:"profiles"},userName:{type:String,vtype:"String",default:"",$ifNull:""},phone:{type:Number,vtype:"Number",default:"",$ifNull:""}};var xt=require("mongoose"),Re=xt.mongoose.Schema,Ar=Re.ObjectId,Mt=(e=null)=>new Date(e).toLocaleString(),Et=new Re(Rt,{timestamps:Mt});Et.method("toJSON",function(){let{__v:e,_id:t,...a}=this.toObject();return a.id=t,a.fupdatedAt=S(a.updatedAt),a.fcreatedAt=S(a.createdAt),a});var Ut=new Re(Pt,{timestamps:Mt});Ut.method("toJSON",function(){let{__v:e,_id:t,...a}=this.toObject();return a.id=t,a.fupdatedAt=S(a.updatedAt),a.fcreatedAt=S(a.createdAt),a});var Pe;k.model.publicChatModel?console.log("assets Collections already existed on Procurment"):Pe=k.model("publicChats",Et);var J;k.model.saleChatModel?console.log("sale it Collections already existed on saleit content"):J=k.model("contentChats",Ut);var Jt=require("mongoose"),Vt=require("express"),dn=require("multer");var Me=require("mongoose");var Kr=Me.mongoose.Schema,xe=Me.mongoose.Types.ObjectId,Wt={_stage_:{type:Number,vtype:"Number",default:1},userID:{type:xe,ref:"profiles"},userName:{type:String,vtype:"String",default:"",$ifNull:""},phone:{type:Number,vtype:"Number",default:"",$ifNull:""},phoneCode:{type:Array,vtype:"Array",default:["",""],$ifNull:["",""],required:!0},catagory:{type:String,vtype:"String",default:"Households",$ifNull:"Households",enum:["Electronics","Vehicles","Households","Land/House","Clothing","Food","Others"]},queryWeight:{type:String,vtype:"String",default:"1.1.1.1",$ifNull:"1.1.1.1"},catagoryScore:{type:Number,vtype:"Number",default:0,$ifNull:0},usageScore:{type:Number,vtype:"Number",default:0,$ifNull:0},trendScore:{type:Number,vtype:"Number",default:0,$ifNull:0},usage:{type:String,vtype:"String",default:"Used",$ifNull:"Used",enum:["New","Used","Others"]},saleitgr:{type:Array,default:["/saleitgr/saleitpng.png"],vtype:"file"},header:{type:String,vtype:"String",default:"....",$ifNull:"....",validRuleset:"[ val => val && val.length > 0 || 'Please type something']"},content:{type:String,vtype:"String",textarea:!0,default:"....",$ifNull:"...."},quantity:{type:Number,vtype:"Number",default:0,$ifNull:0},price:{type:Number,vtype:"Number",default:0,$ifNull:0},currency:{type:String,vtype:"String",default:"$(US)",$ifNull:"$(US)",enum:["$(US)","GB Pound","Euro","ETB","Pound",""]},discount:{type:Number,vtype:"Number",default:0,$ifNull:0},tPrice:{type:Number,vtype:"Number",default:0,$ifNull:0},location:{country:{type:String,default:"",$ifNull:""},provinance:{type:String,default:"",$ifNull:""},city:{type:String,default:"",$ifNull:""},street:{type:String,default:"",$ifNull:""}},geolocation:{lat:{type:Number,vtype:"Number",default:0,$ifNull:0},long:{type:Number,vtype:"Number",default:0,$ifNull:0}},timer:{action:{type:String,vtype:"String",enum:["delete","expired","sold",""],default:"",$ifNull:""},hours:{type:Number,vtype:"Number",default:-1,$ifNull:-1},days:{type:Number,vtype:"Number",default:-1,$ifNull:-1}},status:{type:String,vtype:"String",default:"posted",$ifNull:"posted",enum:["posted","sold","Paused","discarded"]},likes:{like:{type:Number,vtype:"Number",default:0,$ifNull:0},dislike:{type:Number,vtype:"Number",default:0,$ifNull:0}},completed:{type:String,vtype:"String",default:"no",$ifNull:"no"},_itServiceRating:{type:Number,vtype:"Number",default:0,$ifNull:0},tClient:{type:Number,vtype:"Number",default:0,$ifNull:0},tQs:{type:Number,vtype:"Number",default:0,$ifNull:0},tQ:{type:Number,vtype:"Number",default:0,$ifNull:0},tC:{type:Number,vtype:"Number",default:0,$ifNull:0},tQC:{type:Number,vtype:"Number",default:0,$ifNull:0},tQt:{type:Number,vtype:"Number",default:0,$ifNull:0},tCt:{type:Number,vtype:"Number",default:0,$ifNull:0},tQCt:{type:Number,vtype:"Number",default:0,$ifNull:0},tQCtonD:{type:Number,vtype:"Number",default:0,$ifNull:0},tQCttech:{type:Number,vtype:"Number",default:0,$ifNull:0}},Tt={geolocation:{lat:{type:String,vtype:"String",default:"000000",$ifNull:"000000"},long:{type:String,vtype:"String",default:"000001",$ifNull:"000001"}},location:{country:{type:String,default:"",$ifNull:""},provinance:{type:String,default:"",$ifNull:""},city:{type:String,default:"",$ifNull:""},street:{type:String,default:"",$ifNull:""}},phone:{type:Number,vtype:"Number",default:"",$ifNull:""},phoneCode:{type:Array,vtype:"Array",default:["",""],$ifNull:["",""],required:!0},saleitID:{type:xe,ref:"saleits"},userID:{type:xe,ref:"profiles"},orderID:{type:String,vtype:"String",default:"xyxy",$ifNull:"+xyxy"},confirmID:{type:String,vtype:"String",default:"xyxy",$ifNull:"+xyxy"},quantity:{type:Number,vtype:"Number",default:0,$ifNull:0},price:{type:Number,vtype:"Number",default:0,$ifNull:0},currency:{type:String,vtype:"String",default:"$(US)",$ifNull:"$(US)",enum:["$(US)","GB Pound","Euro","ETB","Pound",""]},paymentMethod:{type:String,vtype:"String",default:"onDelivery",$ifNull:"onDelivery",enum:["onDelivery","TELBirr","EBCBirr","others",""]},served:{type:String,vtype:"String",default:"Requested",$ifNull:"Requested",enum:["Served","Queed","Requested","Requesting"]},store:{type:String,vtype:"String",default:"cart",$ifNull:"cart",enum:["cart","buy","bought"]},description:{type:String,vtype:"String",default:"",$ifNull:""}};var Ee=require("mongoose"),Bt=Ee.mongoose.Schema;Ee.mongoose.set("strictQuery",!0);var Dt=(e=null)=>new Date(e).toLocaleString(),At=new Bt(Wt,{timestamps:Dt});At.method("toJSON",function(){let{__v:e,_id:t,...a}=this.toObject();a.id=t,a.fupdatedAt=S(a.updatedAt),a.fcreatedAt=S(a.createdAt);let n=String(a.phone);return a.fphone=n.slice(0,3)+"****"+n[7]+n[8],a.netPrice=(a.discount??0)||(a.price??0),a.isOpen=(a.netPrice??0)*(a.quantity??0),a});var Ft=new Bt(Tt,{timestamps:Dt});Ft.method("toJSON",function(){let{__v:e,_id:t,...a}=this.toObject();a.id=t,a.fupdatedAt=S(a.updatedAt),a.fcreatedAt=S(a.createdAt);let n=String(a.phone);return a.fphone=n.slice(0,3)+"****"+n[7]+n[8],a});var j;C.model.saleitModel?console.log("sale it Collections already existed on saleit content"):(j=C.model("sales",At),console.log(j,"New Created !"));var M;C.model.saleitClientModel?console.log("sale it Collections already existed on saleit content"):(M=C.model("saleitClients",Ft),console.log(M,"New Created !"));var Ht=require("mongoose"),Qr=require("express");ObjectId=Ht.mongoose.Types.ObjectId;var ra={Households:5,Clothing:20,Food:35,Electronics:50,Vehicles:65,"Land/House":80,Others:100},na={New:100,Used:75,All:1};var Ue={updatedAt:null},P=class{constructor(t,a){console.log(`
_user_Und_foreign_Operations Init 
 With User++currentModel =`,t,` & Data of UserID= 
`,a.userID??!1),this.reqData=a,this.model=t||"",this.userID=null,this.modalId=null,this.createNew=!0}async addFollowing(){this.userID=this.reqData.userID?{_id:new ObjectId(this.reqData.userID)}:Ue;try{let t=await h.findOne(this.userID,{});if(!t)return{status:501,foreignData:"User doesn't exist"};let a=this.reqData.followingPhone||"";(t.contacts??!1)||(t.contacts=[]),t.contacts.includes(a)||t.contacts.push(a);let n=await t.save();return n&&Object.keys(n).length?{status:200,foreignData:n}:{status:400,foreignData:n}}catch(t){return{status:505,foreignData:t}}}async computeUser(){this.userID=this.reqData.userID?{_id:new ObjectId(this.reqData.userID)}:Ue;try{let t=await h.findOne(this.userID,{});if(!t)return{status:501,foreignData:"User doesn't exist"};let a=this.reqData.weight||!1;if(!a)return{status:400,foreignData:"No Weights to be updated."};let n=t.queryWeight||!1;if(n&&n[1]){let r=n[1];r=r.map((s,l)=>Math.ceil((s+a[l])/2-1)),r[3]=Math.ceil(r[3]+1),t.queryWeight[1]=[1,r[1],r[2],r[3]]}else t.queryWeight[1]=[1,1,1,1];let i=await t.save();return i&&Object.keys(i).length?{status:200,foreignData:i}:{status:400,foreignData:i}}catch(t){return{status:505,foreignData:t}}}async saveItem(t=!0){return this.createNew=t,this.reqData.id==null?this.modalId=Ue:this.modalId={_id:new ObjectId(this.reqData.id)},await this.save()}async deleteItem(){return this.reqData.id==null?{status:401,foreignData:""}:(this.modalId={_id:new ObjectId(this.reqData.id)},await this.delete())}async save(){try{let t=await this.model.findOne(this.modalId,{});if(t)Object.assign(t,this.reqData);else if(this.createNew)t=new this.model(this.reqData);else return{status:501,foreignData:"Client Doesn't exist"};let a=await t.save();return a&&Object.keys(a).length?{status:200,foreignData:a}:{status:400,foreignData:a}}catch(t){return{status:505,foreignData:t}}}async delete(){try{return await this.model.findByIdAndDelete(this.modalId).then(t=>t&&Object.keys(t).length?{status:200,foreignData:t}:{status:400,foreignData:t}).catch(t=>({status:400,foreignData:t}))}catch(t){return{status:505,foreignData:t}}}};async function ia(e,t,a,n){if(a=="likes"){t.weight=await u();let c=new P(null,t),f=null;try{f=await c.computeUser()}catch{}return console.log(a,`
  Sale UserData Status Result 
`,f.status),f.status!=200||(e=Object.assign(e,t),e.likes.like++,f.data=e),f}else if(a=="following"){t.followingPhone=e.phoneCode[1]+" "+e.phone,t.weight=await u();let c=new P(null,t),f=null;try{f=await c.addFollowing()}catch{}return console.log(a,`
 Sale UserData Status Result  
`,f.status),f.status!=200||(e=Object.assign(e,t),f.data=e),f}else if(a=="_itServiceRating"){t.weight=await u();let c=new P(null,t),f=null;try{f=await c.computeUser()}catch{}return console.log(a,`
 Sale UserData Status Result  
`,f.status),f.status!=200||(e=Object.assign(e,t),e._itServiceRating=e._itServiceRating+(t._itServiceRating-e._itServiceRating)/2,e._itServiceRating=Math.min(e._itServiceRating,5),f.data=e),f}else if(a=="CreateRowItem"){t.weight=await u(!0);let c=parseFloat(t.quantity??0),f=parseFloat(t.price??0),d=parseFloat(t.discount??0);return t.quantity=c>0?c:1,t.price=f>0?f:0,t.discount=d>0?d:0,e=Object.assign(e,t),e.tQs=t.quantity,e.tQ=t.quantity,{status:200,data:e}}else if(a=="UpdateRowItem"){t.weight=await u(!0);let c=parseFloat(t.quantity??0),f=parseFloat(t.price??0),d=parseFloat(t.discount??0);return t.quantity=c>0?c:1,t.price=f>0?f:0,t.discount=d>0?d:0,e=Object.assign(e,t),e.tQs=t.quantity,e.tQ=e.tQt+t.quantity,{status:200,data:e}}else if(a=="comments"){let c=Object.assign({},t.comments);c.saleitID=new ObjectId(t.id??""),c.weight=t.weight??"",c.userID=t.userID??"",c.weight=await u();let f=new P(J,c),d=null;try{d=await f.computeUser()}catch{}return console.log(a,`
 Sale UserData Status Result  
`,d.status),d.status!=200?d:n=="delete"?await f.deleteItem().then(p=>(console.log(n,`
  Sale  Status Result 
`,p.status),p.status==200&&(p.data=e),p)).catch(p=>(console.log(p),{status:401,data:p,foreignData:p})):await f.saveItem(!0).then(p=>(console.log(n,`
  Sale  Status Result 
`,p.status),p.status==200&&(p.data=e),p)).catch(p=>(console.log(p),{status:401,data:p,foreignData:p}))}else if(a=="clients"){let c=Object.assign({},t.clients);var i=parseFloat(e.quantity??1),r=parseFloat(e.tQt??0),s=parseFloat(e.tClient??0),l=parseFloat(e._stage_??1);if(n=="delete")return await new P(M,c).deleteItem().then(async d=>{if(console.log(n,`
  Sale  Status Result 
`,d.status),d.data=null,d.status==200){i=i+parseFloat(c.quantity),r=r>0?r-parseFloat(c.quantity):0,c.store=="buy"&&(s=s>0?s-1:0);let p=await Kt(e,i,r,s,l);console.log(`
 SecondaryOperation Sale  Status Result 
`,!!p),d.data=p,p||(d.status=401)}return d}).catch(d=>(console.log(d),{status:401,data:d,foreignData:d}));if(["create","update"].includes(n)){var o=e.discount>0?e.discount:e.price;let f={status:501,data:"Computing Client Error"};c.totalOnstore=i??0,c.totalTaken=r??0,c.salePrice=o??0;try{f=await la(c,e.currency??"")}catch{}if(f.status!=200)return f;c=f.data,c.contentId=t.id,c.weight=t.weight,c.userID=t.userID,c.saleitID=e.id,c.weight=await u();let d=new P(M,c),p=null;try{p=await d.computeUser()}catch{}return console.log(a,`
 Sale UserData Status Result  
`,p.status),p.status!=200?p:await d.saveItem(!0).then(async N=>{if(N.data=null,console.log(n,`
  Sale  Status Result 
`,N.status),N.status==200){i=parseFloat(c.totalOnstore??0),r=parseFloat(c.totalTaken??0),s=s+(c.newClient??0);let ve=await Kt(e,i,r,s,l);console.log(`
 SecondaryOperation Sale  Status Result 
`,!!ve),N.data=ve,ve||(N.status=401)}return N}).catch(N=>(console.log(N),{status:401,data:N,foreignData:N}))}else return{status:401,data:"no Sub Operation for  :- "+a,foreignData:"no Sub Operations"}}else return{status:401,data:"no Operation",foreignData:"no Operations"};async function u(c=!1){let f=parseInt(e.catagoryScore??1),d=parseInt(e.usageScore??1),p=parseInt(e.trendScore??1);if(c)try{d=t.usage??!1?parseInt(na[t.usage]):d,f=t.catagory??!1?parseInt(ra[t.catagory]):f,t.catagoryScore=isNaN(f)?10:f,t.usageScore=isNaN(d)?10:d,t.trendScore=isNaN(p)?10:p+1}catch{}else e.trendScore=p+1;return[1,f,d,p]}}async function la(e,t){var a=e.served??!1,n=e.store??!1;let i=null;try{if(n=="cart"||!a)return e.store="cart",e.quantity=e.quantity??0,e.price=(e.quantity??0)*e.salePrice,e.served="Requesting",e.currency=t,e._stage_=0,i={status:200,data:e},i;if(e.salePrice){let s=parseFloat(e.quantity??1);if(s=s||1,a=="Requesting"||!e.price)if(e.totalOnstore){s>e.totalOnstore&&(s=e.totalOnstore),e.totalOnstore=e.totalOnstore-s,e.totalTaken=e.totalTaken+s;var r=parseFloat(s*e.salePrice);e.quantity=s,e.price=r,e.served="Requested",e.currency=t,e.store="buy",e.newClient=1,e.description="waiting for Delivery Infos",e._stage_=1,i={status:200,data:e}}else e.store="cart",e.currency=t,e.quantity=e.quantity??0,e.served="Requesting",e._stage_=0,i={status:200,data:e};else e.served=="Queed"&&(e._stage_=3),e.served=="Served"&&(e._stage_=4),i={status:200,data:e}}else e.store="cart",e.quantity=e.quantity??0,e.served="Requesting",e._stage_=0,i={status:200,data:e};return i}catch(s){return{status:501,data:s}}}async function Kt(e,t,a,n,i){return t??!1?(i=Math.max(Number(i),2),e.completed="no"):(e.completed="yes",i=Math.max(Number(i),4)),e.quantity=t,e.tQs=t,e.tQt=a,e.tClient=n,e.tQ=a+t,e._stage_=i,e}var de=ia;var Lt=require("mongoose"),zt=Lt.mongoose.Types.ObjectId;var We="id",Te="id";var Gt={updatedAt:null};async function Be(e,t=null,a=null){try{let n={};e[We]??!1?n["_"+We]=new zt(e[We]):n=Gt;let i={};return await j.findOne(n).then(async r=>{if(console.log(`
-------------------New CreateSaleit--------------------------
`),console.log(`
UpdateSale >== mainOps = `,t,`
 subOps = `,a,"UpdatingOperations Ends Succefully of UserID",e.userID??!1),r==null)if(t){if(i=await de({},e,t,a),console.log(`
 mainOps = `,t,`
 subOps = `,a,"PrimaryOperations- New "),i.status!=200)return i;r=new j(i.data)}else r=new j(e);else if(t){let s=await de(r,e,t,a);if(console.log(`
 mainOps = `,t,`
 subOps = `,a,"PrimaryOperations - Updating "),s.status!=200)return s;r=s.data}else r=Object.assign(r,e);return console.log(`
 mainOps = `,t,`
 subOps = `,a,"UpdatingOperations Ends Succefully"),await r.save().then(s=>(console.log(`
 === ==============Saved Finally    =================
`,!!s),s&&Object.keys(s).length?{status:200,data:s,foreignData:i.foreignData??{status:401}}:{status:501,data:s})).catch(s=>({status:501,data:s}))}).catch(r=>({status:501,data:r}))}catch(n){return{status:501,data:n}}}async function _(e,t=null,a=null){try{let n={};e[Te]??!1?n["_"+Te]=new zt(e[Te]):n=Gt;let i={};return await j.findOne(n).then(async r=>{if(console.log(`
-------------------New UpdateSaleit--------------------------
`),console.log(`
UpdateSale >== mainOps = `,t,`
 subOps = `,a,`
 UpdatingOperations Ends Succefully of UserID`,e.userID??!1),r==null)return{status:404,data:"Saleit Record Doesn't Found."};if(t){if(i=await de(r,e,t,a),console.log("_primaryOperations UpdateSale ==<",i.status,`
`),i.status!=200)return i;r=Object.assign(r,i.data)}else r=Object.assign(r,e);return await r.save().then(s=>(console.log(`
 === ==============Saved Finally    =================
`,!!s),s&&Object.keys(s).length?{status:200,data:s,foreignData:i.foreignData??{status:401}}:{status:501,data:s})).catch(s=>({status:500,data:s}))}).catch(r=>({status:500,data:r}))}catch(n){return{status:500,data:n}}}var cn=Jt.mongoose.Types.ObjectId,D=(0,Vt.Router)(),Yt=J,V="/saleitChat";var Y={"Content-Type":"application/json","Content-Length":"5050",ETag:"Roaw"},De="comments",oa="update",ua="create",ca="delete",da="id",fa="id";D.post(V,async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],r={};return r=e.body??{},(r[da]??null)==null?t.status(404).send("Create Key Null"+r):(r.userID=n,await _(r,De,ua).then(s=>(console.log(s.status,`
Clients Response Creating New
`),t.set(Y),t.status(s.status).send(s))))});D.put(V,async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],r={};return r=e.body??{},(r[fa]??null)==null?t.status(404).send("Uppdate Key Null"+r):(r.userID=n,await _(r,De,oa).then(s=>(console.log(s.status,`
Clients Response Creating New
`),t.set(Y),t.status(s.status).send(s))))});D.get(V+"s",async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],r=e.query??e.params;(r??!1)&&Object.keys(r).length;let[s=[],l=[],o=10]=await m(r),u={createdAt:-1};try{let c=await w(Yt,s,l,o,u);return t.set(Y),t.status(c.status).json(c.data)}catch(c){return t.status(500).send(c)}});D.get(V,async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],r=e.query??e.params;if(!((r??!1)&&Object.keys(r).length))return t.status(400).send("Search Query is null ?");let[s=[],l=[],o=10]=await m(r),u={createdAt:-1};try{let c=await b(Yt,s,l,o,u);return t.set(Y),t.status(c.status).json(c.data)}catch(c){return t.status(500).send(c)}});D.delete(V,async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],r=e.query??e.params??{};if(Object.keys(r).length==0)return t.status(404).send("Body is null ?");console.log(`
Clients Response Creating New
`),r.userID=n;try{return await _(r,De,ca).then(s=>(console.log(s.status,`
Clients Response Creating New
`),t.set(Y),t.status(s.status).send(s)))}catch(s){return t.status(500).send(s)}});var Xt=D;var Zt=require("express"),pa=v(require("multer")),qt=require("mongoose");var ga=qt.mongoose.Types.ObjectId,F=(0,Zt.Router)(),A=Pe,X="/publicchat";var Z={"Content-Type":"application/json","Content-Length":"5000",ETag:"Roaw","Set-Cookie":["type=ninja","language=javascript"]};var Qt="phone";async function ya(e){try{let t={};return t[Qt]=!1,await A.findOne(t,{}).then(async a=>{if(a==null)a=new A(e);else return{status:404,data:"Dubplication Occured"};return console.log("------------------------------------------>Existed Profile",a),await a.save().then(n=>n&&Object.keys(n).length?{status:200,data:n}:{status:404,data:n}).catch(n=>({status:404,data:n}))}).catch(a=>({status:404,data:a}))}catch{return{status:404,data:"Fatal DATABASE ERROR"}}}async function ma(e){console.log("------------------------------------------>Existed Profile");try{let t={};return e.id??!1?t._id=new ga(e.id):t[Qt]=!1,await A.findOne({$or:t},{}).then(async a=>a==null?{status:404,data:"Not REgistered"}:(a=Object.assign(a,e),await a.save().then(n=>n&&Object.keys(n).length?{status:200,data:n}:{status:404,data:n}).catch(n=>({status:404,data:n})))).catch(a=>({status:404,data:a}))}catch{return{status:404,data:"Fatal DATABASE ERROR"}}}F.post(X,async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userId??!1,e.queryWeight??!1],r=e?.body??!1;return!r||Object.keys(r).length==0?t.status(404).send({message:"NullData Body Received."}):await ya(r).then(s=>s.status==200?(t.set(Z),t.status(s.status).json(s.data)):t.status(s.status).send(s.data)).catch(s=>t.status(404).send(s))});F.put(X,g,async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userId??!1,e.queryWeight??!1],r=e?.body??!1;return!r||Object.keys(r).length==0?t.status(404).send({message:"NullData Body Received."}):await ma(r).then(s=>s.status==200?(t.set(Z),t.status(s.status).json(s.data)):t.status(s.status).send(s.data)).catch(s=>t.status(404).send(s))});F.get(X+"s",g,async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userId??!1,e.queryWeight??!1],r=e.query??e.params;!(r??!1)||Object.keys(r).length==0;let[s,l,o]=await m(r);try{let u=await w(A,s,l,o);return u.status==200?(t.set(Z),t.send(u.data)):t.status(404).send("(Srv):- _read404;but, "+u.data)}catch{return t.status(500).send("(Srv);- _read500")}});F.get(X,g,async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userId??!1,e.queryWeight??!1],r=e.query??e.params;!(r??!1)||Object.keys(r).length==0;let[s,l,o]=await m(r);try{let u=await b(A,s,l,o);return console.log("reading public hatts==>>",u.data.length,s),u.status==200?(t.set(Z),t.send(u.data)):t.status(404).send("(Srv):- _readf202;but, "+u.data)}catch{return t.status(500).send("(Srv);- _readf500")}});F.delete(X,g,async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userId??!1,e.queryWeight??!1];if(!n)return t.status(404).send({message:"NullData(P) Received."});let r=e.query??e.params;!(r??!1)||Object.keys(r).length==0;try{let s=await $(A,r.id);return s.status==200?(t.set(Z),t.send(s.data)):t.status(404).send("(Srv):- _del202;but, "+s.data)}catch{return t.status(500).send("(Srv);- _del500")}});var es=F;var as=require("mongoose"),rs=require("express"),fe=v(require("multer"));var Rn=as.mongoose.Types.ObjectId,K=(0,rs.Router)(),Pn=require("fs"),q=j,Q="/saleit",x={"Content-Type":"application/json","Content-Length":"5000",ETag:"Roaw"},ts={"application/pdf":"pdf","application/zip":"zip","text/csv":"csv","text/pdf":"pdf","text/json":"json","image/jpeg":"jpeg","image/png":"png","image/svg+xml":"svg+xml","image/webp":"webp","video/mp4":"mp4","video/mkv":"mkv"},ns=()=>{var e="";return{storage:fe.default.diskStorage({filename:(t,a,n)=>{let i=ts[a.mimetype];e=a.originalname.split(".")[0].split(" ")[0]+"-"+new Date().getTime()+"."+i,n(null,e)},destination:(t,a,n)=>{n(null,"./public/"+a.fieldname)},path:(t,a,n)=>{n(null,"/"+a.fieldname+"/"+e)}}),limits:{fileSize:1e6*5},fileFilter:(t,a,n)=>{if(ts[a.mimetype])n(null,!0);else return n(null,!1)}}};var ha="phone",Ae="id",ss="id";K.post(Q,async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1];console.log(`

 Creating saleit`);var s=(e.query??e.params??{})?.file_??!1;let l={};if(s)(s.files??!1)&&(0,fe.default)(ns()).fields([{name:s.files,maxCount:4}])(e,t,async o=>{if(l=e.body??{},Object.keys(l).length==0)return t.status(404).send("");if(o)return t.status(404).send({message:"Uploading Error"+o});{let u=e.files??!1;if(u){let c=await W(u);l[s.files]=c[s.files]}}return l.userID=n,await Be(l,l.thisOps??"CreateRowItem").then(u=>(t.set(x),t.status(u.status).send(u.data)))});else{if(l=e.body??{},(l[ha]??null)==null)return t.status(404).send("null Post-createKey ?");l.userID=n;try{return await Be(l,l.thisOps??"CreateRowItem").then(o=>(t.set(x),t.status(o.status).send(o.data)))}catch(o){return t.status(500).send(o)}}});K.put(Q,async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1];if(!n)return t.status(401).send({message:"NullData(P + token) Received."});console.log(`
 Updating saleit UserID =`,n);var s=(e.query??e.params??{})?.file_??!1;let l={};if(s)if(s.files??!1)(0,fe.default)(ns()).fields([{name:s.files,maxCount:4}])(e,t,async o=>{if(l=e.body??{},(l[Ae]??null)==null)return t.status(404).send("Uppdate Key Null");if(o)return t.status(404).send({message:"Uploading Error"+o});{let u=e.files??!1;if(u){let c=await W(u);l[s.files]=c[s.files]}}return l.userID=n,await _(l,l.thisOps??"UpdateRowItem","").then(u=>(t.set(x),t.status(u.status).send(u.data)))});else return l=e.body??{},(l[Ae]??null)==null?t.status(404).send("Uppdate Key Null"):(l.userID=n,await _(l,l.thisOps??"UpdateRowItem").then(o=>(t.set(x),t.status(o.status).send(o.data))));else{if(l=e.body??{},(l[Ae]??null)==null)return t.status(404).send("Uppdate Key Null");l.userID=n;try{return await _(l,l.thisOps??"UpdateRowItem").then(o=>(t.set(x),t.status(o.status).send(o.data)))}catch(o){return t.status(500).send(o)}}});K.get(Q+"s",async(e,t)=>{let[a,n,i,r]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1,e.location??!1],s=e.query??e.params??{};r&&(s.lat=r.lat??"",s.long=r.long??"");let[l=[],o=[],u=5,c={createdAt:-1},f=0]=await m(s);(s.trend??!1)&&(c.trendScore=s.trend);let d=(s.queryOperator??"-or").split("-");try{let p=d[1]=="and"?await b(q,l,o,u,c,f):await w(q,l,o,u,c,f);return console.log(`
Result:_ Searching for saleitContent gets(s)
`,p.data.length??!1,r),t.set(x),t.status(p.status).json(p.data)}catch(p){return t.status(500).send(p)}});K.get(Q,async(e,t)=>{let[a,n,i,r]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1,e.location??!1],s=e.query??e.params??{};r&&(s.lat=r.lat??"",s.long=r.long??"");let[l=[],o=[],u=5,c={createdAt:-1},f=0]=await m(s);if(!Object.keys(l).length)return t.status(404).send({message:"NullData(P) Received."});(s.trend??!1)&&(c.trendScore=s.trend);let d=(s.queryOperator??"-or").split("-");try{let p=d[1]=="and"?await b(q,l,o,u,c,f):await E(q,l,o,u,c,f);return console.log(`
Result:_ Searching for saleitContent get(xs) 
`,(s.qweight?.[3]??!1)=="3",p.data.length??!1,r),t.set(x),t.status(p.status).json(p.data)}catch(p){return t.status(500).send(p)}});K.delete(Q,async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],r=e.query??e.params??{};if((r[ss]??null)==null)return t.status(404).send("Search Query is null ?");try{let s=await $(q,r[ss]);return t.set(x),t.status(s.status).json(s.data)}catch(s){return t.status(500).send(s)}});var is=K;var ls=require("mongoose"),os=require("express");var zn=ls.mongoose.Types.ObjectId,H=(0,os.Router)();var pe=M,ee="/saleitClient";var Fe="clients",va="update",ba="create",Sa="delete",wa="id",_a="id";var te={"Content-Type":"application/json","Content-Length":"5050",ETag:"Roaw"};H.post(ee,async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1];if(!n)return t.status(401).send({message:"UserID is Null"});let r={};return r=e.body??{},(r[wa]??null)==null?t.status(404).send("Uppdate Key Null"):(r.userID=n,await _(r,Fe,ba).then(s=>(console.log(s.status,`
Clients Response Creating New
`),t.set(te),t.status(s.status).send(s))))});H.put(ee,async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1];if(!n)return t.status(401).send({message:"UserID is Null."});let r={};return r=e.body??{},(r[_a]??null)==null?t.status(404).send("Uppdate Key Null"):(r.userID=n,await _(r,Fe,va).then(s=>(console.log(s.data,`
Clients Response Creating New
`),t.set(te),t.status(s.status).send(s))))});H.get(ee+"s",async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],r=e.query??e.params,[s={},l=[],o=100,u={createdAt:-1},c=0]=await m(r);Object.keys(s).length;let f=(r.queryOperator??"-or").split("-");try{let d=f[1]=="and"?await b(pe,s,l,o,u):await w(pe,s,l,o,u);return t.set(te),t.status(d.status).json(d.data)}catch(d){return t.status(500).send(d)}});H.get(ee,async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],r=e.query??e.params,[s={},l=[],o=100,u={createdAt:-1},c=0]=await m(r);if(!Object.keys(s).length)return t.status(404).send({message:"NullData(P) Received."});let f=(r.queryOperator??"-or").split("-");try{let d=f[1]=="and"?await b(pe,s,l,o,u):await E(pe,s,l,o,u);return t.set(te),t.status(d.status).json(d.data)}catch(d){return t.status(500).send(d)}});H.delete(ee,async(e,t)=>{let[a,n,i]=[e._issrole??!1,e.userID??!1,e.queryWeight??!1],r=e.query??e.params??{};if(Object.keys(r).length==0)return t.status(404).send("Body is null ?");console.log(`
Clients Response Creating New
`),r.userID=n;try{return await _(r,Fe,Sa).then(s=>(console.log(s.status,`
Clients Response Creating New
`),t.set(te),t.status(s.status).send(s)))}catch(s){return t.status(500).send(s)}});var us=H;var se=v(require("express")),fs=v(require("compression")),ps=v(require("cookie-parser")),Ke=v(require("body-parser")),ge=v(require("cors")),gs=v(require("path")),ys=v(require("dotenv"));ys.default.config();var cs="8080";var Na=1e3*60*60*24*30;var ds={origin:"*",methods:["GET","POST","PUT","DELETE"],allowedHeaders:["Content-Type","Authorization"],credentials:!0},ms=(0,O.ssrCreate)(()=>{let e=(0,se.default)();return e.use((0,fs.default)()),ge.default&&e.use((0,ge.default)(ds)),e.options("*",(0,ge.default)(ds)),e.use((0,ps.default)()),e.set("view engine","ejs"),e.use(Ke.default.json()),e.use(Ke.default.urlencoded({extended:!0})),e.use("/assets",se.default.static("src/assets")),e.use("/public",se.default.static(gs.default.join(__dirname,"public"),{maxAge:"7d",etag:!0,index:!1})),e.use((t,a,n)=>(a.setHeader("X-Powered-By","YitService"),a.setHeader("Expires","4d"),n(),!0)),e.get("/helps",g,(t,a)=>{a.json({message:"API is working!"}),a.send("API is working!"),a.status(200).json({message:"API is working!"}),a.status(200).send("API is working!")}),e.use("/api",pt),e.use("/permissionapi",wt),e.use("/profileapi",jt),e.use("/publicchatapi",es),e.use("/saleitapi",g,is),e.use("/saleitClientapi",g,us),e.use("/saleChatapi",g,Xt),e}),hs=(0,O.ssrListen)(async({app:e,port:t,isReady:a})=>(await a(),e.listen(cs,()=>{console.log(!0+` = Prod.Mode, ServerAPI @ http://:${cs} DataBase_API @ : `+process.env.mongodAPI_URL)}))),ii=(0,O.ssrClose)(({listenResult:e})=>(console.log("Closing Server is Being Used",e),e&&e.close(),!0)),vs=(0,O.ssrServeStaticContent)((e,t)=>se.default.static(e,{maxAge:Na,...t})),He=(0,O.ssrRenderPreloadTag)(e=>(console.log("renderPreloadTag is Being Used",e),Ia.test(e)===!0?`<link rel="modulepreload" href="${e}" crossorigin>`:Oa.test(e)===!0?`<link rel="stylesheet" href="${e}">`:ka.test(e)===!0?`<link rel="preload" href="${e}" as="font" type="font/woff" crossorigin>`:Ca.test(e)===!0?`<link rel="preload" href="${e}" as="font" type="font/woff2" crossorigin>`:ja.test(e)===!0?`<link rel="preload" href="${e}" as="image" type="image/gif">`:$a.test(e)===!0?`<link rel="preload" href="${e}" as="image" type="image/jpeg">`:Ra.test(e)===!0?`<link rel="preload" href="${e}" as="image" type="image/png">`:"")),Ia=/\.js$/,Oa=/\.css$/,ka=/\.woff$/,Ca=/\.woff2$/,ja=/\.gif$/,$a=/\.jpe?g$/,Ra=/\.png$/;function Le(e){return Promise.all([Promise.resolve().then(()=>(ws(),Ss))]).then(async t=>{let a=t.map(n=>n.default);for(let n=0;n<a.length;n++)try{await a[n](e)}catch(i){console.error("[Quasar SSR] middleware error:",i);return}})}var xa=process.env.PORT||3e3,Ma=/\/\//g,me="/",Cs=me==="/"?e=>e||"/":e=>e?(me+e).replace(Ma,"/"):me,_s=__dirname,js=(0,L.join)(__dirname,"client");function $s(){return(0,L.join)(js,...arguments)}function Ea(e){let t="",a=new Set;return e.forEach(n=>{let i=ye.default[n];i!==void 0&&i.forEach(r=>{if(a.has(r)===!0)return;a.add(r);let s=(0,L.basename)(r);if(ye.default[s]!==void 0)for(let l of ye.default[s])t+=He(l),a.add(l);t+=He(r)})}),t}var Ua="document.currentScript.remove()";function Wa(e){let t=e.nonce!==void 0?' nonce="'+e.nonce+'" ':"",a=(0,Is.default)(e.state,{isJSON:!0});return"<script"+t+">window.__INITIAL_STATE__="+a+";"+Ua+"<\/script>"}async function Ta(e){let t=[];Object.assign(e,{_meta:{},onRendered:a=>{t.push(a)}});try{let a=await(0,ks.default)(e),n=await(0,Ns.renderToString)(a,e);return t.forEach(i=>{i()}),typeof e.rendered=="function"&&e.rendered(),e._meta.runtimePageContent=n,e.state!==void 0&&(e._meta.headTags=Wa(e)+e._meta.headTags),e._meta.endingHeadTags+=Ea(e.modules),(0,Os.default)(e)}catch(a){throw a}}var Rs=(e,t={})=>vs($s(e),t),he={port:xa,resolve:{urlPath:Cs,root(){return(0,L.join)(_s,...arguments)},public:$s},publicPath:me,folders:{root:_s,public:js},render:e=>Ta(e),serve:{static:Rs}},ze=ms(he);he.app=ze;ze.use(Cs("/"),Rs("."));var Ps=()=>Le(he),Ba=(e,t,a)=>Ps().then(()=>ze(e,t,a)),Da=hs({isReady:Ps,ssrHandler:Ba,...he});0&&(module.exports={});
